(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[994],{37475:(gc,st)=>{var p=function(){var r={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(y,X,oe,A,Ee,ae,De){var pe=ae.length-1;switch(Ee){case 1:this.$=y.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(y);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=ae[pe-1];case 13:this.$={};break;case 14:this.$=ae[pe-1];break;case 15:this.$=[ae[pe-2],ae[pe]];break;case 16:this.$={},this.$[ae[pe][0]]=ae[pe][1];break;case 17:this.$=ae[pe-2],ae[pe-2][ae[pe][0]]=ae[pe][1];break;case 18:this.$=[];break;case 19:this.$=ae[pe-1];break;case 20:this.$=[ae[pe]];break;case 21:this.$=ae[pe-2],ae[pe-2].push(ae[pe]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(y,X){throw new Error(y)},parse:function(y){var X=this,oe=[0],A=[null],Ee=[],ae=this.table,De="",pe=0,v=0,Te=0,xe=2,o=1;this.lexer.setInput(y),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var bt=this.lexer.yylloc;Ee.push(bt),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function At(L){oe.length=oe.length-2*L,A.length=A.length-L,Ee.length=Ee.length-L}function jt(){var L;return L=X.lexer.lex()||1,typeof L!="number"&&(L=X.symbols_[L]||L),L}for(var Oe,Je,we,Ie,to,Et,Ve={},Xe,Pe,k,D;;){we=oe[oe.length-1],this.defaultActions[we]?Ie=this.defaultActions[we]:(Oe==null&&(Oe=jt()),Ie=ae[we]&&ae[we][Oe]);e:if(typeof Ie=="undefined"||!Ie.length||!Ie[0]){if(!Te){D=[];for(Xe in ae[we])this.terminals_[Xe]&&Xe>2&&D.push("'"+this.terminals_[Xe]+"'");var j="";this.lexer.showPosition?j="Parse error on line "+(pe+1)+`:
`+this.lexer.showPosition()+`
Expecting `+D.join(", ")+", got '"+this.terminals_[Oe]+"'":j="Parse error on line "+(pe+1)+": Unexpected "+(Oe==1?"end of input":"'"+(this.terminals_[Oe]||Oe)+"'"),this.parseError(j,{text:this.lexer.match,token:this.terminals_[Oe]||Oe,line:this.lexer.yylineno,loc:bt,expected:D})}if(Te==3){if(Oe==o)throw new Error(j||"Parsing halted.");v=this.lexer.yyleng,De=this.lexer.yytext,pe=this.lexer.yylineno,bt=this.lexer.yylloc,Oe=jt()}for(;!(xe.toString()in ae[we]);){if(we==0)throw new Error(j||"Parsing halted.");At(1),we=oe[oe.length-1]}Je=Oe,Oe=xe,we=oe[oe.length-1],Ie=ae[we]&&ae[we][xe],Te=3}if(Ie[0]instanceof Array&&Ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+Oe);switch(Ie[0]){case 1:oe.push(Oe),A.push(this.lexer.yytext),Ee.push(this.lexer.yylloc),oe.push(Ie[1]),Oe=null,Je?(Oe=Je,Je=null):(v=this.lexer.yyleng,De=this.lexer.yytext,pe=this.lexer.yylineno,bt=this.lexer.yylloc,Te>0&&Te--);break;case 2:if(Pe=this.productions_[Ie[1]][1],Ve.$=A[A.length-Pe],Ve._$={first_line:Ee[Ee.length-(Pe||1)].first_line,last_line:Ee[Ee.length-1].last_line,first_column:Ee[Ee.length-(Pe||1)].first_column,last_column:Ee[Ee.length-1].last_column},Et=this.performAction.call(Ve,De,v,pe,this.yy,Ie[1],A,Ee),typeof Et!="undefined")return Et;Pe&&(oe=oe.slice(0,-1*Pe*2),A=A.slice(0,-1*Pe),Ee=Ee.slice(0,-1*Pe)),oe.push(this.productions_[Ie[1]][0]),A.push(Ve.$),Ee.push(Ve._$),k=ae[oe[oe.length-2]][oe[oe.length-1]],oe.push(k);break;case 3:return!0}}return!0}},at=function(){var ee={EOF:1,parseError:function(X,oe){if(this.yy.parseError)this.yy.parseError(X,oe);else throw new Error(X)},setInput:function(y){return this._input=y,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var y=this._input[0];this.yytext+=y,this.yyleng++,this.match+=y,this.matched+=y;var X=y.match(/\n/);return X&&this.yylineno++,this._input=this._input.slice(1),y},unput:function(y){return this._input=y+this._input,this},more:function(){return this._more=!0,this},less:function(y){this._input=this.match.slice(y)+this._input},pastInput:function(){var y=this.matched.substr(0,this.matched.length-this.match.length);return(y.length>20?"...":"")+y.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var y=this.match;return y.length<20&&(y+=this._input.substr(0,20-y.length)),(y.substr(0,20)+(y.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var y=this.pastInput(),X=new Array(y.length+1).join("-");return y+this.upcomingInput()+`
`+X+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var y,X,oe,A,Ee,ae;this._more||(this.yytext="",this.match="");for(var De=this._currentRules(),pe=0;pe<De.length&&(oe=this._input.match(this.rules[De[pe]]),!(oe&&(!X||oe[0].length>X[0].length)&&(X=oe,A=pe,!this.options.flex)));pe++);if(X)return ae=X[0].match(/\n.*/g),ae&&(this.yylineno+=ae.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ae?ae[ae.length-1].length-1:this.yylloc.last_column+X[0].length},this.yytext+=X[0],this.match+=X[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(X[0].length),this.matched+=X[0],y=this.performAction.call(this,this.yy,this,De[A],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var X=this.next();return typeof X!="undefined"?X:this.lex()},begin:function(X){this.conditionStack.push(X)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(X){this.begin(X)}};return ee.options={},ee.performAction=function(X,oe,A,Ee){var ae=Ee;switch(A){case 0:break;case 1:return 6;case 2:return oe.yytext=oe.yytext.substr(1,oe.yyleng-2),4;break;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},ee.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],ee.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},ee}();return r.lexer=at,r}();st.parser=p,st.parse=function(){return p.parse.apply(p,arguments)},st.main=function(at){if(!at[1])throw new Error("Usage: "+at[0]+" FILE")}},95417:(gc,st,p)=>{"use strict";p.r(st),p.d(st,{App:()=>mc,default:()=>BC});var r=p(32735),at=p(99357),ee=p(5141),y=p(88425),X=p(11856),oe=p(16540),A=p(5636),Ee=p(98978),ae=p.n(Ee),De=p(83983);const v=e=>`content-manager.${e}`;var Te=p(74506),xe=p(60216),o=p.n(xe);const At=(0,r.createContext)();var jt=Object.defineProperty,Oe=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ie=(e,t,n)=>t in e?jt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,to=(e,t)=>{for(var n in t||(t={}))Je.call(t,n)&&Ie(e,n,t[n]);if(Oe)for(var n of Oe(t))we.call(t,n)&&Ie(e,n,t[n]);return e},Et=(e,t)=>{var n={};for(var s in e)Je.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Oe)for(var s of Oe(e))t.indexOf(s)<0&&we.call(e,s)&&(n[s]=e[s]);return n};function Ve(e){var t=e,{attributes:n,buttonData:s,children:a,goTo:l,layout:i,metadatas:u,moveItem:c,moveRow:d,onAddData:m,relationsLayout:f,removeField:g,selectedItemName:h,setEditFieldToSelect:E}=t,b=Et(t,["attributes","buttonData","children","goTo","layout","metadatas","moveItem","moveRow","onAddData","relationsLayout","removeField","selectedItemName","setEditFieldToSelect"]);return r.createElement(At.Provider,{value:to({attributes:n,buttonData:s,goTo:l,layout:i,metadatas:u,moveItem:c,moveRow:d,onAddData:m,relationsLayout:f,removeField:g,selectedItemName:h,setEditFieldToSelect:E},b)},a)}Ve.defaultProps={attributes:{},buttonData:[],goTo:()=>{},layout:[],metadatas:{},moveItem:()=>{},moveRow:()=>{},onAddData:()=>{},relationsLayout:[],removeField:()=>{},selectedItemName:null,setEditFieldToSelect:()=>{}},Ve.propTypes={attributes:o().object,buttonData:o().array,children:o().node.isRequired,goTo:o().func,layout:o().array,metadatas:o().object,moveItem:o().func,moveRow:o().func,onAddData:o().func,relationsLayout:o().array,removeField:o().func,selectedItemName:o().string,setEditFieldToSelect:o().func};const Xe=Ve,Pe={COMPONENT:"component",EDIT_FIELD:"editField",EDIT_RELATION:"editRelation",FIELD:"field",RELATION:"relation"};var k=p(19615),D=p(9808),j=p(19192),L=p(95602),Me=p(20763),yc=p(76470),Be=p.n(yc),hc=p(64198),et=p.n(hc),bc=p(60672),no=p.n(bc);const Ec=(0,k.default)(D.Box)`
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
`,vc=(0,k.default)(D.Box)`
  height: ${32/16}rem;
  width: ${32/16}rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,Cc=k.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`,ro=({displayedValue:e})=>r.createElement(Ec,{paddingLeft:3,paddingRight:3,paddingTop:3,paddingBottom:3,hasRadius:!0,background:"neutral0",width:(0,y.pxToRem)(300)},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(Cc,{type:"button"},r.createElement(j.Flex,null,r.createElement(vc,{background:"neutral200"},r.createElement(no(),null)),r.createElement(D.Box,{paddingLeft:6,maxWidth:(0,y.pxToRem)(150)},r.createElement(L.Typography,{textColor:"neutral700",ellipsis:!0},e)))),r.createElement(D.Box,{paddingLeft:3},r.createElement(j.Flex,null,r.createElement(Me.IconButton,{icon:r.createElement(Be(),null)}),r.createElement(D.Box,{paddingLeft:2},r.createElement(Me.IconButton,{icon:r.createElement(et(),null)}))))));ro.propTypes={displayedValue:o().string.isRequired};const Oc=ro;var se=p(90662),Pc=p(95717),it=p.n(Pc),Rc=p(94009),oo=p.n(Rc);const so=e=>e.length>20?`${e.substring(0,20)}...`:e,gn=(0,k.default)(j.Flex)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,ao=(0,k.default)(gn)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Mc=(0,k.default)(j.Flex)`
  display: inline-flex;
  max-height: ${32/16}rem;
  opacity: ${({transparent:e})=>e?0:1};
  background-color: ${({theme:e,isSibling:t})=>t?e.colors.neutral100:e.colors.primary100};
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }

  ${L.Typography} {
    color: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
  }

  ${ao} {
    border-right: 1px solid
      ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};
  }
`,yn=({labelField:e,transparent:t,isSibling:n})=>{const s=so(e);return r.createElement(Mc,{hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n},r.createElement(se.Stack,{horizontal:!0,spacing:3},r.createElement(ao,{alignItems:"center"},r.createElement(et(),null)),r.createElement(L.Typography,{fontWeight:"bold"},s)),r.createElement(j.Flex,{paddingLeft:3},r.createElement(gn,{alignItems:"center"},r.createElement(it(),null)),r.createElement(gn,{alignItems:"center"},r.createElement(oo(),null))))};yn.defaultProps={isSibling:!1,transparent:!1},yn.propTypes={isSibling:o().bool,labelField:o().string.isRequired,transparent:o().bool};const hn=yn,Tc={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function wc(e,t,n){if(!e||!t)return{display:"none"};const{x:s,y:a}=n,l=`translate(${s}px, ${a}px)`;return{transform:l,WebkitTransform:l}}const Ic=()=>{const{itemType:e,isDragging:t,item:n,initialOffset:s,currentOffset:a,mouseOffset:l}=(0,Te.useDragLayer)(i=>({item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging(),mouseOffset:i.getClientOffset()}));return t?r.createElement(Xe,null,r.createElement("div",{style:Tc},r.createElement("div",{style:wc(s,a,l),className:"col-md-2"},[Pe.EDIT_RELATION,Pe.EDIT_FIELD,Pe.FIELD].includes(e)&&r.createElement(hn,{labelField:n.labelField}),e===Pe.COMPONENT&&r.createElement(Oc,{displayedValue:n.displayedValue})))):null},io=(0,r.createContext)();var Dc=p(18522),B=p(92891);const lo=(0,r.createContext)(),zC=(0,r.createContext)(),UC=null;var fe=p(4409);const co=e=>e["content-manager_editViewLayoutManager"].currentLayout;var xc=Object.defineProperty,Sc=Object.defineProperties,Lc=Object.getOwnPropertyDescriptors,uo=Object.getOwnPropertySymbols,Fc=Object.prototype.hasOwnProperty,kc=Object.prototype.propertyIsEnumerable,po=(e,t,n)=>t in e?xc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ac=(e,t)=>{for(var n in t||(t={}))Fc.call(t,n)&&po(e,n,t[n]);if(uo)for(var n of uo(t))kc.call(t,n)&&po(e,n,t[n]);return e},jc=(e,t)=>Sc(e,Lc(t));const lt=()=>{const e=(0,fe.useSelector)(co),t=(0,r.useCallback)(n=>(0,B.get)(e,["components",n],{}),[e]);return jc(Ac({},e),{getComponentLayout:t})};var $c=p(43653),Se=p.n($c),ge=p(17247),Bc=p(99381),qe=p.n(Bc);const vt=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const s=qe()(e),a=s.splice(t,1);return s.splice(n,0,a[0]),s}return e},mo=e=>{const t=e.type;return t==="relation"?!(0,B.toLower)(e.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(t)&&!!t},fo=(e,t)=>Object.keys(e).reduce((n,s)=>{const a=(0,B.get)(e,[s],{}),{default:l,component:i,type:u,required:c,min:d,repeatable:m}=a;if(u==="json"&&(n[s]=null),u==="json"&&c===!0&&(n[s]={}),l!==void 0&&(n[s]=l),u==="component"){const f=(0,B.get)(t,[i,"attributes"],{}),g=fo(f,t);if(c===!0&&(n[s]=m===!0?[]:g),d&&m===!0&&c){n[s]=[];for(let h=0;h<d;h+=1)n[s].push(g)}}return u==="dynamiczone"&&c===!0&&(n[s]=[]),n},{}),$t=fo;var Nc=Object.defineProperty,Vc=Object.defineProperties,qc=Object.getOwnPropertyDescriptors,Bt=Object.getOwnPropertySymbols,go=Object.prototype.hasOwnProperty,yo=Object.prototype.propertyIsEnumerable,ho=(e,t,n)=>t in e?Nc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bn=(e,t)=>{for(var n in t||(t={}))go.call(t,n)&&ho(e,n,t[n]);if(Bt)for(var n of Bt(t))yo.call(t,n)&&ho(e,n,t[n]);return e},En=(e,t)=>Vc(e,qc(t)),Wc=(e,t)=>{var n={};for(var s in e)go.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Bt)for(var s of Bt(e))t.indexOf(s)<0&&yo.call(e,s)&&(n[s]=e[s]);return n};const Nt=e=>{var t=e,{layouts:n,metadatas:s}=t,a=Wc(t,["layouts","metadatas"]);const l=n.list.map(d=>d.name?d.name:d),i=n.editRelations.map(({name:d})=>d),u=Object.keys(s).reduce((d,m)=>{const f=(0,B.get)(s,[m],{});let g=f.edit;return g.mainField&&(g=En(bn({},g),{mainField:f.edit.mainField.name})),En(bn({},d),{[m]:{edit:g,list:(0,B.omit)(f.list,["mainField"])}})},{}),c=n.edit.map(d=>d.map(({name:m,size:f})=>({name:m,size:f})));return En(bn({},a),{layouts:{edit:c,editRelations:i,list:l},metadatas:u})};var zc=Object.defineProperty,Uc=Object.defineProperties,Hc=Object.getOwnPropertyDescriptors,bo=Object.getOwnPropertySymbols,Gc=Object.prototype.hasOwnProperty,Zc=Object.prototype.propertyIsEnumerable,Eo=(e,t,n)=>t in e?zc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_c=(e,t)=>{for(var n in t||(t={}))Gc.call(t,n)&&Eo(e,n,t[n]);if(bo)for(var n of bo(t))Zc.call(t,n)&&Eo(e,n,t[n]);return e},Qc=(e,t)=>Uc(e,Hc(t));const Kc=(e,t)=>e.map(n=>Qc(_c({},n),{subject:t})),vo=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,s)=>(n[s]=Kc(t[s],e),n),{})},Co=e=>e.split(".").filter(t=>(0,B.isNaN)(parseInt(t,10))),Oo=e=>e.length===0?-1:Math.max.apply(Math,e.map(t=>t.__temp_key__)),ve=e=>`/content-manager/${e}`;var Yc=Object.defineProperty,Po=Object.getOwnPropertySymbols,Jc=Object.prototype.hasOwnProperty,Xc=Object.prototype.propertyIsEnumerable,Ro=(e,t,n)=>t in e?Yc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vt=(e,t)=>{for(var n in t||(t={}))Jc.call(t,n)&&Ro(e,n,t[n]);if(Po)for(var n of Po(t))Xc.call(t,n)&&Ro(e,n,t[n]);return e};const Mo=(e,t,n)=>{const s=u=>t.find(c=>c.uid===u),a=Object.assign({},e),l=e[n].uid,i=s(l);return(0,B.set)(a,[n],Vt(Vt({},e[n]),i)),Object.keys(e.components).forEach(u=>{const c=s(u);(0,B.set)(a,["components",u],Vt(Vt({},e.components[u]),c))}),a};var eu=Object.defineProperty,tu=Object.defineProperties,nu=Object.getOwnPropertyDescriptors,To=Object.getOwnPropertySymbols,ru=Object.prototype.hasOwnProperty,ou=Object.prototype.propertyIsEnumerable,wo=(e,t,n)=>t in e?eu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Io=(e,t)=>{for(var n in t||(t={}))ru.call(t,n)&&wo(e,n,t[n]);if(To)for(var n of To(t))ou.call(t,n)&&wo(e,n,t[n]);return e},Do=(e,t)=>tu(e,nu(t));const Ct=(e,t)=>e&&Object.keys(e).reduce((n,s)=>{const a=n[s];return a===null?n:Array.isArray(a)?Array.isArray(n)?(n[s]=Ct(a,t),n):Do(Io({},n),{[s]:a.map(l=>Ct(l,t))}):typeof a=="object"?Array.isArray(n)?(n[s]=Ct(a,t),n):Do(Io({},n),{[s]:Ct(a,t)}):(s===t&&delete n[s],n)},e),su=Ct,xo=(e,t,n)=>{const s=(a,l)=>Object.keys(a).reduce((i,u)=>{const c=(0,y.getType)(l,u),d=(0,B.get)(a,u),m=(0,y.getOtherInfos)(l,[u,"component"]),f=(0,y.getOtherInfos)(l,[u,"repeatable"]);return c==="dynamiczone"?(i[u]=d.map(g=>s(g,n[g.__component])),i):c==="component"?(f?i[u]=d&&d.map(g=>s(g,n[m])):i[u]=d&&s(d,n[m]),i):(c!=="password"&&(i[u]=d),i)},{});return s(e,t)};var au=Object.defineProperty,iu=Object.defineProperties,lu=Object.getOwnPropertyDescriptors,So=Object.getOwnPropertySymbols,cu=Object.prototype.hasOwnProperty,uu=Object.prototype.propertyIsEnumerable,Lo=(e,t,n)=>t in e?au(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ot=(e,t)=>{for(var n in t||(t={}))cu.call(t,n)&&Lo(e,n,t[n]);if(So)for(var n of So(t))uu.call(t,n)&&Lo(e,n,t[n]);return e},Pt=(e,t)=>iu(e,lu(t));const vn=(e,t)=>t.find(n=>n.uid===e),du=(e,t)=>e.layouts.editRelations.reduce((s,a)=>{const l=(0,B.get)(e,["attributes",a],{}),i=(0,B.get)(e,["attributes",a,"targetModel"],null),c=vn(i,t).pluginOptions||{},d=(0,B.get)(e,["metadatas",a,"edit"],{}),m=6,f=ko(e,a,t);return s.push({name:a,size:m,fieldSchema:l,metadatas:d,queryInfos:f,targetModelPluginOptions:c}),s},[]),pu=(e,t)=>{const n=mu(e,t),s=Fo(n.contentType,null,t),a=n.contentType.uid,l=du(n.contentType,t),i=fu(n.contentType,n.components);return(0,B.set)(n,["contentType","layouts","edit"],s),(0,B.set)(n,["contentType","layouts","editRelations"],l),(0,B.set)(n,["contentType","layouts","list"],i),Object.keys(n.components).forEach(u=>{const c=Fo(n.components[u],a,t);(0,B.set)(n,["components",u,"layouts","edit"],c)}),n},mu=(e,t)=>{const n=Mo((0,B.cloneDeep)(e),t,"contentType"),{components:s,contentType:a}=n,l=i=>Object.keys(i.metadatas).reduce((u,c)=>{const d=(0,B.get)(i,["attributes",c],{});let m=i.metadatas[c];if(d.type==="relation"){const f=vn(d.targetModel,t),g=m.edit.mainField,h={name:g,schema:(0,B.get)(f,["attributes",g])};m={list:Pt(Ot({},m.list),{mainField:h}),edit:Pt(Ot({},m.edit),{mainField:h})}}return u[c]=m,u},{});return(0,B.set)(n,["contentType","metadatas"],l(a)),Object.keys(s).forEach(i=>{const u=s[i],c=l(u);(0,B.set)(n,["components",i,"metadatas"],c)}),n},Fo=(e,t,n)=>e.layouts.edit.reduce((a,l)=>{const i=l.map(u=>{const c=(0,B.get)(e,["attributes",u.name],{}),d=Pt(Ot({},u),{fieldSchema:c,metadatas:(0,B.get)(e,["metadatas",u.name,"edit"],{})});if(c.type==="relation"){const m=c.targetModel,g=vn(m,n).pluginOptions||{},h=t?gu(e,u.name,t,n):ko(e,u.name,n);(0,B.set)(d,"targetModelPluginOptions",g),(0,B.set)(d,"queryInfos",h)}return d});return a.push(i),a},[]),fu=(e,t)=>e.layouts.list.reduce((s,a)=>{const l=(0,B.get)(e,["attributes",a],{}),i=(0,B.get)(e,["metadatas",a,"list"],{}),u=l.type;if(u==="relation"){const c={endPoint:`collection-types/${e.uid}`,defaultParams:{}};return s.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:i,queryInfos:c}),s}if(u==="component"){const c=t[l.component],d=c.settings.mainField,m=c.attributes[d];return s.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:Pt(Ot({},i),{mainField:Pt(Ot({},m),{name:d})})}),s}return s.push({key:`__${a}_key__`,name:a,fieldSchema:l,metadatas:i}),s},[]),ko=(e,t,n)=>{const s=e.uid,a=ve(`relations/${s}/${t}`),l=(0,B.get)(e,["metadatas",t,"edit","mainField","name"],""),i=(0,B.get)(e,["attributes",t,"targetModel"],""),u=Ao(n).indexOf(i)!==-1;return{endPoint:a,containsKey:`${l}`,defaultParams:{},shouldDisplayRelationLink:u}},gu=(e,t,n,s)=>{const a=ve(`relations/${n}/${t}`),l=(0,B.get)(e,["metadatas",t,"edit","mainField","name"],""),i=(0,B.get)(e,["attributes",t,"targetModel"],""),u=Ao(s).indexOf(i)!==-1;return{endPoint:a,containsKey:`${l}`,defaultParams:{_component:e.uid},shouldDisplayRelationLink:u}},Ao=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),jo=pu;var qt=p(49415),yu=Object.defineProperty,hu=Object.defineProperties,bu=Object.getOwnPropertyDescriptors,$o=Object.getOwnPropertySymbols,Eu=Object.prototype.hasOwnProperty,vu=Object.prototype.propertyIsEnumerable,Bo=(e,t,n)=>t in e?yu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wt=(e,t)=>{for(var n in t||(t={}))Eu.call(t,n)&&Bo(e,n,t[n]);if($o)for(var n of $o(t))vu.call(t,n)&&Bo(e,n,t[n]);return e},No=(e,t)=>hu(e,bu(t));const Cu={error:null,isLoading:!0,layout:{},layouts:{}},Ou=(e,t)=>(0,qt.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const s=t.data.contentType.uid;n.layout=t.data,n.layouts[s]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const s=e.layout;n.layout=No(Wt({},s),{contentType:Wt({uid:s.contentType.uid},t.newLayout.contentType)}),n.layouts[s.contentType.uid]=No(Wt({},s),{contentType:Wt({uid:s.contentType.uid},t.newLayout.contentType)});break}default:return n}});var Cn=p(12463),Pu=p(34947);const Rt=()=>e=>e["content-manager_app"]||Pu.E,rO=()=>createSelector(Rt(),e=>e),oO=()=>createSelector(Rt(),e=>e.models),Ru=()=>(0,Cn.P1)(Rt(),e=>({collectionTypeLinks:e.collectionTypeLinks,singleTypeLinks:e.singleTypeLinks})),On=()=>(0,Cn.P1)(Rt(),({components:e,models:t})=>({schemas:[...e,...t]})),sO=null;var Mu=p(98399),Tu=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const Vo=e=>{const[{error:t,isLoading:n,layout:s,layouts:a},l]=(0,r.useReducer)(Ou,Cu),i=(0,r.useMemo)(On,[]),{schemas:u}=(0,fe.useSelector)(f=>i(f),fe.shallowEqual),c=(0,r.useRef)(!0),d=(0,r.useCallback)((f,g)=>Tu(void 0,null,function*(){if(a[f]){l({type:"SET_LAYOUT_FROM_STATE",uid:f});return}l({type:"GET_DATA"});try{const h=ve(`content-types/${f}/configuration`),{data:{data:E}}=yield ge.be.get(h,{cancelToken:g.token});l({type:"GET_DATA_SUCCEEDED",data:jo(E,u)})}catch(h){if(Se().isCancel(h))return;c.current&&Mu.error(h),c.current&&l({type:"GET_DATA_ERROR",error:h})}}),[a,u]);(0,r.useEffect)(()=>()=>{c.current=!1},[]),(0,r.useEffect)(()=>{const g=Se().CancelToken.source();return d(e,g),()=>{g.cancel("Operation canceled by the user.")}},[e,d]);const m=(0,r.useCallback)(f=>{l({type:"UPDATE_LAYOUT",newLayout:jo(f,u)})},[u]);return{error:t,isLoading:n,layout:s,updateLayout:m}},wu=e=>e["content-manager_app"].collectionTypeLinks;var Ne=p(77997),Iu=p(33795),R=p.n(Iu),Du=p(85973),qo=p.n(Du),xu=Object.defineProperty,Su=Object.defineProperties,Lu=Object.getOwnPropertyDescriptors,Wo=Object.getOwnPropertySymbols,Fu=Object.prototype.hasOwnProperty,ku=Object.prototype.propertyIsEnumerable,zo=(e,t,n)=>t in e?xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Au=(e,t)=>{for(var n in t||(t={}))Fu.call(t,n)&&zo(e,n,t[n]);if(Wo)for(var n of Wo(t))ku.call(t,n)&&zo(e,n,t[n]);return e},ju=(e,t)=>Su(e,Lu(t));const Uo=(e,t)=>Object.keys(e).reduce((n,s)=>{const a=e[s],l=R()(t,[s],a);return qo()(a)?ju(Au({},n),{[s]:Uo(a,l)}):(n[s]=l,n)},{}),$u=(e,t,n)=>{const s=e.find(({to:m})=>m.includes(t));if(!s)return"/";const{to:a,search:l}=s,i=(0,Ne.parse)(l),u=(0,Ne.parse)(n.substring(1)),c=Uo(i,u);return`${a}?${(0,Ne.stringify)(c,{encode:!1})}`},Ho=e=>{const[{rawQuery:t}]=(0,y.useQueryParams)(),n=(0,fe.useSelector)(wu);return $u(n,e,t)},Ge=()=>(0,r.useContext)(At),Go=()=>{const{search:e}=(0,ee.useLocation)(),t=e?(0,Ne.parse)(e.substring(1)):{};return t.plugins?(0,Ne.stringify)({plugins:t.plugins},{encode:!1}):""};var Zo=p(89334);const Bu=(e,t,n)=>({type:Zo.m,permissions:e,__meta__:{plugins:t,containerName:n}}),Nu=()=>({type:Zo.Q}),Vu=e=>e["content-manager_rbacManager"].permissions,qu=e=>e.rbacProvider.collectionTypesRelatedPermissions,_o=(e,t,n="listView")=>{const s=(0,fe.useSelector)(qu),a=(0,fe.useSelector)(Vu),l=(0,fe.useDispatch)(),i=s[t];return(0,r.useEffect)(()=>i?(l(Bu(i,e?e.plugins:null,n)),()=>{l(Nu())}):()=>{},[i,l,e,n]),a},mO=()=>useContext(WysiwygContext),fO=null;var zt=p(70836),Qo=p(4460);const Wu=()=>({type:Qo.c}),zu=(e,t)=>({type:Qo.O,layout:e,query:t});var Uu=p(8266),We=p.n(Uu),Ut=p(27635),ie=p(78330),Hu=p(70404),Gu=p.n(Hu),Zu=p(66694);const _u=()=>(0,r.useContext)(Zu.ux),Ko=e=>{const{getAdminInjectedComponents:t}=_u(),[n,s,a]=e.split(".");return t(n,s,a)};var Qu=Object.defineProperty,Ht=Object.getOwnPropertySymbols,Yo=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,Xo=(e,t,n)=>t in e?Qu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ku=(e,t)=>{for(var n in t||(t={}))Yo.call(t,n)&&Xo(e,n,t[n]);if(Ht)for(var n of Ht(t))Jo.call(t,n)&&Xo(e,n,t[n]);return e},Yu=(e,t)=>{var n={};for(var s in e)Yo.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Ht)for(var s of Ht(e))t.indexOf(s)<0&&Jo.call(e,s)&&(n[s]=e[s]);return n};const es=e=>{var t=e,{area:n}=t,s=Yu(t,["area"]);return Ko(n).map(l=>r.createElement(l.Component,Ku({key:l.name},s)))};es.propTypes={area:o().string.isRequired};const Gt=es;var Ju=Object.defineProperty,ts=Object.getOwnPropertySymbols,Xu=Object.prototype.hasOwnProperty,ed=Object.prototype.propertyIsEnumerable,ns=(e,t,n)=>t in e?Ju(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rs=(e,t)=>{for(var n in t||(t={}))Xu.call(t,n)&&ns(e,n,t[n]);if(ts)for(var n of ts(t))ed.call(t,n)&&ns(e,n,t[n]);return e};function td(e,t){return function(n){const s=t(n.name);return r.createElement(e,rs(rs({},n),s))}}const nd=td;function rd(e){const{addComponentToDynamicZone:t,createActionAllowedFields:n,isCreatingEntry:s,formErrors:a,modifiedData:l,moveComponentUp:i,moveComponentDown:u,removeComponentFromDynamicZone:c,readActionAllowedFields:d,updateActionAllowedFields:m}=(0,y.useCMEditViewDataManager)(),f=(0,r.useMemo)(()=>{const b=Array.isArray(e)?[e]:e;return(0,B.get)(l,b,[]).map(O=>O.__component)},[l,e]),g=(b,O)=>Array.isArray(O)?b.includes(O[0]):b.includes(O),h=(0,r.useMemo)(()=>g(s?n:m,e.split(".")),[e,s,n,m]),E=(0,r.useMemo)(()=>g(s?[]:d,e.split(".")),[e,s,d]);return{addComponentToDynamicZone:t,formErrors:a,isCreatingEntry:s,isFieldAllowed:h,isFieldReadable:E,moveComponentUp:i,moveComponentDown:u,removeComponentFromDynamicZone:c,dynamicDisplayedComponents:f}}const od=rd;var sd=p(51542),os=p.n(sd),Pn=p(98195);const Rn=(0,k.default)(os())`
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,ad=(0,k.default)(Pn.BaseButton)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
  padding-top: ${({theme:e})=>e.spaces[3]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[4]};

  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${Rn} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${Rn} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,id=(0,k.default)(D.Box)`
  height: 100%;
`,Mn=({hasError:e,hasMaxError:t,hasMinError:n,isDisabled:s,isOpen:a,label:l,missingComponentNumber:i,name:u,onClick:c})=>{const{formatMessage:d}=(0,A.useIntl)(),m=d({id:v("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:l||u}),f=d({id:"app.utils.close-label",defaultMessage:"Close"});let g=a?f:m;return t&&!a&&(g=d({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."})),n&&!a&&(g=d({id:v("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:i})),r.createElement(r.Fragment,null,r.createElement(j.Flex,{justifyContent:"center"},r.createElement(D.Box,{style:{cursor:s?"not-allowed":"pointer"}},r.createElement(ad,{type:"button",onClick:c,disabled:s,hasError:e},r.createElement(j.Flex,null,r.createElement(id,{"aria-hidden":!0,paddingRight:2},r.createElement(Rn,{$isOpen:a,$hasError:e&&!a})),r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:e&&!a?"danger600":"neutral500"},g))))))};Mn.defaultProps={label:"",missingComponentNumber:0},Mn.propTypes={label:o().string,hasError:o().bool.isRequired,hasMaxError:o().bool.isRequired,hasMinError:o().bool.isRequired,isDisabled:o().bool.isRequired,isOpen:o().bool.isRequired,missingComponentNumber:o().number,name:o().string.isRequired,onClick:o().func.isRequired};const ld=Mn,cd=(0,k.default)(D.Box)`
  border-radius: ${(0,y.pxToRem)(26)};
`,Tn=({label:e,labelAction:t,name:n,numberOfComponents:s,required:a,intlDescription:l})=>{const{formatMessage:i}=(0,A.useIntl)(),u=i({id:e||n,defaultMessage:e||n});return r.createElement(j.Flex,{justifyContent:"center"},r.createElement(D.Box,null,r.createElement(cd,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,background:"neutral0",shadow:"filterShadow",color:"neutral500"},r.createElement(j.Flex,{direction:"column",justifyContent:"center"},r.createElement(j.Flex,{maxWidth:(0,y.pxToRem)(356)},r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0},u,"\xA0"),r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold"},"(",s,")"),a&&r.createElement(L.Typography,{textColor:"danger600"},"*"),t&&r.createElement(D.Box,{paddingLeft:1},t)),l&&r.createElement(D.Box,{paddingTop:1,maxWidth:(0,y.pxToRem)(356)},r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",ellipsis:!0},i(l)))))))};Tn.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,required:!1},Tn.propTypes={intlDescription:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),label:o().string,labelAction:o().element,name:o().string.isRequired,numberOfComponents:o().number.isRequired,required:o().bool};const ud=Tn;var wn=p(16925),ze=p(12001),In=p(54742),dd=p(78325),pd=p.n(dd),md=p(30857),fd=p.n(md),gd=p(61868),yd=p.n(gd),hd=Object.defineProperty,ss=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,Ed=Object.prototype.propertyIsEnumerable,as=(e,t,n)=>t in e?hd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vd=(e,t)=>{for(var n in t||(t={}))bd.call(t,n)&&as(e,n,t[n]);if(ss)for(var n of ss(t))Ed.call(t,n)&&as(e,n,t[n]);return e};const Cd=k.default.span`
  > svg {
    width: ${(0,y.pxToRem)(24)};
    height: ${(0,y.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Dn=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:s}=(0,A.useIntl)();return r.createElement(r.Fragment,null,r.createElement(D.Box,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button"},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"}},r.createElement(Cd,null,r.createElement(os(),null))),r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{textColor:"primary600",variant:"pi",fontWeight:"bold"},s({id:v("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."}))))),(e==null?void 0:e.id)&&r.createElement(L.Typography,{textColor:"danger600",variant:"pi"},s({id:e.id,defaultMessage:e.id},vd({},e.values))))};Dn.defaultProps={error:void 0,isReadOnly:!1},Dn.propTypes={error:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),isReadOnly:o().bool,onClick:o().func.isRequired};const is=Dn;var Od=p(9086),Pd=p.n(Od),Rd=p(88708),Zt=p.n(Rd),Md=p(27509),_t=p.n(Md),hO=p(40795),Td=p(88591),wd=p.n(Td),xn=p(59845),Id=p(20871),Dd=p.n(Id),xd=p(48375),ls=p.n(xd),Sd=p(31089),Ld=p.n(Sd),Fd=p(16043),kd=p.n(Fd),Ad=p(5109),jd=p.n(Ad),$d=p(47955),Bd=p.n($d),Nd=p(95706),Vd=p.n(Nd),qd=p(6658),Wd=p.n(qd),zd=p(36407),Ud=p.n(zd),Hd=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});(()=>Hd(void 0,null,function*(){yield p.e(7347).then(p.bind(p,74194))}))();const ct=new(wd())({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight:(e,t)=>{if(t&&t!=="auto"&&(0,xn.getLanguage)(t))return'<pre class="hljs language-'+ct.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,xn.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,xn.highlightAuto)(e);return'<pre class="hljs language-'+ct.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+ct.utils.escapeHtml(e)+"</code></pre>"}}).use(Dd()).use(ls(),"warning").use(ls(),"tip").use(Ld()).use(kd()).use(jd()).use(Bd()).use(Vd()).use(Wd()).use(Ud());ct.renderer.rules.footnote_ref=(e,t,n,s,a)=>{const l=a.rules.footnote_caption(e,t,n,s,a);return'<sup class="footnote-ref"><span>'+l+"</span></sup>"},ct.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const Gd=ct;var Zd=p(13993),cs=p.n(Zd),_d=Object.defineProperty,Qd=Object.defineProperties,Kd=Object.getOwnPropertyDescriptors,us=Object.getOwnPropertySymbols,Yd=Object.prototype.hasOwnProperty,Jd=Object.prototype.propertyIsEnumerable,ds=(e,t,n)=>t in e?_d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xd=(e,t)=>{for(var n in t||(t={}))Yd.call(t,n)&&ds(e,n,t[n]);if(us)for(var n of us(t))Jd.call(t,n)&&ds(e,n,t[n]);return e},ep=(e,t)=>Qd(e,Kd(t));const tp=ep(Xd({},cs().defaults),{allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}}),np=e=>cs()(e,tp),rp=k.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  z-index: 2;
  cursor: not-allowed;
  color: ${({theme:e})=>e.colors.neutral800};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: 10px;
    margin-block-end: 10px;
  }

  p {
    margin-bottom: 10px;
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: 41px;
    margin-bottom: 34px;
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 5px solid #eee;
    font-style: italic;
    padding: 10px 20px;
  }

  img {
    max-width: 100%;
  }

  table {
    thead {
      background: ${({theme:e})=>e.colors.neutral150};

      th {
        padding: ${({theme:e})=>e.spaces[4]};
      }
    }
    tr {
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    th,
    td {
      padding: ${({theme:e})=>e.spaces[4]};
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 0;
      border-top: 0;
    }
  }

  pre,
  code {
    font-size: 13px;
    border-radius: 3px;
    background-color: #002b36;
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  .warning {
    background-color: #faa684;
    padding: 30px;
    border-radius: 3px;
  }
  .tip {
    padding: 30px;
    border-radius: 3px;
  }

  .footnote-ref,
  .footnote-backref {
    color: #007bff;
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,Sn=({data:e})=>{const t=(0,r.useMemo)(()=>np(Gd.render(e||"")),[e]);return r.createElement(rp,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))};Sn.defaultProps={data:""},Sn.propTypes={data:o().string};const ps=(0,r.memo)(Sn),op=k.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"290px"};
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`,Le=(0,k.default)(Me.IconButton)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,sp=(0,k.default)(Le)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,ms=(0,k.default)(Me.IconButtonGroup)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,fs=(0,k.default)(Me.IconButton)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,ap=(0,k.default)(Me.IconButtonGroup)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,ip=k.default.div`
  position: relative;
  height: calc(100% - 48px);
`,lp=(0,k.default)(Pn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`;var Qt=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,cp=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,up=/[*+-]\s/;function dp(e){if(e.getOption("disableInput"))return _t().Pass;for(var t=e.listSelections(),n=[],s=0;s<t.length;s++){var a=t[s].head,l=e.getStateAfter(a.line),i=l.list!==!1,u=l.quote!==0,c=e.getLine(a.line),d=Qt.exec(c),m=/^\s*$/.test(c.slice(0,a.ch));if(!t[s].empty()||!i&&!u||!d||m){e.execCommand("newlineAndIndent");return}if(cp.test(c)){var f=u&&/>\s*$/.test(c),g=!/>\s*$/.test(c);(f||g)&&e.replaceRange("",{line:a.line,ch:0},{line:a.line,ch:a.ch+1}),n[s]=`
`}else{var h=d[1],E=d[5],b=!(up.test(d[2])||d[2].indexOf(">")>=0),O=b?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[s]=`
`+h+O+E,b&&pp(e,a)}}e.replaceSelections(n)}function pp(e,t){var n=t.line,s=0,a=0,l=Qt.exec(e.getLine(n)),i=l[1];do{s+=1;var u=n+s,c=e.getLine(u),d=Qt.exec(c);if(d){var m=d[1],f=parseInt(l[3],10)+s-a,g=parseInt(d[3],10),h=g;if(i===m&&!isNaN(g))f===g&&(h=g+1),f>g&&(h=f+1),e.replaceRange(c.replace(Qt,m+h+d[4]+d[5]),{line:u,ch:0},{line:u,ch:c.length});else{if(i.length>m.length||i.length<m.length&&s===1)return;a+=1}}}while(d)}const mp=dp,Ln=({disabled:e,editorRef:t,error:n,isPreviewMode:s,isExpandMode:a,name:l,onChange:i,placeholder:u,textareaRef:c,value:d})=>{const m=(0,r.useRef)(i);return(0,r.useEffect)(()=>{t.current=_t().fromTextArea(c.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:u,spellcheck:!0,inputStyle:"contenteditable"}),_t().commands.newlineAndIndentContinueMarkdownList=mp,t.current.on("change",f=>{m.current({target:{name:l,value:f.getValue(),type:"wysiwyg"}})})},[t,c,l,u]),(0,r.useEffect)(()=>{d&&!t.current.state.focused&&t.current.setValue(d)},[t,d]),(0,r.useEffect)(()=>{s||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,s,t]),(0,r.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),r.createElement(ip,null,r.createElement(op,{isExpandMode:a,disabled:e||s},r.createElement("textarea",{ref:c})),s&&r.createElement(ps,{data:d}))};Ln.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},Ln.propTypes={disabled:o().bool,editorRef:o().shape({current:o().any}).isRequired,error:o().string,isPreviewMode:o().bool,isExpandMode:o().bool,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().string,textareaRef:o().shape({current:o().any}).isRequired,value:o().string};const fp=Ln;var ye=p(44526),ue=p(25716),gp=p(37853),yp=p(19882),gs=p.n(yp),hp=p(61980),ys=p.n(hp),bp=p(70052),hs=p.n(bp),Ep=p(15053),vp=p.n(Ep),Cp=p(18767),Op=p.n(Cp),Pp=p(83358),Rp=p.n(Pp),Mp=p(69822),Tp=p.n(Mp),wp=p(88467),Ip=p.n(wp),Dp=p(83262),xp=p.n(Dp),Sp=p(49157),Lp=p.n(Sp),Fp=p(75400),bs=p.n(Fp);const Fn=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:s,onActionClick:a,onToggleMediaLib:l,onTogglePreviewMode:i})=>{const[u,c]=(0,r.useState)(!1),{formatMessage:d}=(0,A.useIntl)(),m=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),f=(0,r.useRef)(),g=()=>{c(h=>!h)};return e||s?r.createElement(D.Box,{padding:2,background:"neutral100"},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(ue.Select,{disabled:!0,id:"selectTitle",placeholder:m,size:"S","aria-label":m},r.createElement(ue.Option,{value:"h1"},"h1"),r.createElement(ue.Option,{value:"h2"},"h2"),r.createElement(ue.Option,{value:"h3"},"h3"),r.createElement(ue.Option,{value:"h4"},"h4"),r.createElement(ue.Option,{value:"h5"},"h5"),r.createElement(ue.Option,{value:"h6"},"h6")),r.createElement(ms,null,r.createElement(Le,{disabled:!0,id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(gs(),null)}),r.createElement(Le,{disabled:!0,id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(ys(),null)}),r.createElement(Le,{disabled:!0,id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(hs(),null)})),r.createElement(fs,{disabled:!0,id:"more",label:"More",icon:r.createElement(bs(),null)})),!n&&r.createElement(ye.Button,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})))):r.createElement(D.Box,{padding:2,background:"neutral100"},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(ue.Select,{id:"selectTitle",placeholder:m,size:"S",onChange:h=>a(h,t)},r.createElement(ue.Option,{value:"h1"},"h1"),r.createElement(ue.Option,{value:"h2"},"h2"),r.createElement(ue.Option,{value:"h3"},"h3"),r.createElement(ue.Option,{value:"h4"},"h4"),r.createElement(ue.Option,{value:"h5"},"h5"),r.createElement(ue.Option,{value:"h6"},"h6")),r.createElement(ms,null,r.createElement(Le,{onClick:()=>a("Bold",t),id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(gs(),null)}),r.createElement(Le,{onClick:()=>a("Italic",t),id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(ys(),null)}),r.createElement(Le,{onClick:()=>a("Underline",t),id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(hs(),null)})),r.createElement(fs,{ref:f,onClick:g,id:"more",label:"More",icon:r.createElement(bs(),null)}),u&&r.createElement(gp.Popover,{centered:!0,source:f,spacing:4,id:"popover"},r.createElement(In.FocusTrap,{onEscape:g,restoreFocus:!1},r.createElement(j.Flex,null,r.createElement(ap,null,r.createElement(Le,{onClick:()=>a("Strikethrough",t,g),id:"Strikethrough",label:"Strikethrough",name:"Strikethrough",icon:r.createElement(vp(),null)}),r.createElement(Le,{onClick:()=>a("BulletList",t,g),id:"BulletList",label:"BulletList",name:"BulletList",icon:r.createElement(Op(),null)}),r.createElement(Le,{onClick:()=>a("NumberList",t,g),id:"NumberList",label:"NumberList",name:"NumberList",icon:r.createElement(Rp(),null)})),r.createElement(Me.IconButtonGroup,null,r.createElement(Le,{onClick:()=>a("Code",t,g),id:"Code",label:"Code",name:"Code",icon:r.createElement(Tp(),null)}),r.createElement(Le,{onClick:()=>{g(),l()},id:"Image",label:"Image",name:"Image",icon:r.createElement(Ip(),null)}),r.createElement(sp,{onClick:()=>a("Link",t,g),id:"Link",label:"Link",name:"Link",icon:r.createElement(xp(),null)}),r.createElement(Le,{onClick:()=>a("Quote",t,g),id:"Quote",label:"Quote",name:"Quote",icon:r.createElement(Lp(),null)})))))),i&&r.createElement(ye.Button,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"}))))};Fn.defaultProps={isPreviewMode:!1,onActionClick:()=>{},onToggleMediaLib:()=>{},onTogglePreviewMode:void 0},Fn.propTypes={disabled:o().bool.isRequired,editorRef:o().shape({current:o().any}).isRequired,isExpandMode:o().bool.isRequired,isPreviewMode:o().bool,onActionClick:o().func,onToggleMediaLib:o().func,onTogglePreviewMode:o().func};const kp=Fn;var Ap=p(39766),jp=p.n(Ap);const kn=({onToggleExpand:e})=>{const{formatMessage:t}=(0,A.useIntl)();return r.createElement(D.Box,{padding:2,background:"neutral100",hasRadius:!0},r.createElement(j.Flex,{justifyContent:"flex-end",alignItems:"flex-end"},r.createElement(lp,{id:"expand",onClick:e},r.createElement(L.Typography,null,t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})),r.createElement(jp(),null))))};kn.defaultProps={onToggleExpand:()=>{}},kn.propTypes={onToggleExpand:o().func};const $p=kn;var Bp=Object.defineProperty,Es=Object.getOwnPropertySymbols,Np=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,vs=(e,t,n)=>t in e?Bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qp=(e,t)=>{for(var n in t||(t={}))Np.call(t,n)&&vs(e,n,t[n]);if(Es)for(var n of Es(t))Vp.call(t,n)&&vs(e,n,t[n]);return e};const An=({id:e,error:t,name:n,description:s})=>{const{formatMessage:a}=(0,A.useIntl)(),l=s?a({id:s.id,defaultMessage:s.defaultMessage},qp({},s.values)):"";return!l||t?null:r.createElement(L.Typography,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600"},l)};An.defaultProps={id:void 0,description:void 0,error:void 0},An.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),error:o().string,id:o().string,name:o().string.isRequired};const Wp=An,Cs=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},Os=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},Ps=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},Rs=(e,t)=>{const n=e.current.getSelection();let s;if(n){const a=Cs(t,n);e.current.replaceSelection(a),e.current.focus()}else{s=Os(t),e.current.replaceSelection(s.editedText),e.current.focus();const{line:a,ch:l}=e.current.getCursor(),i=l-s.selection.end,u=l-s.selection.end-s.selection.start;e.current.setSelection({line:a,ch:u},{line:a,ch:i})}},zp=(e,t)=>{const n=e.current.getDoc(),s=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const a=n.listSelections();let l=null;e.current.operation(function(){a.forEach(function(i){const u=[i.head.line,i.anchor.line].sort();l==null&&(l=n.getLine(u[0]).startsWith(s));for(let c=u[0];c<=u[1];c++)if(l)n.getLine(c).startsWith(s)&&n.replaceRange("",{line:c,ch:0},{line:c,ch:s.length});else{const d=t==="BulletList"?"- ":`${c+1}. `;n.replaceRange(d,{line:c,ch:0})}})})}else{let{line:a}=n.getCursor();const l=Ps(t),i=e.current.getLine(a),u=l+i;e.current.setSelection({line:a,ch:0},{line:a,ch:i.length}),e.current.replaceSelection(u)}e.current.focus()},Up=(e,t)=>{let{line:n}=e.current.getCursor();const s=Ps(t),a=e.current.getLine(n),l=a.replace(/#{1,6}\s/g,"").trim(),i=s+l;e.current.setSelection({line:n,ch:0},{line:n,ch:a.length}),e.current.replaceSelection(i),setTimeout(()=>{const u=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:u})},0)},Hp=(e,t)=>{let{line:n,ch:s}=e.current.getCursor();t.forEach((a,l)=>{let i=e.current.getLine(n).length;e.current.setCursor({line:n,ch:i}),(l>0||l===0&&s!==0)&&(i=e.current.getLine(n).length,e.current.setCursor({line:n,ch:i}),n++,e.current.replaceSelection(`
`)),a.mime.includes("image")?e.current.replaceSelection(`![${a.alt}](${a.url})`):e.current.replaceSelection(`[${a.alt}](${a.url})`)}),setTimeout(()=>e.current.focus(),0)},Gp=(e,t,n,s,a)=>{const l=Cs(t,a),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:s}),e.current.replaceSelection(`
`),e.current.replaceSelection(l),t==="Code"){let{line:u}=e.current.getCursor();e.current.setCursor({line:u-1,ch:a.length})}e.current.replaceRange(i,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Zp=(e,t,n,s)=>{const a=Os(t),l=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:s}),e.current.replaceSelection(`
`),e.current.replaceSelection(a.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:i}=e.current.getCursor(),u=i-a.selection.end,c=i-a.selection.end-a.selection.start;e.current.setSelection({line:n,ch:c},{line:n,ch:u})}e.current.replaceRange(l,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},_p=(e,t)=>{const n=e.current.getSelection();let{line:s}=e.current.getCursor(),a=e.current.getLine(s).length;n?Gp(e,t,s,a,n):Zp(e,t,s,a)};var Qp=p(64410),Kp=p(43768),Yp=p.n(Kp);const Jp=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,Xp=(0,k.default)(j.Flex)`
  background: ${({theme:e})=>Jp(e.colors.neutral800,.2)};
`,em=(0,k.default)(D.Box)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,tm=(0,k.default)(Pn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,jn=({children:e,isExpandMode:t,error:n,previewContent:s,onCollapse:a})=>{const{formatMessage:l}=(0,A.useIntl)();return(0,r.useEffect)(()=>{const i=document.body;return t&&i.classList.add("lock-body-scroll"),()=>{t&&i.classList.remove("lock-body-scroll")}},[t]),t?r.createElement(Qp.Portal,{role:"dialog","aria-modal":!1},r.createElement(In.FocusTrap,{onEscape:a},r.createElement(Xp,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:a},r.createElement(D.Box,{id:"wysiwyg-expand",background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"70%",height:"70%",onClick:i=>i.stopPropagation()},r.createElement(j.Flex,{height:"100%",alignItems:"flex-start"},r.createElement(em,{flex:"1",height:"100%"},e),r.createElement(D.Box,{flex:"1",height:"100%"},r.createElement(j.Flex,{height:(0,y.pxToRem)(48),background:"neutral100",justifyContent:"flex-end"},r.createElement(tm,{id:"collapse",onClick:a},r.createElement(L.Typography,null,l({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})),r.createElement(Yp(),null))),r.createElement(D.Box,{position:"relative",height:"100%"},r.createElement(ps,{data:s})))))))):r.createElement(D.Box,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0},e)};jn.defaultProps={error:void 0,previewContent:""},jn.propTypes={children:o().node.isRequired,error:o().string,isExpandMode:o().bool.isRequired,previewContent:o().string,onCollapse:o().func.isRequired};var nm=Object.defineProperty,Ms=Object.getOwnPropertySymbols,rm=Object.prototype.hasOwnProperty,om=Object.prototype.propertyIsEnumerable,Ts=(e,t,n)=>t in e?nm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ws=(e,t)=>{for(var n in t||(t={}))rm.call(t,n)&&Ts(e,n,t[n]);if(Ms)for(var n of Ms(t))om.call(t,n)&&Ts(e,n,t[n]);return e};const sm=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,am=(0,k.default)(L.Typography)`
  line-height: 0;
`,$n=({description:e,disabled:t,error:n,intlLabel:s,labelAction:a,name:l,onChange:i,placeholder:u,value:c,required:d})=>{const{formatMessage:m}=(0,A.useIntl)(),f=(0,r.useRef)(null),g=(0,r.useRef)(null),[h,E]=(0,r.useState)(!1),[b,O]=(0,r.useState)(!1),[x,C]=(0,r.useState)(!1),{components:S}=(0,y.useLibrary)(),I=S["media-library"],V=()=>O(F=>!F),w=()=>E(F=>!F),W=()=>{E(!1),C(F=>!F)},H=(F,Z,$)=>{switch(F){case"Link":case"Strikethrough":{Rs(Z,F),$();break}case"Code":case"Quote":{_p(Z,F),$();break}case"Bold":case"Italic":case"Underline":{Rs(Z,F);break}case"BulletList":case"NumberList":{zp(Z,F),$();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{Up(Z,F);break}default:}},_=F=>{const Z=F.map($=>({alt:$.alternativeText||$.name,url:(0,y.prefixFileUrlWithBackendUrl)($.url),mime:$.mime}));Hp(g,Z),O(!1)},N=u?m({id:u.id,defaultMessage:u.defaultMessage},ws({},u.values)):"",G=s.id?m({id:s.id,defaultMessage:s.defaultMessage},ws({},s.values)):l;return r.createElement(r.Fragment,null,r.createElement(se.Stack,{spacing:1},r.createElement(se.Stack,{horizontal:!0,spacing:1},r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},G,d&&r.createElement(am,{textColor:"danger600"},"*")),a&&r.createElement(sm,{paddingLeft:1},a)),r.createElement(jn,{isExpandMode:x,error:n,previewContent:c,onCollapse:W},r.createElement(kp,{isExpandMode:x,editorRef:g,isPreviewMode:h,onActionClick:H,onToggleMediaLib:V,onTogglePreviewMode:x?void 0:w,disabled:t}),r.createElement(fp,{disabled:t,isExpandMode:x,editorRef:g,error:n,isPreviewMode:h,name:l,onChange:i,placeholder:N,textareaRef:f,value:c}),!x&&r.createElement($p,{onToggleExpand:W})),r.createElement(Wp,{description:e,name:l,error:n})),n&&r.createElement(D.Box,{paddingTop:1},r.createElement(L.Typography,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0},n)),b&&r.createElement(I,{onClose:V,onSelectAssets:_}))};$n.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:""},$n.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),required:o().bool,value:o().string};const im=$n;var lm=p(16285),cm=p.n(lm),Mt=p(20001),um=p(37475);const dm=k.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  /* BASICS */

  .colored {
    background-color: yellow;
    color: black !important;
  }

  > div {
    border-radius: 3px;
    > div:last-of-type {
      min-height: 253px;
      max-height: 506px;
    }
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    direction: ltr;
    z-index: 0;
  }
`,pm=(0,k.default)(D.Box)`
  border-radius: ${({theme:e})=>e.borderRadius};
  border: 1px solid ${({theme:e,error:t})=>t?e.colors.danger600:"transparent"};
`;var mm=Object.defineProperty,Is=Object.getOwnPropertySymbols,fm=Object.prototype.hasOwnProperty,gm=Object.prototype.propertyIsEnumerable,Ds=(e,t,n)=>t in e?mm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ym=(e,t)=>{for(var n in t||(t={}))fm.call(t,n)&&Ds(e,n,t[n]);if(Is)for(var n of Is(t))gm.call(t,n)&&Ds(e,n,t[n]);return e};const hm=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Bn=({intlLabel:e,labelAction:t,name:n,required:s})=>{const{formatMessage:a}=(0,A.useIntl)(),l=e!=null&&e.id?a({id:e.id,defaultMessage:e.defaultMessage},ym({},e.values)):n;return r.createElement(j.Flex,null,r.createElement(Mt.FieldLabel,{required:s},l),t&&r.createElement(hm,{paddingLeft:1},t))};Bn.defaultProps={id:void 0,intlLabel:void 0,labelAction:void 0,required:!1},Bn.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,name:o().string.isRequired,required:o().bool};const bm=Bn,Nn=({name:e,hint:t,error:n,children:s})=>{const{formatMessage:a}=(0,A.useIntl)(),l=n?a({id:n,defaultMessage:n}):"";return r.createElement(Mt.Field,{name:e,hint:t&&a(t),error:l,id:e},s)};Nn.defaultProps={hint:void 0,error:""},Nn.propTypes={name:o().string.isRequired,hint:o().shape({id:o().string,defaultMessage:o().string}),error:o().string,children:o().node.isRequired};const Em=Nn;var vm=Object.defineProperty,Cm=(e,t,n)=>t in e?vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ue=(e,t,n)=>(Cm(e,typeof t!="symbol"?t+"":t,n),n),Om=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const Pm=600,Rm="blackboard";(()=>Om(void 0,null,function*(){yield p.e(3860).then(p.t.bind(p,87541,23)),yield p.e(2781).then(p.t.bind(p,80249,23)),yield p.e(953).then(p.t.bind(p,54745,23)),yield p.e(5178).then(p.t.bind(p,3903,23)),yield p.e(5509).then(p.t.bind(p,59577,23)),yield p.e(3973).then(p.bind(p,96863)),yield p.e(2218).then(p.bind(p,20145))}))();class Vn extends r.Component{constructor(t){super(t),Ue(this,"timer",null),Ue(this,"setInitValue",()=>{const{value:n}=this.props;try{return n===null?this.codeMirror.setValue(""):this.codeMirror.setValue(n)}catch(s){return this.setState({error:!0})}}),Ue(this,"setSize",()=>this.codeMirror.setSize("100%","auto")),Ue(this,"getContentAtLine",n=>this.codeMirror.getLine(n)),Ue(this,"getEditorOption",n=>this.codeMirror.getOption(n)),Ue(this,"getValue",()=>this.codeMirror.getValue()),Ue(this,"markSelection",({message:n})=>{let s=parseInt(n.split(":")[0].split("line ")[1],10)-1,a=this.getContentAtLine(s);a==="{"&&(s+=1,a=this.getContentAtLine(s));const l=a.length,i=l-cm()(a," ").length,u=this.codeMirror.markText({line:s,ch:i},{line:s,ch:l},{className:"colored"});this.setState({markedText:u})}),Ue(this,"handleChange",(n,s)=>{if(s.origin==="setValue")return;const{name:a,onChange:l}=this.props;let i=n.getValue();i===""&&(i=null),l({target:{name:a,value:i,type:"json"}}),this.state.markedText&&(this.state.markedText.clear(),this.setState({markedText:null,error:null})),clearTimeout(this.timer),this.timer=setTimeout(()=>this.testJSON(n.getValue()),Pm)}),Ue(this,"testJSON",n=>{try{um.parse(n)}catch(s){this.markSelection(s)}}),this.editor=r.createRef(),this.state={error:!1,markedText:null}}componentDidMount(){this.codeMirror=_t().fromTextArea(this.editor.current,{autoCloseBrackets:!0,lineNumbers:!0,matchBrackets:!0,mode:"application/json",readOnly:this.props.disabled,smartIndent:!0,styleSelectedText:!0,tabSize:2,theme:Rm,fontSize:"13px"}),this.codeMirror.on("change",this.handleChange),this.setSize(),this.setInitValue()}componentDidUpdate(t){t.value!==this.props.value&&!this.codeMirror.state.focused&&this.setInitValue()}render(){return this.state.error?r.createElement("div",null,"error json"):r.createElement(Em,{name:this.props.name,hint:this.props.description,error:this.props.error},r.createElement(se.Stack,{spacing:1},r.createElement(bm,{intlLabel:this.props.intlLabel,labelAction:this.props.labelAction,name:this.props.name,required:this.props.required}),r.createElement(pm,{error:this.props.error},r.createElement(dm,{disabled:this.props.disabled},r.createElement("textarea",{ref:this.editor,autoComplete:"off",id:this.props.id||this.props.name,defaultValue:""}))),r.createElement(Mt.FieldHint,null),r.createElement(Mt.FieldError,null)))}}Vn.defaultProps={description:null,disabled:!1,id:void 0,error:void 0,intlLabel:void 0,labelAction:void 0,onChange:()=>{},value:null,required:!1},Vn.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,name:o().string.isRequired,onChange:o().func,value:o().any,required:o().bool};const Mm=Vn;var qn=p(37178),Tm=p(23101),wm=p.n(Tm),Im=p(14356),Dm=p.n(Im),xm=p(50678),Tt=p.n(xm),Sm=p(103),Lm=p.n(Sm);const xs=(e,t)=>{const[n,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),n},Fm=new RegExp(/^[A-Za-z0-9-_.~]*$/),km=(0,k.default)(D.Box)`
  position: relative;
`,Am=(0,k.default)(Mt.FieldAction)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Wn=(0,k.default)(j.Flex)`
  position: absolute;
  right: ${({theme:e})=>e.spaces[6]};
  width: 100px;
  pointer-events: none;

  svg {
    margin-right: ${({theme:e})=>e.spaces[1]};
    height: ${12/16}rem;
    width: ${12/16}rem;
    path {
      fill: ${({theme:e,notAvailable:t})=>t?e.colors.danger600:e.colors.success600};
    }
  }
`,jm=k.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,$m=(0,k.default)(j.Flex)`
  animation: ${jm} 2s infinite linear;
`;var Bm=Object.defineProperty,Ss=Object.getOwnPropertySymbols,Nm=Object.prototype.hasOwnProperty,Vm=Object.prototype.propertyIsEnumerable,Ls=(e,t,n)=>t in e?Bm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zn=(e,t)=>{for(var n in t||(t={}))Nm.call(t,n)&&Ls(e,n,t[n]);if(Ss)for(var n of Ss(t))Vm.call(t,n)&&Ls(e,n,t[n]);return e},Fs=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const Un=({attribute:e,contentTypeUID:t,description:n,disabled:s,error:a,intlLabel:l,labelAction:i,name:u,onChange:c,value:d,placeholder:m,required:f})=>{const{modifiedData:g,initialData:h,layout:E}=(0,y.useCMEditViewDataManager)(),[b,O]=(0,r.useState)(!1),[x,C]=(0,r.useState)(null),S=xs(d,300),I=(0,r.useRef)(),V=h[u],{formatMessage:w}=(0,A.useIntl)(),W=R()(E,["options","timestamps",0]),H=!h[W],_=xs(g[e.targetField],300),[N,G]=(0,r.useState)(!1),[F,Z]=(0,r.useState)(null),$=l.id?w({id:l.id,defaultMessage:l.defaultMessage},zn({},l.values)):u,Y=n?w({id:n.id,defaultMessage:n.defaultMessage},zn({},n.values)):"",T=m?w({id:m.id,defaultMessage:m.defaultMessage},zn({},m.values)):"";I.current=(P=!1)=>Fs(void 0,null,function*(){O(!0);const Q=ve("uid/generate");try{const{data:{data:re}}=yield ge.be.post(Q,{contentTypeUID:t,field:u,data:g});c({target:{name:u,value:re,type:"text"}},P),O(!1)}catch(re){O(!1)}});const q=()=>Fs(void 0,null,function*(){O(!0);const P=ve("uid/check-availability");if(!!d)try{const{data:Q}=yield ge.be.post(P,{contentTypeUID:t,field:u,value:d?d.trim():""});C(Q),O(!1)}catch(Q){O(!1)}});(0,r.useEffect)(()=>{!d&&e.required&&I.current(!0)},[]),(0,r.useEffect)(()=>{S&&S.trim().match(Fm)&&S!==V&&q(),S||C(null)},[S,V]),(0,r.useEffect)(()=>{let P;return x&&x.isAvailable&&(P=setTimeout(()=>{C(null)},4e3)),()=>{P&&clearTimeout(P)}},[x]),(0,r.useEffect)(()=>{!N&&H&&_&&g[e.targetField]&&!d&&I.current(!0)},[_,N,H]);const K=()=>{Z(w({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}))},U=()=>{Z(null)},M=P=>{P.target.value&&H&&G(!0),c(P)};return r.createElement(qn.TextInput,{disabled:s,error:a,endAction:r.createElement(km,null,x&&x.isAvailable&&!F&&r.createElement(Wn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(Dm(),null),r.createElement(L.Typography,{textColor:"success600",variant:"pi"},w({id:"content-manager.components.uid.available",defaultMessage:"Available"}))),x&&!x.isAvailable&&!F&&r.createElement(Wn,{notAvailable:!0,alignItems:"center",justifyContent:"flex-end"},r.createElement(Tt(),null),r.createElement(L.Typography,{textColor:"danger600",variant:"pi"},w({id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"}))),F&&r.createElement(Wn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(L.Typography,{textColor:"primary600",variant:"pi"},F)),r.createElement(Am,{onClick:()=>I.current(),label:"regenerate",onMouseEnter:K,onMouseLeave:U},b?r.createElement($m,null,r.createElement(Lm(),null)):r.createElement(wm(),null))),hint:Y,label:$,labelAction:i,name:u,onChange:M,placeholder:T,value:d||"",required:f})};Un.propTypes={attribute:o().shape({targetField:o().string,required:o().bool}).isRequired,contentTypeUID:o().string.isRequired,description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,onChange:o().func.isRequired,value:o().string,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),required:o().bool},Un.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1};const qm=Un;var Wm=p(28611),zm=p.n(Wm),Um=p(77236),ks=p.n(Um),Hm=p(86834),Re=p.n(Hm),Gm=p(3040),ne=p.n(Gm);const Zm=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Hn=({intlLabel:e,id:t,labelAction:n,link:s,name:a,numberOfEntries:l,isSingle:i})=>{const{formatMessage:u}=(0,A.useIntl)(),c=e!=null&&e.id?u(e):a;return r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(L.Typography,{textColor:"neutral800",htmlFor:t||a,variant:"pi",fontWeight:"bold",as:"label"},c,!i&&r.createElement(r.Fragment,null,"\xA0(",l,")")),n&&r.createElement(Zm,{paddingLeft:1},n)),s)};Hn.defaultProps={id:void 0,labelAction:void 0,link:null,numberOfEntries:0},Hn.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,isSingle:o().bool.isRequired,labelAction:o().element,link:o().element,name:o().string.isRequired,numberOfEntries:o().number};const _m=Hn;var Qm=p(7787),Km=p.n(Qm),Gn=p(82576),Ym=p(23973),As=p.n(Ym),Jm=Object.defineProperty,js=Object.getOwnPropertySymbols,Xm=Object.prototype.hasOwnProperty,ef=Object.prototype.propertyIsEnumerable,$s=(e,t,n)=>t in e?Jm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bs=(e,t)=>{for(var n in t||(t={}))Xm.call(t,n)&&$s(e,n,t[n]);if(js)for(var n of js(t))ef.call(t,n)&&$s(e,n,t[n]);return e};const tf=k.default.div`
  flex-shrink: 0;
  width: ${(0,y.pxToRem)(6)};
  height: ${(0,y.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`,Ns=e=>{const{formatMessage:t}=(0,A.useIntl)(),n=Gn.components.SingleValue,s=As()(R()(e,"data.value"),"publishedAt"),a=Re()(R()(e,"data.value.publishedAt"));if(s){const l={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},i={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},u=t(a?l:i);return r.createElement(n,Bs({},e),r.createElement(j.Flex,null,r.createElement(tf,{title:u,isDraft:a}),r.createElement(L.Typography,{ellipsis:!0},e.data.label||"-")))}return r.createElement(n,Bs({},e),e.data.label||"-")};Ns.propTypes={data:o().object.isRequired,selectProps:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired}).isRequired};const nf=Ns;var rf=Object.defineProperty,of=Object.defineProperties,sf=Object.getOwnPropertyDescriptors,Vs=Object.getOwnPropertySymbols,af=Object.prototype.hasOwnProperty,lf=Object.prototype.propertyIsEnumerable,qs=(e,t,n)=>t in e?rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cf=(e,t)=>{for(var n in t||(t={}))af.call(t,n)&&qs(e,n,t[n]);if(Vs)for(var n of Vs(t))lf.call(t,n)&&qs(e,n,t[n]);return e},uf=(e,t)=>of(e,sf(t));function Zn({components:e,mainField:t,name:n,isDisabled:s,isLoading:a,onChange:l,onInputChange:i,onMenuClose:u,onMenuOpen:c,onMenuScrollToBottom:d,options:m,placeholder:f,value:g,description:h}){const{formatMessage:E}=(0,A.useIntl)();return r.createElement(se.Stack,{spacing:1},r.createElement(y.ReactSelect,{components:uf(cf({},e),{SingleValue:nf}),id:n,isClearable:!0,isDisabled:s,isLoading:a,mainField:t,options:m,onChange:l,onInputChange:i,onMenuClose:u,onMenuOpen:c,onMenuScrollToBottom:d,placeholder:E(f||{id:"global.select",defaultMessage:"Select..."}),value:Km()(g)?null:{label:R()(g,[t.name],""),value:g}}),h&&r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},h))}Zn.defaultProps={description:"",components:{},placeholder:null,value:null},Zn.propTypes={components:o().object,isDisabled:o().bool.isRequired,isLoading:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,onChange:o().func.isRequired,onInputChange:o().func.isRequired,onMenuClose:o().func.isRequired,onMenuOpen:o().func.isRequired,onMenuScrollToBottom:o().func.isRequired,options:o().array.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),value:o().object,description:o().string};const df=(0,r.memo)(Zn),pf=k.default.div`
  width: ${(0,y.pxToRem)(6)};
  height: ${(0,y.pxToRem)(6)};
  background: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`;function _n({data:e,displayNavigationLink:t,isDisabled:n,mainField:s,onRemove:a,searchToPersist:l,targetModel:i}){const{formatMessage:u}=(0,A.useIntl)(),c=`/content-manager/collectionType/${i}/${e.id}`;let d="pointer";n&&(d="not-allowed"),t||(d="default");const m=As()(e,"publishedAt"),f=Re()(e.publishedAt),g=e[s.name],h={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},E={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},b=u(f?h:E),{pathname:O}=(0,ee.useLocation)();return r.createElement(j.Flex,{as:"li",alignItems:"center"},r.createElement(j.Flex,{style:{flex:1},alignItems:"center"},m&&r.createElement(D.Box,{paddingRight:2},r.createElement(pf,{isDraft:f,title:b})),t?r.createElement(y.Link,{to:{pathname:c,state:{from:O},search:l},style:{textTransform:"none"}},g||e.id):r.createElement(L.Typography,{variant:"pi"},g||e.id)),r.createElement(y.RemoveRoundedButton,{onClick:a,label:"Remove",style:{cursor:d}}))}_n.defaultProps={onRemove:()=>{},searchToPersist:null,targetModel:""},_n.propTypes={data:o().object.isRequired,displayNavigationLink:o().bool.isRequired,isDisabled:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,onRemove:o().func,searchToPersist:o().string,targetModel:o().string};const mf=(0,r.memo)(_n);function Qn({addRelation:e,components:t,displayNavigationLink:n,mainField:s,name:a,isDisabled:l,isLoading:i,onInputChange:u,onMenuClose:c,onMenuOpen:d,onMenuScrollToBottom:m,onRemove:f,options:g,placeholder:h,searchToPersist:E,targetModel:b,value:O,description:x}){const{formatMessage:C}=(0,A.useIntl)(),S={ignoreCase:!0,ignoreAccents:!0,trim:!1,matchFrom:"any"};return r.createElement(se.Stack,{spacing:1},r.createElement(y.ReactSelect,{components:t,isDisabled:l,id:a,filterOption:(I,V)=>!Re()(O)&&O.findIndex(W=>W.id===I.value.id)!==-1?!1:V?(0,Gn.createFilter)(S)(I,V):!0,mainField:s,isLoading:i,isMulti:!0,isSearchable:!0,options:g,onChange:e,onInputChange:u,onMenuClose:c,onMenuOpen:d,onMenuScrollToBottom:m,placeholder:C(h||{id:"global.select",defaultMessage:"Select..."}),value:[]}),r.createElement(D.Box,{paddingTop:3,style:{overflow:"auto"}},r.createElement(se.Stack,{as:"ul",spacing:4,style:{maxHeight:"128px",overflowX:"hidden"}},O==null?void 0:O.map((I,V)=>r.createElement(mf,{key:I.id,data:I,displayNavigationLink:n,isDisabled:l,mainField:s,onRemove:()=>{l||f(`${a}.${V}`)},searchToPersist:E,targetModel:b})))),x&&r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},x))}Qn.defaultProps={description:"",components:{},placeholder:null,searchToPersist:null,value:null},Qn.propTypes={addRelation:o().func.isRequired,components:o().object,displayNavigationLink:o().bool.isRequired,isDisabled:o().bool.isRequired,isLoading:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,onInputChange:o().func.isRequired,onMenuClose:o().func.isRequired,onMenuOpen:o().func.isRequired,onMenuScrollToBottom:o().func.isRequired,onRemove:o().func.isRequired,options:o().array.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),searchToPersist:o().string,targetModel:o().string.isRequired,value:o().array,description:o().string};const ff=(0,r.memo)(Qn);var gf=Object.defineProperty,Ws=Object.getOwnPropertySymbols,yf=Object.prototype.hasOwnProperty,hf=Object.prototype.propertyIsEnumerable,zs=(e,t,n)=>t in e?gf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Us=(e,t)=>{for(var n in t||(t={}))yf.call(t,n)&&zs(e,n,t[n]);if(Ws)for(var n of Ws(t))hf.call(t,n)&&zs(e,n,t[n]);return e};const bf=k.default.div`
  flex-shrink: 0;
  width: ${(0,y.pxToRem)(6)};
  height: ${(0,y.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`,Kn=e=>{const{formatMessage:t}=(0,A.useIntl)(),n=Gn.components.Option;if((0,B.has)((0,B.get)(e,"data.value"),"publishedAt")){const a=(0,B.isEmpty)((0,B.get)(e,"data.value.publishedAt")),l={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},i={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},u=t(a?l:i);return r.createElement(n,Us({},e),r.createElement(j.Flex,null,r.createElement(bf,{title:u,isDraft:a}),r.createElement(L.Typography,{ellipsis:!0},e.label||"-")))}return r.createElement(n,Us({},e),e.label||"-")};Kn.defaultProps={label:""},Kn.propTypes={label:o().oneOfType([o().string,o().number]),isFocused:o().bool.isRequired,selectProps:o().shape({hasDraftAndPublish:o().bool,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired}).isRequired};const Ef=Kn;var vf=Object.defineProperty,Hs=Object.getOwnPropertySymbols,Cf=Object.prototype.hasOwnProperty,Of=Object.prototype.propertyIsEnumerable,Gs=(e,t,n)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zs=(e,t)=>{for(var n in t||(t={}))Cf.call(t,n)&&Gs(e,n,t[n]);if(Hs)for(var n of Hs(t))Of.call(t,n)&&Gs(e,n,t[n]);return e};function Pf(e,t){return function(n){const s=t(n);return r.createElement(e,Zs(Zs({},n),s))}}const Rf=Pf;function Mf({isUserAllowedToEditField:e,isUserAllowedToReadField:t,name:n}){const{isCreatingEntry:s,createActionAllowedFields:a,readActionAllowedFields:l,updateActionAllowedFields:i}=(0,y.useCMEditViewDataManager)(),u=(0,r.useMemo)(()=>e===!0?!0:(s?a:i).includes(n),[s,a,n,e,i]),c=(0,r.useMemo)(()=>t?!0:(s?[]:l).includes(n),[s,t,n,l]);return{isCreatingEntry:s,isFieldAllowed:u,isFieldReadable:c}}const Tf=Mf;var wf=Object.defineProperty,If=Object.defineProperties,Df=Object.getOwnPropertyDescriptors,_s=Object.getOwnPropertySymbols,xf=Object.prototype.hasOwnProperty,Sf=Object.prototype.propertyIsEnumerable,Qs=(e,t,n)=>t in e?wf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yn=(e,t)=>{for(var n in t||(t={}))xf.call(t,n)&&Qs(e,n,t[n]);if(_s)for(var n of _s(t))Sf.call(t,n)&&Qs(e,n,t[n]);return e},Jn=(e,t)=>If(e,Df(t)),Lf=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const Ks={contains:"",limit:20,start:0},Ff=(e,t)=>t?t.reduce((n,s)=>{const a=R()(e,s,null);return a&&ne()(n,s,a),n},{}):{};function Xn({description:e,editable:t,labelAction:n,intlLabel:s,isCreatingEntry:a,isFieldAllowed:l,isFieldReadable:i,mainField:u,name:c,relationType:d,targetModel:m,placeholder:f,queryInfos:g}){const{formatMessage:h}=(0,A.useIntl)(),[{query:E}]=(0,y.useQueryParams)(),b=(0,r.useMemo)(()=>d.toLowerCase().includes("morph"),[d]),{addRelation:O,modifiedData:x,moveRelation:C,onChange:S,onRemoveRelation:I}=(0,y.useCMEditViewDataManager)(),{pathname:V}=(0,ee.useLocation)(),w=R()(x,c,null),[W,H]=(0,r.useState)(Ks),[_,N]=(0,r.useState)([]),[G,F]=(0,r.useState)(!1),[Z,$]=(0,r.useState)(!1),Y=(0,r.useMemo)(()=>_.filter(Ce=>Re()(w)?!0:Array.isArray(w)?zm()(w,$e=>$e.id===Ce.value.id)===-1:R()(w,"id","")!==Ce.value.id),[_,w]),{endPoint:T,containsKey:q,defaultParams:K,shouldDisplayRelationLink:U,paramsToKeep:M}=g,P=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(d),Q=(0,r.useMemo)(()=>w?P?[w.id]:w.map(Ce=>Ce.id):[],[P,w]),re=(0,r.useCallback)(Ce=>Lf(this,null,function*(){if(b){F(!1);return}if(!l){F(!1);return}F(!0);const $e=Jn(Yn({limit:W.limit},K),{start:W.start});W.contains&&($e[`filters[${q}][$contains]`]=W.contains);try{const{data:Ke}=yield ge.be.post(T,{idsToOmit:Q},{params:$e,cancelToken:Ce.token}),Jr=Ke.map(Ye=>({value:Ye,label:Ye[u.name]}));N(Ye=>Ye.concat(Jr).filter((mn,Xr)=>Ye.findIndex(J=>J.value.id===mn.value.id)===-1?!0:Ye.findIndex(J=>J.value.id===mn.value.id)===Xr)),F(!1)}catch(Ke){F(!1)}}),[q,K,T,Q,l,b,u.name,W.contains,W.limit,W.start]);(0,r.useEffect)(()=>{const $e=Se().CancelToken.source();return Z&&re($e),()=>$e.cancel("Operation canceled by the user.")},[re,Z]);const ce=(Ce,{action:$e})=>($e==="input-change"&&H(Ke=>Ke.contains===Ce?Ke:Jn(Yn({},Ke),{contains:Ce,start:0})),Ce),me=()=>{H(Ce=>Jn(Yn({},Ce),{start:Ce.start+20}))},Fe=()=>{H(Ks),$(!1)},rt=Ce=>{S({target:{name:c,value:Ce&&Ce.value}})},z=Ce=>{Re()(Ce)||O({target:{name:c,value:Ce}})},de=()=>{$(!0)},je=`/content-manager/collectionType/${m}/${w?w.id:null}`,He=(0,Ne.stringify)(Ff(E,M),{encode:!1});let ht=null;P&&w&&U&&(ht=r.createElement(y.Link,{to:{pathname:je,state:{from:V},search:He}},h({id:v("containers.Edit.seeDetails"),defaultMessage:"Details"})));const Qe=P?df:ff,Kr=ks()(w)?w.length:0,Yr=(0,r.useMemo)(()=>b?!0:a?!t:!l&&i||!t,[b,a,t,l,i]);return!l&&a?r.createElement(y.NotAllowedInput,{intlLabel:s,labelAction:n}):!a&&!l&&!i?r.createElement(y.NotAllowedInput,{intlLabel:s,labelAction:n}):r.createElement(se.Stack,{spacing:1},r.createElement(_m,{intlLabel:s,isSingle:P,labelAction:n,link:ht,name:c,numberOfEntries:Kr}),r.createElement(Qe,{addRelation:z,components:{Option:Ef},displayNavigationLink:U,id:c,isDisabled:Yr,isLoading:G,isClearable:!0,mainField:u,move:C,name:c,options:Y,onChange:rt,onInputChange:ce,onMenuClose:Fe,onMenuOpen:de,onMenuScrollToBottom:me,onRemove:I,placeholder:f,searchToPersist:He,targetModel:m,value:w,description:e}))}Xn.defaultProps={editable:!0,description:"",labelAction:null,isFieldAllowed:!0,placeholder:null},Xn.propTypes={editable:o().bool,description:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,isCreatingEntry:o().bool.isRequired,isFieldAllowed:o().bool,isFieldReadable:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),relationType:o().string.isRequired,targetModel:o().string.isRequired,queryInfos:o().shape({containsKey:o().string.isRequired,defaultParams:o().object,endPoint:o().string.isRequired,shouldDisplayRelationLink:o().bool.isRequired,paramsToKeep:o().array}).isRequired};const kf=(0,r.memo)(Xn),Ys=Rf(kf,Tf);var Af=Object.defineProperty,Js=Object.getOwnPropertySymbols,jf=Object.prototype.hasOwnProperty,$f=Object.prototype.propertyIsEnumerable,Xs=(e,t,n)=>t in e?Af(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ea=(e,t)=>{for(var n in t||(t={}))jf.call(t,n)&&Xs(e,n,t[n]);if(Js)for(var n of Js(t))$f.call(t,n)&&Xs(e,n,t[n]);return e};function Bf(e,t){return function(n){const s=t(n.keys);return r.createElement(e,ea(ea({},n),s))}}const Nf=Bf,Vf=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],qf=(e="")=>{switch((0,B.toLower)(e)){case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}},Wf=e=>{let t;return e==="float"||e==="decimal"?t=.01:t=1,t};function zf(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:s,modifiedData:a,onChange:l,readActionAllowedFields:i,shouldNotRunValidations:u,updateActionAllowedFields:c}=(0,y.useCMEditViewDataManager)(),d=(0,r.useMemo)(()=>s?t:c,[s,t,c]),m=(0,r.useMemo)(()=>s?[]:i,[s,i]),f=(0,B.get)(a,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:s,onChange:l,readableFields:m,shouldNotRunValidations:u,value:f}}const Uf=zf,ta=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];var Hf=Object.defineProperty,Gf=Object.defineProperties,Zf=Object.getOwnPropertyDescriptors,na=Object.getOwnPropertySymbols,_f=Object.prototype.hasOwnProperty,Qf=Object.prototype.propertyIsEnumerable,ra=(e,t,n)=>t in e?Hf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,er=(e,t)=>{for(var n in t||(t={}))_f.call(t,n)&&ra(e,n,t[n]);if(na)for(var n of na(t))Qf.call(t,n)&&ra(e,n,t[n]);return e},Kf=(e,t)=>Gf(e,Zf(t));function tr({allowedFields:e,fieldSchema:t,formErrors:n,isCreatingEntry:s,keys:a,labelAction:l,metadatas:i,onChange:u,readableFields:c,shouldNotRunValidations:d,queryInfos:m,value:f}){const{fields:g}=(0,y.useLibrary)(),{formatMessage:h}=(0,A.useIntl)(),{contentType:E}=lt(),b=(0,r.useMemo)(()=>!R()(i,"editable",!0),[i]),O=t.type,x=R()(n,[a],null),C=(0,r.useMemo)(()=>Co(a),[a]),S=(0,r.useMemo)(()=>{const K=Pd()(t,d?[...ta,"required","minLength"]:ta),U=t.regex||null;if(U){const M=new RegExp(U);M&&(K.regex=M)}return K},[t,d]),I=(0,r.useMemo)(()=>R()(S,["required"],!1),[S]),V=(0,r.useMemo)(()=>{const K=R()(E,["attributes"],{});return R()(K,[C[0],"type"],null)==="dynamiczone"},[E,C]),w=(0,r.useMemo)(()=>qf(O),[O]),W=(0,r.useMemo)(()=>O==="media"&&!f?[]:f,[O,f]),H=(0,r.useMemo)(()=>Wf(O),[O]),_=(0,r.useMemo)(()=>{const K=C.join(".");if(e.includes(K))return!0;if(V)return e.includes(C[0]);if(C.length>1){const M=Zt()(C,C.length-1).join(".");return e.includes(M)}return!1},[e,C,V]),N=(0,r.useMemo)(()=>{const K=C.join(".");if(c.includes(K))return!0;if(V)return c.includes(C[0]);if(C.length>1){const M=Zt()(C,C.length-1).join(".");return c.includes(M)}return!1},[c,C,V]),G=(0,r.useMemo)(()=>N||_,[_,N]),F=(0,r.useMemo)(()=>s?b:N&&!_?!0:b,[b,s,_,N]),Z=(0,r.useMemo)(()=>Vf(t.enum||[],I),[t,I]),{label:$,description:Y,placeholder:T,visible:q}=i;return q===!1?null:G?O==="relation"?r.createElement(Ys,Kf(er(er({},i),t),{description:i.description?h({id:i.description,defaultMessage:i.description}):void 0,intlLabel:{id:i.label,defaultMessage:i.label},labelAction:l,isUserAllowedToEditField:_,isUserAllowedToReadField:N,name:a,placeholder:i.placeholder?{id:i.placeholder,defaultMessage:i.placeholder}:null,queryInfos:m,value:f,error:x&&h(x)})):r.createElement(y.GenericInput,{attribute:t,autoComplete:"new-password",intlLabel:{id:$,defaultMessage:$},isNullable:w==="bool"&&[null,void 0].includes(t.default),description:Y?{id:Y,defaultMessage:Y}:null,disabled:F,error:x,labelAction:l,contentTypeUID:E.uid,customInputs:er({json:Mm,uid:qm,media:g.media,wysiwyg:im},g),multiple:t.multiple||!1,name:a,onChange:u,options:Z,placeholder:T?{id:T,defaultMessage:T}:null,required:t.required||!1,step:H,type:w,value:W,withDefaultValue:!1}):r.createElement(y.NotAllowedInput,{description:Y?{id:Y,defaultMessage:Y}:null,intlLabel:{id:$,defaultMessage:$},labelAction:l,error:x&&h(x),name:a,required:I})}tr.defaultProps={formErrors:{},labelAction:void 0,queryInfos:{},value:null},tr.propTypes={allowedFields:o().array.isRequired,fieldSchema:o().object.isRequired,formErrors:o().object,keys:o().string.isRequired,isCreatingEntry:o().bool.isRequired,labelAction:o().element,metadatas:o().object.isRequired,onChange:o().func.isRequired,readableFields:o().array.isRequired,shouldNotRunValidations:o().bool.isRequired,queryInfos:o().shape({containsKey:o().string,defaultParams:o().object,endPoint:o().string}),value:o().any};const Yf=(0,r.memo)(tr,We()),nr=Nf(Yf,Uf),rr=({componentUid:e,isFromDynamicZone:t,isNested:n,name:s})=>{const{getComponentLayout:a}=lt(),i=(0,r.useMemo)(()=>a(e),[e,a]).layouts.edit;return r.createElement(D.Box,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":""},r.createElement(se.Stack,{spacing:6},i.map((u,c)=>r.createElement(ie.Grid,{gap:4,key:c},u.map(({name:d,size:m,metadatas:f,fieldSchema:g,queryInfos:h})=>{const E=g.type==="component",b=g.type==="dynamiczone",O=`${s}.${d}`;if(E){const x=g.component;return r.createElement(ie.GridItem,{col:m,s:12,xs:12,key:d},r.createElement(Yt,{componentUid:x,intlLabel:{id:f.label,defaultMessage:f.label},isNested:!0,isRepeatable:g.repeatable,max:g.max,min:g.min,name:O,required:g.required||!1}))}return b?r.createElement(ie.GridItem,{col:m,s:12,xs:12,key:s},r.createElement(mr,{name:O,fieldSchema:g,metadatas:f})):r.createElement(ie.GridItem,{col:m,key:d,s:12,xs:12},r.createElement(nr,{keys:O,fieldSchema:g,metadatas:f,queryInfos:h}))})))))};rr.defaultProps={isFromDynamicZone:!1,isNested:!1},rr.propTypes={componentUid:o().string.isRequired,isFromDynamicZone:o().bool,isNested:o().bool,name:o().string.isRequired};const Jf=rr;var oa=p(74201),Xf=p(59290),ut=p.n(Xf),eg=Object.defineProperty,sa=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,ng=Object.prototype.propertyIsEnumerable,aa=(e,t,n)=>t in e?eg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ia=(e,t)=>{for(var n in t||(t={}))tg.call(t,n)&&aa(e,n,t[n]);if(sa)for(var n of sa(t))ng.call(t,n)&&aa(e,n,t[n]);return e};function rg(e,t){return function(n){const s=t(n);return r.createElement(e,ia(ia({},n),s))}}const og=rg;function sg(){const{addRepeatableComponentToField:e,formErrors:t}=(0,y.useCMEditViewDataManager)();return{addRepeatableComponentToField:e,formErrors:t}}const ag=sg;function ig(e,t){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}var Kt=p(51968),lg=p(41119),la=p.n(lg),or=p(44826);const cg=k.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,ug=()=>r.createElement(cg,{padding:6,background:"primary100"});var dg=p(78752);const pg=(0,k.default)(Me.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,ca=(0,k.default)(Me.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,mg=k.default.span`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>e.spaces[4]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  height: ${50/16}rem;
`,fg=(0,k.default)(oa.TextButton)`
  text-align: left;

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral500};
    }
  }
`,ua=({displayedValue:e})=>r.createElement(mg,null,r.createElement(se.Stack,{horizontal:!0,spacing:3,flex:1},r.createElement(j.Flex,{justifyContent:"center",borderRadius:"50%",height:`${24/16}rem}`,width:`${24/16}rem}`,"aria-hidden":!0,as:"span",background:"neutral200"},r.createElement(dg.Icon,{as:no(),width:`${8/16}rem}`,color:"neutral600"})),r.createElement(fg,{onClick:()=>{},flex:1},r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral700"},e))),r.createElement(se.Stack,{horizontal:!0,spacing:0},r.createElement(ca,{noBorder:!0,onClick:()=>{},icon:r.createElement(Be(),null)}),r.createElement(ca,{icon:r.createElement(et(),null),noBorder:!0})));ua.propTypes={displayedValue:o().string.isRequired};const gg=ua;var yg=Object.defineProperty,da=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,bg=Object.prototype.propertyIsEnumerable,pa=(e,t,n)=>t in e?yg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ma=(e,t)=>{for(var n in t||(t={}))hg.call(t,n)&&pa(e,n,t[n]);if(da)for(var n of da(t))bg.call(t,n)&&pa(e,n,t[n]);return e};function Eg(e,t){return function(n){const s=t(n);return r.createElement(e,ma(ma({},n),s))}}const vg=Eg;function Cg({schema:e,componentFieldName:t}){const{checkFormErrors:n,modifiedData:s,moveComponentField:a,removeRepeatableField:l,triggerFormValidation:i}=(0,y.useCMEditViewDataManager)(),u=(0,r.useMemo)(()=>(0,B.get)(e,["settings","mainField"],"id"),[e]);return{displayedValue:(0,B.toString)((0,B.get)(s,[...t.split("."),u],"")),mainField:u,checkFormErrors:n,moveComponentField:a,removeRepeatableField:l,schema:e,triggerFormValidation:i}}const Og=Cg,Pg=k.default.span`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  padding: 0 ${({theme:e})=>e.spaces[3]};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,sr=({componentFieldName:e,hasErrorMessage:t,hasErrors:n,isDraggingSibling:s,isOpen:a,isReadOnly:l,onClickToggle:i,schema:u,toggleCollapses:c,moveComponentField:d,removeRepeatableField:m,setIsDraggingSibling:f,triggerFormValidation:g,displayedValue:h})=>{const E=(0,r.useRef)(null),b=(0,r.useRef)(null),[,O]=(0,r.useState)(!1),{formatMessage:x}=(0,A.useIntl)(),C=u.layouts.edit,[,S]=(0,Te.useDrop)({accept:Pe.COMPONENT,canDrop(){return!1},hover(N,G){if(!b.current)return;const F=N.originalPath,Z=e,$=F.split("."),Y=$.slice().splice(-1).join(""),T=Z.split(".").splice(-1).join(""),q=$.slice(0,$.length-1),K=parseInt(Y,10),U=parseInt(T,10);if(K===U)return;const M=b.current.getBoundingClientRect(),P=(M.bottom-M.top)/2,re=G.getClientOffset().y-M.top;K<U&&re<P||K>U&&re>P||F.split(".").length===Z.split(".").length&&(d(q,K,U),N.originalPath=Z)}}),[{isDragging:I},V,w]=(0,Te.useDrag)({type:Pe.COMPONENT,item:()=>(c(-1),{displayedValue:h,originalPath:e}),end:()=>{g(),f(!1)},collect:N=>({isDragging:N.isDragging()})});(0,r.useEffect)(()=>{w((0,Kt.rX)(),{captureDraggingState:!1})},[w]),(0,r.useEffect)(()=>{I&&f(!0)},[I,f]),(0,r.useEffect)(()=>{s||O(N=>!N)},[s]);const W={dragRef:V(E),dropRef:S(b)},H=la()(h),_=n?"error":void 0;return r.createElement(D.Box,{ref:W?W.dropRef:null},I&&r.createElement(ug,null),!I&&s&&r.createElement(gg,{displayedValue:H,componentFieldName:e}),!I&&!s&&r.createElement(ze.Accordion,{error:_,hasErrorMessage:t,expanded:a,onToggle:i,id:e,size:"S"},r.createElement(ze.AccordionToggle,{action:l?null:r.createElement(se.Stack,{horizontal:!0,spacing:0},r.createElement(pg,{expanded:a,noBorder:!0,onClick:()=>{m(e),c()},label:x({id:v("containers.Edit.delete"),defaultMessage:"Delete"}),icon:r.createElement(Be(),null)}),r.createElement(or.Tooltip,{description:x({id:v("components.DragHandle-label"),defaultMessage:"Drag"})},r.createElement(Pg,{role:"button",tabIndex:-1,ref:W.dragRef,onClick:N=>N.stopPropagation()},r.createElement(et(),null)))),title:H,togglePosition:"left"}),r.createElement(ze.AccordionContent,null,r.createElement(se.Stack,{background:"neutral100",padding:6,spacing:6},C.map((N,G)=>r.createElement(ie.Grid,{gap:4,key:G},N.map(({name:F,fieldSchema:Z,metadatas:$,queryInfos:Y,size:T})=>{const q=Z.type==="component",K=Z.type==="dynamiczone",U=`${e}.${F}`;if(q){const M=Z.component;return r.createElement(ie.GridItem,{col:T,s:12,xs:12,key:F},r.createElement(Yt,{componentUid:M,intlLabel:{id:$.label,defaultMessage:$.label},isRepeatable:Z.repeatable,isNested:!0,name:U,max:Z.max,min:Z.min,required:Z.required}))}return K?r.createElement(ie.GridItem,{col:T,s:12,xs:12,key:F},r.createElement(mr,{name:U,fieldSchema:Z,metadatas:$})):r.createElement(ie.GridItem,{key:U,col:T,s:12,xs:12},r.createElement(nr,{fieldSchema:Z,keys:U,metadatas:$,queryInfos:Y}))})))))))};sr.defaultProps={isDraggingSibling:!1,isOpen:!1,setIsDraggingSibling:()=>{},toggleCollapses:()=>{}},sr.propTypes={componentFieldName:o().string.isRequired,hasErrorMessage:o().bool.isRequired,hasErrors:o().bool.isRequired,isDraggingSibling:o().bool,isOpen:o().bool,isReadOnly:o().bool.isRequired,onClickToggle:o().func.isRequired,schema:o().object.isRequired,toggleCollapses:o().func,moveComponentField:o().func.isRequired,removeRepeatableField:o().func.isRequired,setIsDraggingSibling:o().func,triggerFormValidation:o().func.isRequired,displayedValue:o().string.isRequired};const Rg=(0,r.memo)(sr),Mg=vg(Rg,Og);var fa=p(87910),Tg=Object.defineProperty,ga=Object.getOwnPropertySymbols,wg=Object.prototype.hasOwnProperty,Ig=Object.prototype.propertyIsEnumerable,ya=(e,t,n)=>t in e?Tg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dg=(e,t)=>{for(var n in t||(t={}))wg.call(t,n)&&ya(e,n,t[n]);if(ga)for(var n of ga(t))Ig.call(t,n)&&ya(e,n,t[n]);return e};const xg=(0,k.default)(D.Box)`
  overflow: hidden;
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,Sg=(0,k.default)(D.Box)`
  > div {
    & > * {
      border-radius: unset;
      border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    > div {
      > div:first-of-type {
        border-radius: unset;
      }
    }
  }

  > div:first-of-type {
    > div {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      > div:first-of-type {
        border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      }
    }

    > div:not([data-strapi-expanded='true']) {
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};

      &:hover {
        border-top: 1px solid ${({theme:e})=>e.colors.primary600};
      }
    }

    > span {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
  }

  & [data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }

  ${({theme:e,footer:t})=>`
    &:not(${t}) {
      & > *:last-of-type {
        border-radius: 0 0 ${e.borderRadius} ${e.borderRadius};
      }
    }
  `}
`,Lg=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,ar=({children:e,footer:t,label:n,labelAction:s,error:a})=>{const{formatMessage:l}=(0,A.useIntl)(),i=r.Children.toArray(e).map(u=>(0,r.cloneElement)(u,{hasErrorMessage:!1}));return r.createElement(fa.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},n&&r.createElement(j.Flex,{paddingBottom:1},r.createElement(L.Typography,{as:"label",textColor:"neutral800",variant:"pi",fontWeight:"bold"},n),s&&r.createElement(Lg,{paddingLeft:1},s)),r.createElement(Sg,{footer:t},i),t&&r.createElement(xg,null,t),a&&r.createElement(D.Box,{paddingTop:1},r.createElement(L.Typography,{variant:"pi",textColor:"danger600"},l({id:a.id,defaultMessage:a.id},Dg({},a.values)))))};ar.defaultProps={error:void 0,footer:null,label:null,labelAction:void 0},ar.propTypes={children:o().node.isRequired,error:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),footer:o().node,label:o().string,labelAction:o().node};const Fg=ar,kg=(0,k.default)(oa.TextButton)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,ir=({addRepeatableComponentToField:e,formErrors:t,componentUid:n,componentValue:s,componentValueLength:a,isReadOnly:l,max:i,min:u,name:c})=>{const d=(0,y.useNotification)(),{formatMessage:m}=(0,A.useIntl)(),[f,g]=(0,r.useState)(""),[h,E]=(0,r.useState)(!1),[,b]=(0,Te.useDrop)({accept:Pe.COMPONENT}),{getComponentLayout:O}=lt(),x=(0,r.useMemo)(()=>O(n),[n,O]),C=(0,r.useMemo)(()=>Oo(s||[])+1,[s]),S=ig(c,t),I=()=>{g("")},V=u-a,w=R()(t,c,{id:""}).id.includes("min"),W=(0,r.useCallback)(()=>{l||(a<i?(e(c,n,w),g(C)):a>=i&&d({type:"info",message:{id:v("components.notification.info.maximum-requirement")}}))},[e,n,a,w,l,i,c,C,d]);let H=t[c];return w&&(H={id:v("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:V}}),a===0?r.createElement(is,{error:H,isReadOnly:l,onClick:W}):(S.some(N=>N.split(".").length>1)&&!w&&(H={id:v("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),r.createElement(D.Box,{hasRadius:!0,ref:b},r.createElement(Fg,{error:H,footer:r.createElement(j.Flex,{justifyContent:"center",height:"48px",background:"neutral0"},r.createElement(kg,{disabled:l,onClick:W,startIcon:r.createElement(ut(),null)},m({id:v("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})))},s.map((N,G)=>{const F=N.__temp_key__,Z=f===F,$=`${c}.${G}`,Y=S.includes($);return r.createElement(Mg,{componentFieldName:$,componentUid:n,hasErrors:Y,hasMinError:w,isDraggingSibling:h,isOpen:Z,isReadOnly:l,key:F,onClickToggle:()=>{g(Z?"":F)},parentName:c,schema:x,setIsDraggingSibling:E,toggleCollapses:I})}))))};ir.defaultProps={componentValue:null,componentValueLength:0,formErrors:{},max:1/0,min:0},ir.propTypes={addRepeatableComponentToField:o().func.isRequired,componentUid:o().string.isRequired,componentValue:o().oneOfType([o().array,o().object]),componentValueLength:o().number,formErrors:o().object,isReadOnly:o().bool.isRequired,max:o().number,min:o().number,name:o().string.isRequired};const Ag=(0,r.memo)(ir),jg=og(Ag,ag);var $g=Object.defineProperty,ha=Object.getOwnPropertySymbols,Bg=Object.prototype.hasOwnProperty,Ng=Object.prototype.propertyIsEnumerable,ba=(e,t,n)=>t in e?$g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ea=(e,t)=>{for(var n in t||(t={}))Bg.call(t,n)&&ba(e,n,t[n]);if(ha)for(var n of ha(t))Ng.call(t,n)&&ba(e,n,t[n]);return e};function Vg(e,t){return function(n){const s=t(n);return r.createElement(e,Ea(Ea({},n),s))}}const qg=Vg;function Wg({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:s,isCreatingEntry:a,modifiedData:l,removeComponentFromField:i,readActionAllowedFields:u,updateActionAllowedFields:c,formErrors:d}=(0,y.useCMEditViewDataManager)(),{contentType:m}=lt(),f=(0,r.useMemo)(()=>{const C=(0,B.get)(m,["attributes"],{});return Object.keys(C).filter(I=>(0,B.get)(C,[I,"type"],"")==="dynamiczone")},[m]),g=(0,r.useMemo)(()=>a?s:c,[a,s,c]),h=(0,B.get)(l,t,null),E=(0,r.useMemo)(()=>Co(t),[t]),b=(0,r.useMemo)(()=>e&&a||g.filter(I=>I===E[0]).length>0?!0:g.map(I=>I.split(".")).filter(I=>I.length<E.length?!1:(0,B.take)(I,E.length).join(".")===E.join(".")).length>0,[e,a,g,E]),O=(0,r.useMemo)(()=>e||f.includes(E[0])?!0:(a?[]:u).map(I=>I.split(".")).filter(I=>I.length<E.length?!1:(0,B.take)(I,E.length).join(".")===E.join(".")).length>0,[e,f,E,a,u]),x=(0,r.useMemo)(()=>a||b?!1:O,[b,O,a]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:b,hasChildrenReadableFields:O,isCreatingEntry:a,isReadOnly:x,removeComponentFromField:i,componentValue:h}}const zg=Wg,Ug=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,lr=({intlLabel:e,id:t,labelAction:n,name:s,numberOfEntries:a,showNumberOfEntries:l,required:i})=>{const{formatMessage:u}=(0,A.useIntl)(),c=e!=null&&e.id?u(e):s;return r.createElement(D.Box,{paddingBottom:1},r.createElement(j.Flex,null,r.createElement(L.Typography,{textColor:"neutral800",htmlFor:t||s,variant:"pi",fontWeight:"bold",as:"label"},c,l&&r.createElement(r.Fragment,null,"\xA0(",a,")"),i&&r.createElement(L.Typography,{textColor:"danger600"},"*")),n&&r.createElement(Ug,{paddingLeft:1},n)))};lr.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},lr.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,numberOfEntries:o().number,required:o().bool,showNumberOfEntries:o().bool};const Hg=lr,cr=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:s,isFromDynamicZone:a,isRepeatable:l,isNested:i,labelAction:u,max:c,min:d,name:m,hasChildrenAllowedFields:f,hasChildrenReadableFields:g,isReadOnly:h,componentValue:E,removeComponentFromField:b,required:O})=>{const{formatMessage:x}=(0,A.useIntl)(),C=yd()(E),S=E!==null||a,I=!l&&S&&!a&&f;if(!f&&s)return r.createElement(y.NotAllowedInput,{labelAction:u,intlLabel:n,name:m});if(!f&&!s&&!g)return r.createElement(y.NotAllowedInput,{labelAction:u,intlLabel:n,name:m});const V=()=>{e(m,t)};return r.createElement(D.Box,null,r.createElement(j.Flex,{justifyContent:"space-between"},n&&r.createElement(Hg,{intlLabel:n,labelAction:u,name:m,numberOfEntries:C,showNumberOfEntries:l,required:O}),I&&r.createElement(Me.IconButton,{label:x({id:v("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:r.createElement(Be(),null),noBorder:!0,onClick:()=>{b(m,t)}})),r.createElement(se.Stack,{spacing:1},!l&&!S&&r.createElement(is,{isReadOnly:h,onClick:V}),!l&&S&&r.createElement(Jf,{componentUid:t,isFromDynamicZone:a,isNested:i,name:m}),l&&r.createElement(jg,{componentValue:E,componentValueLength:C,componentUid:t,isReadOnly:h,max:c,min:d,name:m})))};cr.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},cr.propTypes={addNonRepeatableComponentToField:o().func.isRequired,componentUid:o().string.isRequired,componentValue:o().oneOfType([o().object,o().array]),hasChildrenAllowedFields:o().bool,hasChildrenReadableFields:o().bool,isCreatingEntry:o().bool.isRequired,isFromDynamicZone:o().bool,isReadOnly:o().bool,isRepeatable:o().bool,isNested:o().bool,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,max:o().number,min:o().number,name:o().string.isRequired,removeComponentFromField:o().func.isRequired,required:o().bool};const Gg=(0,r.memo)(cr,We()),Yt=qg(Gg,zg),Zg=(0,k.default)(D.Box)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,_g=()=>r.createElement(j.Flex,{justifyContent:"center"},r.createElement(Zg,{background:"neutral200"})),Qg=(0,k.default)(se.Stack)`
  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,ur=(0,k.default)(Me.IconButton)`
  background-color: transparent;
`,Kg=(0,k.default)(D.Box)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,Yg=(0,k.default)(D.Box)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,va=({componentUid:e,formErrors:t,index:n,isOpen:s,isFieldAllowed:a,moveComponentDown:l,moveComponentUp:i,name:u,onToggle:c,removeComponentFromDynamicZone:d,showDownIcon:m,showUpIcon:f})=>{const{formatMessage:g}=(0,A.useIntl)(),{getComponentLayout:h}=lt(),{icon:E,friendlyName:b}=(0,r.useMemo)(()=>{const{info:{icon:_,displayName:N}}=h(e);return{friendlyName:N,icon:_}},[e,h]),O=()=>l(u,n),x=()=>i(u,n),C=()=>d(u,n),S=g({id:v("components.DynamicZone.move-down-label"),defaultMessage:"Move component down"}),I=g({id:v("components.DynamicZone.move-up-label"),defaultMessage:"Move component down"}),V=g({id:v("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:b}),W=Object.keys(t).filter(_=>{const N=_.split(".");return`${N[0]}.${N[1]}`==`${u}.${n}`});let H;return W.length>0&&(H=g({id:v("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"})),r.createElement(D.Box,null,r.createElement(_g,null),r.createElement(Kg,{hasRadius:!0},r.createElement(ze.Accordion,{expanded:s,onToggle:()=>c(n),size:"S",error:H},r.createElement(ze.AccordionToggle,{startIcon:r.createElement(wn.G,{icon:E}),action:r.createElement(Qg,{horizontal:!0,spacing:0,expanded:s},m&&r.createElement(ur,{noBorder:!0,label:S,onClick:O,icon:r.createElement(pd(),null)}),f&&r.createElement(ur,{noBorder:!0,label:I,onClick:x,icon:r.createElement(fd(),null)}),a&&r.createElement(ur,{noBorder:!0,label:V,onClick:C,icon:r.createElement(Be(),null)})),title:b,togglePosition:"left"}),r.createElement(ze.AccordionContent,null,r.createElement(Yg,{background:"neutral0"},r.createElement(In.FocusTrap,{onEscape:()=>c(n)},r.createElement(Yt,{componentUid:e,icon:E,name:`${u}.${n}`,isFromDynamicZone:!0})))))))};va.propTypes={componentUid:o().string.isRequired,formErrors:o().object.isRequired,index:o().number.isRequired,isFieldAllowed:o().bool.isRequired,isOpen:o().bool.isRequired,moveComponentDown:o().func.isRequired,moveComponentUp:o().func.isRequired,name:o().string.isRequired,onToggle:o().func.isRequired,removeComponentFromDynamicZone:o().func.isRequired,showDownIcon:o().bool.isRequired,showUpIcon:o().bool.isRequired};const Jg=(0,r.memo)(va,We());var Xg=p(81346),ey=p.n(Xg);const Ca=(0,k.default)(wn.G)`
  width: ${(0,y.pxToRem)(32)} !important;
  height: ${(0,y.pxToRem)(32)} !important;
  padding: ${(0,y.pxToRem)(9)};
  border-radius: ${(0,y.pxToRem)(64)};
  background: ${({theme:e})=>e.colors.neutral150};
  path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,ty=(0,k.default)(D.Box)`
  flex-shrink: 0;
  height: ${(0,y.pxToRem)(84)};
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;
  align-items: center;

  &.active,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${Ca} {
      background: ${({theme:e})=>e.colors.primary200};
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;function dr({componentUid:e,intlLabel:t,icon:n,onClick:s}){const{formatMessage:a}=(0,A.useIntl)(),l=()=>{s(e)};return r.createElement("button",{type:"button",onClick:l},r.createElement(ty,{borderRadius:"borderRadius"},r.createElement(se.Stack,{spacing:1,style:{justifyContent:"center",alignItems:"center"}},r.createElement(Ca,{icon:n}),r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral600"},a(t)))))}dr.defaultProps={icon:"dice-d6",onClick:()=>{}},dr.propTypes={componentUid:o().string.isRequired,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}).isRequired,icon:o().string,onClick:o().func};const ny=dr,ry=k.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,Oa=({category:e,components:t,isOdd:n,isOpen:s,onAddComponent:a,onToggle:l})=>{const{formatMessage:i}=(0,A.useIntl)(),u=()=>{l(e)};return r.createElement(ze.Accordion,{expanded:s,onToggle:u,size:"S"},r.createElement(ze.AccordionToggle,{variant:n?"primary":"secondary",title:i({id:e,defaultMessage:e}),togglePosition:"left"}),r.createElement(ze.AccordionContent,null,r.createElement(D.Box,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3},r.createElement(ry,null,t.map(({componentUid:c,info:{displayName:d,icon:m}})=>r.createElement(ny,{key:c,componentUid:c,intlLabel:{id:d,defaultMessage:d},icon:m,onClick:a}))))))};Oa.propTypes={category:o().string.isRequired,components:o().array.isRequired,isOdd:o().bool.isRequired,isOpen:o().bool.isRequired,onAddComponent:o().func.isRequired,onToggle:o().func.isRequired};const oy=Oa,Pa=({components:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:s}=(0,A.useIntl)(),{getComponentLayout:a}=lt(),[l,i]=(0,r.useState)(""),u=(0,r.useMemo)(()=>{const m=e.map(g=>{const{category:h,info:E}=a(g);return{componentUid:g,category:h,info:E}}),f=ey()(m,"category");return Object.keys(f).reduce((g,h)=>(g.push({category:h,components:f[h]}),g),[])},[e,a]);(0,r.useEffect)(()=>{t&&u.length&&i(u[0].category)},[t,u]);const c=(0,r.useCallback)(m=>{n(m),i("")},[n]),d=(0,r.useCallback)(m=>{i(l===m?"":m)},[l]);return t?r.createElement(D.Box,{paddingBottom:6},r.createElement(D.Box,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral600"},s({id:v("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"}))),r.createElement(D.Box,{paddingTop:2},r.createElement(fa.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},u.map(({category:m,components:f},g)=>r.createElement(oy,{key:m,category:m,components:f,isOdd:g%2===1,isOpen:m===l,onAddComponent:c,onToggle:d})))))):null};Pa.propTypes={components:o().array.isRequired,isOpen:o().bool.isRequired,onClickAddComponent:o().func.isRequired};const sy=(0,r.memo)(Pa);var ay=Object.defineProperty,iy=Object.defineProperties,ly=Object.getOwnPropertyDescriptors,Ra=Object.getOwnPropertySymbols,cy=Object.prototype.hasOwnProperty,uy=Object.prototype.propertyIsEnumerable,Ma=(e,t,n)=>t in e?ay(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dy=(e,t)=>{for(var n in t||(t={}))cy.call(t,n)&&Ma(e,n,t[n]);if(Ra)for(var n of Ra(t))uy.call(t,n)&&Ma(e,n,t[n]);return e},py=(e,t)=>iy(e,ly(t));const Ta=e=>Array.from({length:e}).map(()=>({isOpen:!1})),pr=({name:e,addComponentToDynamicZone:t,formErrors:n,isCreatingEntry:s,isFieldAllowed:a,isFieldReadable:l,labelAction:i,moveComponentUp:u,moveComponentDown:c,removeComponentFromDynamicZone:d,dynamicDisplayedComponents:m,fieldSchema:f,metadatas:g})=>{const h=(0,y.useNotification)(),[E,b]=(0,r.useState)(!1),[O,x]=(0,r.useState)(!1),C=m.length,S=g.description?{id:g.description,defaultMessage:g.description}:null,[I,V]=(0,r.useState)(Ta(C));(0,r.useEffect)(()=>{V(Ta(C))},[C]),(0,r.useEffect)(()=>{O&&(V(M=>M.map((P,Q)=>Q===M.length-1?py(dy({},P),{isOpen:!0}):P)),x(!1))},[O]);const{max:w=1/0,min:W=-1/0}=f,H=(0,r.useMemo)(()=>Object.keys(n).filter(M=>M===e).map(M=>n[M]),[n,e]),_=(0,r.useMemo)(()=>f.components||[],[f]),N=W-C,G=H.length>0,F=H.length>0&&R()(H,[0,"id"],"").includes("min"),Z=G&&R()(H,[0,"id"],"")==="components.Input.error.validation.max",$=(0,r.useCallback)(M=>{b(!1),t(e,M,G),x(!0)},[t,G,e]),Y=()=>{C<w?b(M=>!M):h({type:"info",message:{id:v("components.notification.info.maximum-requirement")}})},T=M=>{V(P=>P.map(({isOpen:Q},re)=>re===M?{isOpen:!Q}:{isOpen:Q}))},q=(M,P)=>{c(M,P),V(Q=>Q.map(({isOpen:re},ce,me)=>ce===P+1?{isOpen:me[P].isOpen}:ce===P?{isOpen:me[ce+1].isOpen}:{isOpen:re}))},K=(M,P)=>{u(M,P),V(Q=>Q.map(({isOpen:re},ce,me)=>ce===P-1?{isOpen:me[P].isOpen}:ce===P?{isOpen:me[ce-1].isOpen}:{isOpen:re}))},U=(M,P)=>{d(M,P)};return!a&&s?r.createElement(y.NotAllowedInput,{description:S,intlLabel:{id:g.label,defaultMessage:g.label},labelAction:i,name:e}):!a&&!l&&!s?r.createElement(y.NotAllowedInput,{description:S,intlLabel:{id:g.label,defaultMessage:g.label},labelAction:i,name:e}):r.createElement(se.Stack,{spacing:6},C>0&&r.createElement(D.Box,null,r.createElement(ud,{intlDescription:S,label:g.label,labelAction:i,name:e,numberOfComponents:C,required:f.required||!1}),m.map((M,P)=>{var Q;const re=a&&C>0&&P<C-1,ce=a&&C>0&&P>0,me=((Q=I[P])==null?void 0:Q.isOpen)||!1;return r.createElement(Jg,{componentUid:M,formErrors:n,key:P,index:P,isOpen:me,isFieldAllowed:a,moveComponentDown:q,moveComponentUp:K,onToggle:T,name:e,removeComponentFromDynamicZone:U,showDownIcon:re,showUpIcon:ce})})),r.createElement(ld,{hasError:G,hasMaxError:Z,hasMinError:F,isDisabled:!a,label:g.label,missingComponentNumber:N,isOpen:E,name:e,onClick:Y}),r.createElement(sy,{isOpen:E,components:_,onClickAddComponent:$}))};pr.defaultProps={dynamicDisplayedComponents:[],fieldSchema:{max:1/0,min:-1/0},labelAction:null},pr.propTypes={addComponentToDynamicZone:o().func.isRequired,dynamicDisplayedComponents:o().array,fieldSchema:o().shape({components:o().array.isRequired,max:o().number,min:o().number,required:o().bool}),formErrors:o().object.isRequired,isCreatingEntry:o().bool.isRequired,isFieldAllowed:o().bool.isRequired,isFieldReadable:o().bool.isRequired,labelAction:o().element,metadatas:o().shape({description:o().string,label:o().string}).isRequired,moveComponentUp:o().func.isRequired,moveComponentDown:o().func.isRequired,name:o().string.isRequired,removeComponentFromDynamicZone:o().func.isRequired};const my=(0,r.memo)(pr,We()),mr=nd(my,od);var tt=p(41578);const Jt=()=>({type:tt.ZA}),fr=e=>({type:tt.Id,data:e}),gr=(e,t=!1)=>({type:tt.TP,rawQuery:e,isSingleType:t}),wa=()=>({type:tt.c2}),Ia=(e,t)=>({type:tt.w7,componentsDataStructure:e,contentTypeDataStructure:t}),he=e=>({type:tt.d0,status:e}),Ze=e=>({type:tt.t9,data:e}),Da=e=>e["content-manager_editViewCrudReducer"];var fy=p(98399),gy=Object.defineProperty,xa=Object.getOwnPropertySymbols,yy=Object.prototype.hasOwnProperty,hy=Object.prototype.propertyIsEnumerable,Sa=(e,t,n)=>t in e?gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,by=(e,t)=>{for(var n in t||(t={}))yy.call(t,n)&&Sa(e,n,t[n]);if(xa)for(var n of xa(t))hy.call(t,n)&&Sa(e,n,t[n]);return e},nt=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const yr=({allLayoutData:e,children:t,slug:n,id:s,origin:a})=>{const l=(0,y.useNotification)(),{setCurrentStep:i}=(0,y.useGuidedTour)(),{trackUsage:u}=(0,y.useTracking)(),{push:c,replace:d}=(0,ee.useHistory)(),[{rawQuery:m}]=(0,y.useQueryParams)(),f=(0,fe.useDispatch)(),{componentsDataStructure:g,contentTypeDataStructure:h,data:E,isLoading:b,status:O}=(0,fe.useSelector)(Da),x=Ho(n),C=(0,r.useRef)(!0),S=(0,r.useRef)(u),I=(0,r.useRef)(e),V=s===null,w=(0,r.useMemo)(()=>V&&!a?null:ve(`collection-types/${n}/${a||s}`),[n,s,V,a]),W=(0,r.useCallback)(T=>a?(0,y.contentManagementUtilRemoveFieldsFromData)(T,I.current.contentType,I.current.components):T,[a]),H=(0,r.useCallback)(T=>{const q=xo(T,I.current.contentType,I.current.components);return(0,y.formatContentTypeData)(q,I.current.contentType,I.current.components)},[]);(0,r.useEffect)(()=>{const T=Object.keys(e.components).reduce((U,M)=>{const P=$t(R()(e,["components",M,"attributes"],{}),e.components);return U[M]=(0,y.formatContentTypeData)(P,e.components[M],e.components),U},{}),q=$t(e.contentType.attributes,e.components),K=(0,y.formatContentTypeData)(q,e.contentType,e.components);f(Ia(T,K))},[e,f]),(0,r.useEffect)(()=>()=>{f(wa())},[f]),(0,r.useEffect)(()=>{const q=Se().CancelToken.source(),K=M=>nt(void 0,null,function*(){f(Jt());try{const{data:P}=yield ge.be.get(w,{cancelToken:M.token});f(fr(H(W(P))))}catch(P){if(Se().isCancel(P))return;fy.error(P);const Q=R()(P,"response.status",null);if(Q===404){c(x);return}Q===403&&(l({type:"info",message:{id:v("permissions.not-allowed.update")}}),c(x))}}),U=()=>nt(void 0,null,function*(){yield f(Jt()),yield f(gr(m))});return C.current?(w?K(q):U(),()=>{q.cancel("Operation canceled by the user.")}):()=>{}},[W,H,c,w,f,m,x,l]);const _=(0,r.useCallback)(T=>{const q=T.response.data;let K=R()(q,["error","message"],"Bad Request");Array.isArray(K)&&(K=R()(K,["0","messages","0","id"])),typeof K=="string"&&l({type:"warning",message:K})},[l]),N=(0,r.useCallback)(T=>nt(void 0,null,function*(){try{S.current("willDeleteEntry",T);const{data:q}=yield ge.be.delete(ve(`collection-types/${n}/${s}`));return l({type:"success",message:{id:v("success.record.delete")}}),S.current("didDeleteEntry",T),Promise.resolve(q)}catch(q){return S.current("didNotDeleteEntry",by({error:q},T)),Promise.reject(q)}}),[s,n,l]),G=(0,r.useCallback)(()=>{d(x)},[x,d]),F=(0,r.useCallback)((T,q)=>nt(void 0,null,function*(){const K=`${ve(`collection-types/${n}`)}${m}`;try{f(he("submit-pending"));const{data:U}=yield ge.be.post(K,T);return S.current("didCreateEntry",q),l({type:"success",message:{id:v("success.record.save")}}),i("contentManager.success"),f(Ze(H(U))),f(he("resolved")),d(`/content-manager/collectionType/${n}/${U.id}${m}`),Promise.resolve(U)}catch(U){return _(U),S.current("didNotCreateEntry",{error:U,trackerProperty:q}),f(he("resolved")),Promise.reject(U)}}),[H,_,d,n,f,m,l,i]),Z=(0,r.useCallback)(()=>nt(void 0,null,function*(){try{S.current("willPublishEntry");const T=ve(`collection-types/${n}/${s}/actions/publish`);f(he("publish-pending"));const{data:q}=yield ge.be.post(T);return S.current("didPublishEntry"),f(Ze(H(q))),f(he("resolved")),l({type:"success",message:{id:v("success.record.publish")}}),Promise.resolve(q)}catch(T){return _(T),f(he("resolved")),Promise.reject(T)}}),[H,_,s,n,f,l]),$=(0,r.useCallback)((T,q)=>nt(void 0,null,function*(){const K=ve(`collection-types/${n}/${s}`);try{S.current("willEditEntry",q),f(he("submit-pending"));const{data:U}=yield ge.be.put(K,T);return S.current("didEditEntry",{trackerProperty:q}),l({type:"success",message:{id:v("success.record.save")}}),f(Ze(H(U))),f(he("resolved")),Promise.resolve(U)}catch(U){return S.current("didNotEditEntry",{error:U,trackerProperty:q}),_(U),f(he("resolved")),Promise.reject(U)}}),[H,_,n,s,f,l]),Y=(0,r.useCallback)(()=>nt(void 0,null,function*(){const T=ve(`collection-types/${n}/${s}/actions/unpublish`);f(he("unpublish-pending"));try{S.current("willUnpublishEntry");const{data:q}=yield ge.be.post(T);return S.current("didUnpublishEntry"),l({type:"success",message:{id:v("success.record.unpublish")}}),f(Ze(H(q))),f(he("resolved")),Promise.resolve(q)}catch(q){return f(he("resolved")),_(q),Promise.reject(q)}}),[H,_,s,n,f,l]);return t({componentsDataStructure:g,contentTypeDataStructure:h,data:E,isCreatingEntry:V,isLoadingForData:b,onDelete:N,onDeleteSucceeded:G,onPost:F,onPublish:Z,onPut:$,onUnpublish:Y,status:O,redirectionLink:x})};yr.defaultProps={id:null,origin:null},yr.propTypes={allLayoutData:o().exact({components:o().object.isRequired,contentType:o().shape({apiID:o().string.isRequired,attributes:o().object.isRequired,info:o().object.isRequired,isDisplayed:o().bool.isRequired,kind:o().string.isRequired,layouts:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,pluginOptions:o().object,settings:o().object.isRequired,uid:o().string.isRequired}).isRequired}).isRequired,children:o().func.isRequired,id:o().string,origin:o().string,slug:o().string.isRequired};const Ey=(0,r.memo)(yr,We());var vy=p(89793),Xt=p.n(vy),Cy=p(56236),Oy=p.n(Cy);const hr=(e,t,n,s)=>{const a=e.slice();return a.splice(t,1),a.splice(n,0,s),a},Py=(e,t,n)=>{const s=(i,u)=>R()(i,["attributes",u,"type"],""),a=(i,u)=>R()(i,["attributes",...u],""),l=(i,u)=>Object.keys(i).reduce((c,d)=>{const m=s(u,d),f=R()(i,d),g=a(u,[d,"component"]),h=a(u,[d,"repeatable"]);let E;switch(m){case"json":E=JSON.parse(f);break;case"time":{E=f,f&&f.split(":").length<3&&(E=`${f}:00`);break}case"media":a(u,[d,"multiple"])===!0?E=f?f.filter(b=>!(b instanceof File)):null:E=R()(f,0)instanceof File?null:R()(f,"id",null);break;case"component":h?E=f&&f.map(b=>l(b,n[g])):E=f&&l(f,n[g]);break;case"dynamiczone":E=f.map(b=>l(b,n[b.__component]));break;default:E=Ry(f,"id")}return c[d]=E,c},{});return l(e,t)},Ry=(e,t)=>ks()(e)?e.map(n=>n[t]?n[t]:n):qo()(e)?e[t]:e,My=Py;var Ty=p(51355),wy=p.n(Ty),Iy=p(95919),Dy=p.n(Iy),xy=p(78746),dt=p.n(xy),be=p(5173);function wt(e){return["integer","biginteger","decimal","float","number"].includes(e)}var Sy=Object.defineProperty,Ly=Object.defineProperties,Fy=Object.getOwnPropertyDescriptors,La=Object.getOwnPropertySymbols,ky=Object.prototype.hasOwnProperty,Ay=Object.prototype.propertyIsEnumerable,Fa=(e,t,n)=>t in e?Sy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ka=(e,t)=>{for(var n in t||(t={}))ky.call(t,n)&&Fa(e,n,t[n]);if(La)for(var n of La(t))Ay.call(t,n)&&Fa(e,n,t[n]);return e},Aa=(e,t)=>Ly(e,Fy(t));be.kM(be.nK,"defined",function(){return this.test("defined",y.translatedErrors.required,e=>e!==void 0)}),be.kM(be.IX,"notEmptyMin",function(e){return this.test("notEmptyMin",y.translatedErrors.min,t=>Re()(t)?!0:t.length>=e)}),be.kM(be.Z_,"isInferior",function(e,t){return this.test("isInferior",e,function(n){return!n||Number.isNaN(dt()(n))?!0:dt()(t)>=dt()(n)})}),be.kM(be.Z_,"isSuperior",function(e,t){return this.test("isSuperior",e,function(n){return!n||Number.isNaN(dt()(n))?!0:dt()(n)>=dt()(t)})});const jy=e=>R()(e,["attributes"],{}),br=(e,{components:t},n={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const s=jy(e);return be.Ry().shape(Object.keys(s).reduce((a,l)=>{const i=s[l];if(i.type!=="relation"&&i.type!=="component"&&i.type!=="dynamiczone"){const u=$y(i.type,i,n);a[l]=u}if(i.type==="relation"&&(a[l]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(i.relationType)?be.Ry().nullable():be.IX().nullable()),i.type==="component"){const u=br(t[i.component],{components:t},Aa(ka({},n),{isFromComponent:!0}));if(i.repeatable===!0){const{min:d,max:m,required:f}=i;let g=be.Vo(h=>{let E=be.IX().of(u);return d?f?E=E.min(d,y.translatedErrors.min):f!==!0&&Re()(h)?E=E.nullable():E=E.min(d,y.translatedErrors.min):f&&!n.isDraft&&(E=E.min(1,y.translatedErrors.required)),m&&(E=E.max(m,y.translatedErrors.max)),E});return a[l]=g,a}const c=be.Vo(d=>d!==void 0?i.required===!0&&!n.isDraft?u.defined():u.nullable():i.required===!0?be.Ry().defined():be.Ry().nullable());return a[l]=c,a}if(i.type==="dynamiczone"){let u=be.IX().of(be.Vo(({__component:m})=>br(t[m],{components:t},Aa(ka({},n),{isFromComponent:!0}))));const{max:c,min:d}=i;d?i.required?u=u.test("min",y.translatedErrors.min,m=>n.isCreatingEntry?m&&m.length>=d:m===void 0?!0:m!==null&&m.length>=d).test("required",y.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null):u=u.notEmptyMin(d):i.required&&!n.isDraft&&(u=u.test("required",y.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null)),c&&(u=u.max(c,y.translatedErrors.max)),a[l]=u}return a},{}))},$y=(e,t,n)=>{let s=be.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(e)&&(s=be.Z_()),e==="json"&&(s=be.nK(y.translatedErrors.json).test("isJSON",y.translatedErrors.json,a=>{if(a===void 0)return!0;try{return JSON.parse(a),!0}catch(l){return!1}}).nullable()),e==="email"&&(s=s.email(y.translatedErrors.email)),["number","integer","float","decimal"].includes(e)&&(s=be.Rx().transform(a=>Dy()(a)?void 0:a).typeError()),e==="biginteger"&&(s=be.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(e)&&(s=be.hT()),Object.keys(t).forEach(a=>{const l=t[a];if(!!l||!wy()(l)&&Number.isInteger(Math.floor(l))||l===0)switch(a){case"required":{n.isDraft||(e==="password"&&n.isCreatingEntry&&(s=s.required(y.translatedErrors.required)),e!=="password"&&(n.isCreatingEntry?s=s.required(y.translatedErrors.required):s=s.test("required",y.translatedErrors.required,i=>i===void 0&&!n.isFromComponent?!0:wt(e)?i===0?!0:!!i:e==="boolean"?i!==null:e==="date"||e==="datetime"?typeof i=="string"?!Re()(i):!Re()(i==null?void 0:i.toString()):!Re()(i))));break}case"max":{e==="biginteger"?s=s.isInferior(y.translatedErrors.max,l):s=s.max(l,y.translatedErrors.max);break}case"maxLength":s=s.max(l,y.translatedErrors.maxLength);break;case"min":{e==="biginteger"?s=s.isSuperior(y.translatedErrors.min,l):s=s.min(l,y.translatedErrors.min);break}case"minLength":{n.isDraft||(s=s.min(l,y.translatedErrors.minLength));break}case"regex":s=s.matches(new RegExp(l),{message:y.translatedErrors.regex,excludeEmptyString:!t.required});break;case"lowercase":["text","textarea","email","string"].includes(e)&&(s=s.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(e)&&(s=s.strict().uppercase());break;case"positive":wt(e)&&(s=s.positive());break;case"negative":wt(e)&&(s=s.negative());break;default:s=s.nullable()}}),s},ja=br;var By=Object.defineProperty,Ny=Object.defineProperties,Vy=Object.getOwnPropertyDescriptors,$a=Object.getOwnPropertySymbols,qy=Object.prototype.hasOwnProperty,Wy=Object.prototype.propertyIsEnumerable,Ba=(e,t,n)=>t in e?By(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Na=(e,t)=>{for(var n in t||(t={}))qy.call(t,n)&&Ba(e,n,t[n]);if($a)for(var n of $a(t))Wy.call(t,n)&&Ba(e,n,t[n]);return e},Va=(e,t)=>Ny(e,Vy(t));const zy={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null},Uy=(e,t)=>(0,qt.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{ne()(n,["modifiedData",...t.keys],e.componentsDataStructure[t.componentUid]);break}case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{let s=R()(e,["modifiedData",...t.keys],[]).slice();const a=Va(Na({},e.componentsDataStructure[t.componentUid]),{__temp_key__:Oo(s)+1});Array.isArray(s)?s.push(a):s=[a],ne()(n,["modifiedData",...t.keys],s),t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":{n.modifiedDZName=t.keys[0],t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);const s=Va(Na({},e.componentsDataStructure[t.componentUid]),{__component:t.componentUid}),a=R()(e,["modifiedData",...t.keys],null),l=a?[...a,s]:[s];ne()(n,["modifiedData",...t.keys],l);break}case"ADD_RELATION":{if(!Array.isArray(t.value)||!t.value.length)break;const s=t.value[0].value,a=R()(e,["modifiedData",...t.keys],null);if(!a){ne()(n,["modifiedData",...t.keys],[s]);break}ne()(n,["modifiedData",...t.keys],[...a,s]);break}case"INIT_FORM":{n.formErrors={},n.initialData=t.initialValues,n.modifiedData=t.initialValues,n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_FIELD":{const s=R()(e,["modifiedData",...t.pathToComponent]),a=R()(e,["modifiedData",...t.pathToComponent,t.dragIndex]),l=hr(s,t.dragIndex,t.hoverIndex,a);ne()(n,["modifiedData",...t.pathToComponent],l);break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:s,dynamicZoneName:a,shouldCheckErrors:l}=t;l&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=["modifiedData",...a.split(".")].join("."),u=R()(n,i),c=t.type==="MOVE_COMPONENT_UP"?s-1:s+1,d=u[s],m=hr(u,s,c,d);ne()(n,["modifiedData",...t.dynamicZoneName.split(".")],m);break}case"MOVE_FIELD":{const s=R()(e,["modifiedData",...t.keys],[]).slice(),a=R()(e,["modifiedData",...t.keys,t.dragIndex]),l=hr(s,t.dragIndex,t.overIndex,a);ne()(n,["modifiedData",...t.keys],l);break}case"ON_CHANGE":{const[s]=t.keys;if(t.shouldSetInitialValue&&ne()(n,["initialData",...t.keys],t.value),t.keys.length===2&&R()(e,["modifiedData",s])===null){ne()(n,["modifiedData",s],{[t.keys[1]]:t.value});break}ne()(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);const s=["modifiedData",...t.dynamicZoneName.split(".")].join(".");R()(n,s).splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const s=["modifiedData",...t.keys];ne()(n,s,null);break}case"REMOVE_PASSWORD_FIELD":{Oy()(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const s=t.keys.length-1,a=["modifiedData",...Zt()(t.keys,s)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=R()(e,a).slice();i.splice(parseInt(t.keys[s],10),1),ne()(n,a,i);break}case"REMOVE_RELATION":{const s=t.keys.split("."),a=s.length-1,l=["modifiedData",...Zt()(s,a)],i=R()(e,l).slice(),u=parseInt(s[a],10);i.splice(u,1),ne()(n,l,i);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}default:return n}});var Hy=Object.defineProperty,qa=Object.getOwnPropertySymbols,Gy=Object.prototype.hasOwnProperty,Zy=Object.prototype.propertyIsEnumerable,Wa=(e,t,n)=>t in e?Hy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,en=(e,t)=>{for(var n in t||(t={}))Gy.call(t,n)&&Wa(e,n,t[n]);if(qa)for(var n of qa(t))Zy.call(t,n)&&Wa(e,n,t[n]);return e},Er=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const vr=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:s,componentsDataStructure:a,contentTypeDataStructure:l,createActionAllowedFields:i,from:u,initialValues:c,isCreatingEntry:d,isLoadingForData:m,isSingleType:f,onPost:g,onPublish:h,onPut:E,onUnpublish:b,readActionAllowedFields:O,redirectToPreviousPage:x,slug:C,status:S,updateActionAllowedFields:I})=>{const[V,w]=(0,r.useReducer)(Uy,zy),{formErrors:W,initialData:H,modifiedData:_,modifiedDZName:N,shouldCheckErrors:G}=V,F=(0,y.useNotification)(),{lockApp:Z,unlockApp:$}=(0,y.useOverlayBlocker)(),Y=R()(e,["contentType"],{}),T=(0,r.useMemo)(()=>R()(Y,["options","draftAndPublish"],!1),[Y]),q=(0,r.useMemo)(()=>T&&!H.publishedAt,[T,H.publishedAt]),{trackUsage:K}=(0,y.useTracking)(),{formatMessage:U}=(0,A.useIntl)(),M=(0,r.useRef)(K),P=(0,r.useMemo)(()=>m||d?!1:t===!1&&n===!1,[m,d,t,n]);(0,r.useEffect)(()=>{S==="resolved"?$():Z()},[Z,$,S]),(0,r.useEffect)(()=>{m||rt()},[G]),(0,r.useEffect)(()=>{const te=Object.keys(W);if(te.length>0){const J=te[0],le=document.getElementById(J);le&&le.focus()}},[W]),(0,r.useEffect)(()=>{P&&F({type:"info",message:{id:v("permissions.not-allowed.update")}})},[P,F]),(0,r.useEffect)(()=>{w({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:a,contentTypeDataStructure:l})},[a,l]),(0,r.useEffect)(()=>{c&&w({type:"INIT_FORM",initialValues:c})},[c]);const Q=(0,r.useCallback)((te,J,le=!1)=>{M.current("didAddComponentToDynamicZone"),w({type:"ADD_COMPONENT_TO_DYNAMIC_ZONE",keys:te.split("."),componentUid:J,shouldCheckErrors:le})},[]),re=(0,r.useCallback)((te,J)=>{w({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:te.split("."),componentUid:J})},[]),ce=(0,r.useCallback)(({target:{name:te,value:J}})=>{w({type:"ADD_RELATION",keys:te.split("."),value:J})},[]),me=(0,r.useCallback)((te,J,le=!1)=>{w({type:"ADD_REPEATABLE_COMPONENT_TO_FIELD",keys:te.split("."),componentUid:J,shouldCheckErrors:le})},[]),Fe=(0,r.useMemo)(()=>{const te={isCreatingEntry:d,isDraft:q,isFromComponent:!1};return ja(Y,{components:e.components||{}},te)},[e.components,Y,d,q]),rt=(0,r.useCallback)((...te)=>Er(void 0,[...te],function*(J={}){let le={};const ot=qe()(_);Re()(ot)||ne()(ot,J.path,J.value);try{yield Fe.validate(ot,{abortEarly:!1})}catch(fn){le=(0,y.getYupInnerErrors)(fn),N&&(le=Object.keys(le).reduce((fc,eo)=>(eo.split(".")[0]!==N&&(fc[eo]=le[eo]),fc),{}))}w({type:"SET_FORM_ERRORS",errors:le})}),[N,_,Fe]),z=(0,r.useCallback)(({target:{name:te,value:J,type:le}},ot=!1)=>{let fn=J;if(["text","textarea","string","email","uid","select","select-one","number"].includes(le)&&!J&&J!==0&&(fn=null),le==="password"&&!J){w({type:"REMOVE_PASSWORD_FIELD",keys:te.split(".")});return}w({type:"ON_CHANGE",keys:te.split("."),value:fn,shouldSetInitialValue:ot})},[]),de=(0,r.useCallback)(te=>{const J=su(qe()(te),"__temp_key__");return My(J,Y,e.components)},[e.components,Y]),je=(0,r.useMemo)(()=>T?q?{status:"draft"}:{}:{},[T,q]),He=(0,r.useCallback)(te=>Er(void 0,null,function*(){te.preventDefault();let J={};try{yield Fe.validate(_,{abortEarly:!1})}catch(le){J=(0,y.getYupInnerErrors)(le)}try{if(Re()(J)){const le=de(_);d?yield g(le,je):yield E(le,je)}}catch(le){J=en(en({},J),(0,y.getAPIInnerErrors)(le,{getTrad:v}))}w({type:"SET_FORM_ERRORS",errors:J})}),[de,d,_,g,E,je,Fe]),ht=(0,r.useCallback)(()=>Er(void 0,null,function*(){const te=ja(Y,{components:R()(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1});let J={};try{yield te.validate(_,{abortEarly:!1})}catch(le){J=(0,y.getYupInnerErrors)(le)}try{Re()(J)&&(yield h())}catch(le){J=en(en({},J),(0,y.getAPIInnerErrors)(le,{getTrad:v}))}w({type:"SET_FORM_ERRORS",errors:J})}),[e,Y,d,_,h]),Qe=(0,r.useCallback)(te=>{const J=Object.keys(W).some(ot=>ot.split(".")[0]===te);return!Re()(W)&&J},[W]),Kr=(0,r.useCallback)((te,J)=>{M.current("changeComponentsOrder"),w({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:te,currentIndex:J,shouldCheckErrors:Qe(te)})},[Qe]),Yr=(0,r.useCallback)((te,J)=>{M.current("changeComponentsOrder"),w({type:"MOVE_COMPONENT_UP",dynamicZoneName:te,currentIndex:J,shouldCheckErrors:Qe(te)})},[Qe]),Ce=(0,r.useCallback)((te,J,le)=>{w({type:"MOVE_COMPONENT_FIELD",pathToComponent:te,dragIndex:J,hoverIndex:le})},[]),$e=(0,r.useCallback)((te,J,le)=>{w({type:"MOVE_FIELD",dragIndex:te,overIndex:J,keys:le.split(".")})},[]),Ke=(0,r.useCallback)(te=>{w({type:"REMOVE_RELATION",keys:te})},[]),Jr=(0,r.useCallback)((te,J)=>{M.current("removeComponentFromDynamicZone"),w({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:te,index:J,shouldCheckErrors:Qe(te)})},[Qe]),Ye=(0,r.useCallback)((te,J)=>{w({type:"REMOVE_COMPONENT_FROM_FIELD",keys:te.split("."),componentUid:J})},[]),mn=(0,r.useCallback)((te,J)=>{w({type:"REMOVE_REPEATABLE_FIELD",keys:te.split("."),componentUid:J})},[]),Xr=(0,r.useCallback)(()=>{w({type:"TRIGGER_FORM_VALIDATION"})},[]);return P?r.createElement(ee.Redirect,{to:u}):_?r.createElement(y.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:Q,addNonRepeatableComponentToField:re,addRelation:ce,addRepeatableComponentToField:me,allLayoutData:e,checkFormErrors:rt,createActionAllowedFields:i,formErrors:W,hasDraftAndPublish:T,initialData:H,isCreatingEntry:d,isSingleType:f,shouldNotRunValidations:q,status:S,layout:Y,modifiedData:_,moveComponentDown:Kr,moveComponentField:Ce,moveComponentUp:Yr,moveRelation:$e,onChange:z,onPublish:ht,onUnpublish:b,onRemoveRelation:Ke,readActionAllowedFields:O,redirectToPreviousPage:x,removeComponentFromDynamicZone:Jr,removeComponentFromField:Ye,removeRepeatableField:mn,slug:C,triggerFormValidation:Xr,updateActionAllowedFields:I}},r.createElement(r.Fragment,null,m||!d&&!H.id?r.createElement(oe.Main,{"aria-busy":"true"},r.createElement(y.LoadingIndicatorPage,null)):r.createElement(r.Fragment,null,r.createElement(ee.Prompt,{when:!Xt()(_,H),message:U({id:"global.prompt.unsaved"})}),r.createElement("form",{noValidate:!0,onSubmit:He},s)))):null};vr.defaultProps={from:"/",initialValues:null,redirectToPreviousPage:()=>{}},vr.propTypes={allLayoutData:o().object.isRequired,allowedActions:o().object.isRequired,children:o().node.isRequired,componentsDataStructure:o().object.isRequired,contentTypeDataStructure:o().object.isRequired,createActionAllowedFields:o().array.isRequired,from:o().string,initialValues:o().object,isCreatingEntry:o().bool.isRequired,isLoadingForData:o().bool.isRequired,isSingleType:o().bool.isRequired,onPost:o().func.isRequired,onPublish:o().func.isRequired,onPut:o().func.isRequired,onUnpublish:o().func.isRequired,readActionAllowedFields:o().array.isRequired,redirectToPreviousPage:o().func,slug:o().string.isRequired,status:o().string.isRequired,updateActionAllowedFields:o().array.isRequired};const _y=vr,pt=e=>ve(`single-types/${e}`),Qy=e=>Object.values(e||{}).reduce((t,n)=>Object.assign(t,n),{});var Ky=Object.defineProperty,tn=Object.getOwnPropertySymbols,za=Object.prototype.hasOwnProperty,Ua=Object.prototype.propertyIsEnumerable,Ha=(e,t,n)=>t in e?Ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ga=(e,t)=>{for(var n in t||(t={}))za.call(t,n)&&Ha(e,n,t[n]);if(tn)for(var n of tn(t))Ua.call(t,n)&&Ha(e,n,t[n]);return e},Yy=(e,t)=>{var n={};for(var s in e)za.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&tn)for(var s of tn(e))t.indexOf(s)<0&&Ua.call(e,s)&&(n[s]=e[s]);return n};const Za=(e={})=>{const t=Ga(Ga({},e),Qy(e.plugins)),{plugins:n}=t,s=Yy(t,["plugins"]);return`?${(0,Ne.stringify)(s,{encode:!1})}`};var Jy=Object.defineProperty,_a=Object.getOwnPropertySymbols,Xy=Object.prototype.hasOwnProperty,eh=Object.prototype.propertyIsEnumerable,Qa=(e,t,n)=>t in e?Jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,th=(e,t)=>{for(var n in t||(t={}))Xy.call(t,n)&&Qa(e,n,t[n]);if(_a)for(var n of _a(t))eh.call(t,n)&&Qa(e,n,t[n]);return e},mt=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const Ka=({allLayoutData:e,children:t,slug:n})=>{const{trackUsage:s}=(0,y.useTracking)(),{push:a}=(0,ee.useHistory)(),{setCurrentStep:l}=(0,y.useGuidedTour)(),i=(0,r.useRef)(s),[u,c]=(0,r.useState)(!0),[{query:d,rawQuery:m}]=(0,y.useQueryParams)(),f=Za(d),g=(0,y.useNotification)(),h=(0,fe.useDispatch)(),{componentsDataStructure:E,contentTypeDataStructure:b,data:O,isLoading:x,status:C}=(0,fe.useSelector)(Da),S=(0,r.useCallback)(G=>{const F=xo(G,e.contentType,e.components);return(0,y.formatContentTypeData)(F,e.contentType,e.components)},[e]);(0,r.useEffect)(()=>()=>{h(wa())},[h]),(0,r.useEffect)(()=>{const G=Object.keys(e.components).reduce(($,Y)=>{const T=$t(R()(e,["components",Y,"attributes"],{}),e.components);return $[Y]=(0,y.formatContentTypeData)(T,e.components[Y],e.components),$},{}),F=$t(e.contentType.attributes,e.components),Z=(0,y.formatContentTypeData)(F,e.contentType,e.components);h(Ia(G,Z))},[e,h]),(0,r.useEffect)(()=>{const F=Se().CancelToken.source();return($=>mt(void 0,null,function*(){h(Jt()),c(!0);try{const{data:Y}=yield(0,ge.be)(pt(`${n}${f}`),{cancelToken:$.token});h(fr(S(Y))),c(!1)}catch(Y){if(Se().isCancel(Y))return;const T=R()(Y,"response.status",null);T===404&&h(gr(m,!0)),T===403&&(g({type:"info",message:{id:v("permissions.not-allowed.update")}}),a("/"))}}))(F),()=>F.cancel("Operation canceled by the user.")},[S,a,n,h,f,m,g]);const I=(0,r.useCallback)(G=>{const F=G.response.data;let Z=R()(F,["error","message"],"Bad Request");Array.isArray(Z)&&(Z=R()(Z,["0","messages","0","id"])),typeof Z=="string"&&g({type:"warning",message:Z})},[g]),V=(0,r.useCallback)(G=>mt(void 0,null,function*(){try{i.current("willDeleteEntry",G);const{data:F}=yield ge.be.delete(pt(`${n}${f}`));return g({type:"success",message:{id:v("success.record.delete")}}),i.current("didDeleteEntry",G),Promise.resolve(F)}catch(F){return i.current("didNotDeleteEntry",th({error:F},G)),I(F),Promise.reject(F)}}),[n,I,g,f]),w=(0,r.useCallback)(()=>{c(!0),h(gr(m,!0))},[h,m]),W=(0,r.useCallback)((G,F)=>mt(void 0,null,function*(){const Z=pt(`${n}${m}`);try{h(he("submit-pending"));const{data:$}=yield ge.be.put(Z,G);return i.current("didCreateEntry",F),g({type:"success",message:{id:v("success.record.save")}}),l("contentManager.success"),h(Ze(S($))),c(!1),h(he("resolved")),Promise.resolve($)}catch($){return i.current("didNotCreateEntry",{error:$,trackerProperty:F}),I($),h(he("resolved")),Promise.reject($)}}),[S,I,n,h,m,g,l]),H=(0,r.useCallback)(()=>mt(void 0,null,function*(){try{i.current("willPublishEntry");const G=pt(`${n}/actions/publish${f}`);h(he("publish-pending"));const{data:F}=yield ge.be.post(G);return i.current("didPublishEntry"),g({type:"success",message:{id:v("success.record.publish")}}),h(Ze(S(F))),h(he("resolved")),Promise.resolve(F)}catch(G){return I(G),h(he("resolved")),Promise.reject(G)}}),[S,I,n,f,h,g]),_=(0,r.useCallback)((G,F)=>mt(void 0,null,function*(){const Z=pt(`${n}${m}`);try{i.current("willEditEntry",F),h(he("submit-pending"));const{data:$}=yield ge.be.put(Z,G);return g({type:"success",message:{id:v("success.record.save")}}),i.current("didEditEntry",{trackerProperty:F}),h(Ze(S($))),h(he("resolved")),Promise.resolve($)}catch($){return I($),i.current("didNotEditEntry",{error:$,trackerProperty:F}),h(he("resolved")),Promise.reject($)}}),[S,I,n,h,m,g]),N=(0,r.useCallback)(()=>mt(void 0,null,function*(){const G=pt(`${n}/actions/unpublish${f}`);h(he("unpublish-pending"));try{i.current("willUnpublishEntry");const{data:F}=yield ge.be.post(G);i.current("didUnpublishEntry"),g({type:"success",message:{id:v("success.record.unpublish")}}),h(Ze(S(F))),h(he("resolved"))}catch(F){h(he("resolved")),I(F)}}),[S,g,I,n,h,f]);return t({componentsDataStructure:E,contentTypeDataStructure:b,data:O,isCreatingEntry:u,isLoadingForData:x,onDelete:V,onDeleteSucceeded:w,onPost:W,onPublish:H,onPut:_,onUnpublish:N,redirectionLink:"/",status:C})};Ka.propTypes={allLayoutData:o().shape({components:o().object.isRequired,contentType:o().object.isRequired}).isRequired,children:o().func.isRequired,slug:o().string.isRequired};const nh=(0,r.memo)(Ka);var rh=p(57235),oh=p.n(rh),sh=Object.defineProperty,Ya=Object.getOwnPropertySymbols,ah=Object.prototype.hasOwnProperty,ih=Object.prototype.propertyIsEnumerable,Ja=(e,t,n)=>t in e?sh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Xa=(e,t)=>{for(var n in t||(t={}))ah.call(t,n)&&Ja(e,n,t[n]);if(Ya)for(var n of Ya(t))ih.call(t,n)&&Ja(e,n,t[n]);return e};function lh(e,t){return function(n){const s=t();return r.createElement(e,Xa(Xa({},n),s))}}const ch=lh;function uh(){const{initialData:e,hasDraftAndPublish:t}=(0,y.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const dh=uh;var ph=Object.defineProperty,ei=Object.getOwnPropertySymbols,mh=Object.prototype.hasOwnProperty,fh=Object.prototype.propertyIsEnumerable,ti=(e,t,n)=>t in e?ph(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gh=(e,t)=>{for(var n in t||(t={}))mh.call(t,n)&&ti(e,n,t[n]);if(ei)for(var n of ei(t))fh.call(t,n)&&ti(e,n,t[n]);return e};const yh=(0,k.default)(oh())`
  width: ${(0,y.pxToRem)(6)};
  height: ${(0,y.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,ni=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,A.useIntl)();if(!e)return null;const s={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},a=t?s.published:s.draft;return r.createElement(D.Box,gh({hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5},a.box),r.createElement(D.Box,{as:j.Flex},r.createElement(yh,{$bulletColor:a.bulletColor}),r.createElement(D.Box,{paddingLeft:3},r.createElement(L.Typography,{textColor:a.textColor},n({id:v("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"),r.createElement(L.Typography,{fontWeight:"bold",textColor:a.textColor},t&&n({id:v("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:v("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})))))};ni.propTypes={hasDraftAndPublish:o().bool.isRequired,isPublished:o().bool.isRequired};const hh=ch(ni,dh),Cr=60*1e3,Or=Cr*60,nn=Or*24,ri=nn*30,oi=nn*365,bh=e=>e<Cr?{unit:"second",value:-Math.round(e/1e3)}:e<Or?{unit:"minute",value:-Math.round(e/Cr)}:e<nn?{unit:"hour",value:-Math.round(e/Or)}:e<ri?{unit:"day",value:-Math.round(e/nn)}:e<oi?{unit:"month",value:-Math.round(e/ri)}:{unit:"year",value:-Math.round(e/oi)};var si=p(7602);const Eh=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,A.useIntl)(),{initialData:n,isCreatingEntry:s}=(0,y.useCMEditViewDataManager)(),a=(0,r.useRef)(Date.now()),l=(c,d)=>{var m,f,g;const h=((m=n[d])==null?void 0:m.firstname)||"",E=((f=n[d])==null?void 0:f.lastname)||"",O=((g=n[d])==null?void 0:g.username)||(0,si.Pp)(h,E),C=(n[c]?new Date(n[c]).getTime():Date.now())-a.current,{unit:S,value:I}=bh(-C);return{at:t(I,S,{numeric:"auto"}),by:s?"-":O}},i=l("updatedAt","updatedBy"),u=l("createdAt","createdBy");return r.createElement(D.Box,null,r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600",id:"additional-informations"},e({id:v("containers.Edit.information"),defaultMessage:"Information"})),r.createElement(D.Box,{paddingTop:2,paddingBottom:6},r.createElement(Ut.Divider,null)),r.createElement(se.Stack,{spacing:4},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.created"),defaultMessage:"Created"})),r.createElement(L.Typography,null,u.at)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(L.Typography,null,u.by)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"})),r.createElement(L.Typography,null,i.at)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(L.Typography,null,i.by))))};var vh=p(98599),rn=p.n(vh),ke=p(49137),Ch=p(88677),ft=p.n(Ch),Oh=Object.defineProperty,ai=Object.getOwnPropertySymbols,Ph=Object.prototype.hasOwnProperty,Rh=Object.prototype.propertyIsEnumerable,ii=(e,t,n)=>t in e?Oh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,li=(e,t)=>{for(var n in t||(t={}))Ph.call(t,n)&&ii(e,n,t[n]);if(ai)for(var n of ai(t))Rh.call(t,n)&&ii(e,n,t[n]);return e};function Mh(e,t){return function(n){const s=t();return r.createElement(e,li(li({},n),s))}}const Th=Mh,wh=(e,t,n)=>{const s=(l,i)=>Object.keys(l).reduce((u,c)=>{const d=(0,B.get)(i,["attributes",c,"type"],"string"),m=(0,B.get)(i,["attributes",c,"relationType"],""),f=m.toLowerCase().includes("morph"),g=["oneWay","oneToOne","manyToOne"],h=l[c];if((0,B.isNil)(h))return u;if(d==="dynamiczone"&&h.forEach(E=>{const b=(0,B.get)(n,E.__component,{});u+=s(E,b)}),d==="component"){const E=(0,B.get)(i,["attributes",c,"repeatable"],!1),b=(0,B.get)(i,["attributes",c,"component"],""),O=(0,B.get)(n,b,{});E?h.forEach(x=>{u+=s(x,O)}):u+=s(h,O)}return d==="relation"&&!f&&(g.includes(m)?(0,B.has)(h,"publishedAt")&&(0,B.isEmpty)(h.publishedAt)&&(u+=1):h.forEach(E=>{(0,B.has)(E,"publishedAt")&&(0,B.isEmpty)(E.publishedAt)&&(u+=1)})),u},0);return s(e,t,n)};function Ih(){const{allLayoutData:e,initialData:t,isCreatingEntry:n,isSingleType:s,status:a,layout:l,hasDraftAndPublish:i,modifiedData:u,onPublish:c,onUnpublish:d}=(0,y.useCMEditViewDataManager)();return{componentLayouts:e.components,initialData:t,isCreatingEntry:n,isSingleType:s,status:a,layout:l,hasDraftAndPublish:i,modifiedData:u,onPublish:c,onUnpublish:d}}const Dh=Ih,ci=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},componentLayouts:s,initialData:a,isCreatingEntry:l,isSingleType:i,hasDraftAndPublish:u,layout:c,modifiedData:d,onPublish:m,onUnpublish:f,status:g})=>{const{goBack:h}=(0,ee.useHistory)(),[E,b]=(0,r.useState)(!1),[O,x]=(0,r.useState)(!1),{formatMessage:C}=(0,A.useIntl)(),S=(0,r.useRef)(0),I=R()(c,["settings","mainField"],"id"),V=R()(c,["info","displayName"],"NOT FOUND"),w=!Xt()(a,d)||l&&!Re()(d);let H=C({id:v("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!l&&!i&&(H=a[I]||V),i&&(H=V);const _=()=>{const T=wh(d,c,s);return S.current=T,T};let N=null;if(l&&t&&(N=r.createElement(se.Stack,{horizontal:!0,spacing:2},u&&r.createElement(ye.Button,{disabled:!0,startIcon:r.createElement(ft(),null),variant:"secondary"},C({id:"app.utils.publish",defaultMessage:"Publish"})),r.createElement(ye.Button,{disabled:!w,isLoading:g==="submit-pending",type:"submit"},C({id:v("containers.Edit.submit"),defaultMessage:"Save"})))),!l&&e){const T=u&&n,q=!Re()(a.publishedAt),K=q?g==="unpublish-pending":g==="publish-pending",U=q?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},M=q?()=>b(!0):()=>{_()===0?m():x(!0)};N=r.createElement(j.Flex,null,T&&r.createElement(ye.Button,{disabled:w,loading:K,onClick:M,startIcon:r.createElement(ft(),null),variant:"secondary"},C(U)),r.createElement(D.Box,{paddingLeft:T?2:0},r.createElement(ye.Button,{disabled:!w,loading:g==="submit-pending",type:"submit"},C({id:v("containers.Edit.submit"),defaultMessage:"Save"}))))}const G=()=>b(T=>!T),F=()=>x(T=>!T),Z=()=>{F(),S.current=0,m()},$=()=>{G(),f()},Y=`${C({id:v("api.id"),defaultMessage:"API ID "})} : ${c.apiID}`;return r.createElement(r.Fragment,null,r.createElement(X.HeaderLayout,{title:H.toString(),primaryAction:N,subtitle:Y,navigationAction:r.createElement(y.Link,{startIcon:r.createElement(rn(),null),onClick:T=>{T.preventDefault(),h()},to:"/"},C({id:"global.back",defaultMessage:"Back"}))}),E&&r.createElement(ke.Dialog,{onClose:G,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:E},r.createElement(ke.DialogBody,{icon:r.createElement(Tt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},C({id:v("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>r.createElement("br",null)}))),r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},C({id:v("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"}))))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:G,variant:"tertiary"},C({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(ye.Button,{variant:"danger-light",onClick:$},C({id:"components.popUpWarning.button.confirm",defaultMessage:"Yes, confirm"}))})),O&&r.createElement(ke.Dialog,{onClose:F,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:O},r.createElement(ke.DialogBody,{icon:r.createElement(Tt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},S.current,C({id:v("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, =0 { of your content relations is} one { of your content relations is} other { of your content relations are}}</b> not published yet.<br></br>It might engender broken links and errors on your project."},{br:()=>r.createElement("br",null),b:T=>r.createElement(L.Typography,{fontWeight:"bold"},T),count:S.current}))),r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},C({id:v("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish it?"}))))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:F,variant:"tertiary"},C({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(ye.Button,{variant:"success",onClick:Z},C({id:v("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Yes, publish"}))})))};ci.propTypes={allowedActions:o().shape({canUpdate:o().bool.isRequired,canCreate:o().bool.isRequired,canPublish:o().bool.isRequired}).isRequired,componentLayouts:o().object.isRequired,initialData:o().object.isRequired,isCreatingEntry:o().bool.isRequired,isSingleType:o().bool.isRequired,status:o().string.isRequired,layout:o().object.isRequired,hasDraftAndPublish:o().bool.isRequired,modifiedData:o().object.isRequired,onPublish:o().func.isRequired,onUnpublish:o().func.isRequired};const xh=(0,r.memo)(ci,We()),Sh=Th(xh,Dh),Lh=(e,t)=>{const n=l=>(0,B.get)(t,[l,"type"],"");let s=0;const a=[];for(let l of e){const i=l.some(({name:u})=>n(u)==="dynamiczone");a[s]||(a[s]=[]),i?(s=s===0&&(0,B.isEmpty)(a[0])?0:s+1,a[s]||(a[s]=[]),a[s].push(l),s+=1):a[s].push(l)}return a.filter(l=>l.length>0)},Fh=(e,t)=>{const n=s=>{const a=(0,y.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${s}`,subject:t}]);return(0,B.uniq)((0,B.flatMap)(a,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}};var kh=Object.defineProperty,ui=Object.getOwnPropertySymbols,Ah=Object.prototype.hasOwnProperty,jh=Object.prototype.propertyIsEnumerable,di=(e,t,n)=>t in e?kh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pi=(e,t)=>{for(var n in t||(t={}))Ah.call(t,n)&&di(e,n,t[n]);if(ui)for(var n of ui(t))jh.call(t,n)&&di(e,n,t[n]);return e};function $h(e,t){return function(n){const s=t();return r.createElement(e,pi(pi({},n),s))}}const Bh=$h;function Nh(){const{hasDraftAndPublish:e,modifiedData:t}=(0,y.useCMEditViewDataManager)();let n={};return e&&(n=(0,B.isEmpty)(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const Vh=Nh;var qh=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const mi=({isCreatingEntry:e,onDelete:t,onDeleteSucceeded:n,trackerProperty:s})=>{const[a,l]=(0,r.useState)(!1),[i,u]=(0,r.useState)(!1),{formatMessage:c}=(0,A.useIntl)(),d=(0,y.useNotification)(),m=()=>l(g=>!g),f=()=>qh(void 0,null,function*(){try{u(!0),yield t(s),u(!1),m(),n()}catch(g){const h=R()(g,"response.payload.message",c({id:v("error.record.delete")}));u(!1),m(),d({type:"warning",message:h})}});return e?null:r.createElement(r.Fragment,null,r.createElement(ye.Button,{onClick:m,size:"S",startIcon:r.createElement(Be(),null),variant:"danger-light"},c({id:v("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})),r.createElement(y.ConfirmDialog,{isConfirmButtonLoading:i,isOpen:a,onConfirm:f,onToggleDialog:m}))};mi.propTypes={isCreatingEntry:o().bool.isRequired,onDelete:o().func.isRequired,onDeleteSucceeded:o().func.isRequired,trackerProperty:o().object.isRequired};const Wh=(0,r.memo)(mi,We()),zh=Bh(Wh,Vh);var Uh=Object.defineProperty,Hh=Object.defineProperties,Gh=Object.getOwnPropertyDescriptors,fi=Object.getOwnPropertySymbols,Zh=Object.prototype.hasOwnProperty,_h=Object.prototype.propertyIsEnumerable,gi=(e,t,n)=>t in e?Uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yi=(e,t)=>{for(var n in t||(t={}))Zh.call(t,n)&&gi(e,n,t[n]);if(fi)for(var n of fi(t))_h.call(t,n)&&gi(e,n,t[n]);return e},Qh=(e,t)=>Hh(e,Gh(t));const hi=De.Z.contentManager,Kh=[{action:"plugin::content-type-builder.read",subject:null}],Pr=({allowedActions:e,isSingleType:t,goBack:n,layout:s,slug:a,id:l,origin:i,userPermissions:u})=>{const{trackUsage:c}=(0,y.useTracking)(),{formatMessage:d}=(0,A.useIntl)(),{createActionAllowedFields:m,readActionAllowedFields:f,updateActionAllowedFields:g}=(0,r.useMemo)(()=>Fh(u,a),[u,a]),h=(0,r.useMemo)(()=>t?hi.singleTypesConfigurations:hi.collectionTypesConfigurations,[t]),E=`/content-manager/${t?"singleType":"collectionType"}/${a}/configurations/edit`,b=R()(s,["contentType"],{}),O=(0,r.useMemo)(()=>t?nh:Ey,[t]),x=(0,r.useCallback)(V=>V.every(w=>w.every(W=>W.fieldSchema.type==="dynamiczone")),[]),C=(0,r.useMemo)(()=>b.layouts?Lh(b.layouts.edit,b.attributes):[],[b]),S=b.layouts.editRelations,I=S.length;return r.createElement(O,{allLayoutData:s,slug:a,id:l,origin:i},({componentsDataStructure:V,contentTypeDataStructure:w,data:W,isCreatingEntry:H,isLoadingForData:_,onDelete:N,onDeleteSucceeded:G,onPost:F,onPublish:Z,onPut:$,onUnpublish:Y,redirectionLink:T,status:q})=>r.createElement(_y,{allowedActions:e,allLayoutData:s,createActionAllowedFields:m,componentsDataStructure:V,contentTypeDataStructure:w,from:T,initialValues:W,isCreatingEntry:H,isLoadingForData:_,isSingleType:t,onPost:F,onPublish:Z,onPut:$,onUnpublish:Y,readActionAllowedFields:f,redirectToPreviousPage:n,slug:a,status:q,updateActionAllowedFields:g},r.createElement(oe.Main,{"aria-busy":q!=="resolved"},r.createElement(Sh,{allowedActions:e}),r.createElement(X.ContentLayout,null,r.createElement(ie.Grid,{gap:4},r.createElement(ie.GridItem,{col:9,s:12},r.createElement(se.Stack,{spacing:6},C.map((K,U)=>{if(x(K)){const{0:{0:{name:M,fieldSchema:P,metadatas:Q,labelAction:re}}}=K;return r.createElement(D.Box,{key:U},r.createElement(ie.Grid,{gap:4},r.createElement(ie.GridItem,{col:12,s:12,xs:12},r.createElement(mr,{name:M,fieldSchema:P,labelAction:re,metadatas:Q}))))}return r.createElement(D.Box,{key:U,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150"},r.createElement(se.Stack,{spacing:6},K.map((M,P)=>r.createElement(ie.Grid,{gap:4,key:P},M.map(({fieldSchema:Q,labelAction:re,metadatas:ce,name:me,size:Fe})=>{if(Q.type==="component"){const{component:z,max:de,min:je,repeatable:He=!1,required:ht=!1}=Q;return r.createElement(ie.GridItem,{col:Fe,s:12,xs:12,key:z},r.createElement(Yt,{componentUid:z,labelAction:re,isRepeatable:He,intlLabel:{id:ce.label,defaultMessage:ce.label},max:de,min:je,name:me,required:ht}))}return r.createElement(ie.GridItem,{col:Fe,key:me,s:12,xs:12},r.createElement(nr,{fieldSchema:Q,keys:me,labelAction:re,metadatas:ce}))})))))}))),r.createElement(ie.GridItem,{col:3,s:12},r.createElement(se.Stack,{spacing:2},r.createElement(hh,null),r.createElement(D.Box,{as:"aside","aria-labelledby":"additional-informations",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(Eh,null),r.createElement(Gt,{area:"contentManager.editView.informations"})),I>0&&r.createElement(D.Box,{as:"aside","aria-labelledby":"relations-title",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600",id:"relations-title"},d({id:v("containers.Edit.relations"),defaultMessage:"{number, plural, =0 {relations} one {relation} other {relations}}"},{number:I})),r.createElement(D.Box,{paddingTop:2,paddingBottom:6},r.createElement(Ut.Divider,null)),r.createElement(se.Stack,{spacing:4},S.map(({name:K,fieldSchema:U,labelAction:M,metadatas:P,queryInfos:Q})=>r.createElement(Ys,Qh(yi(yi({},U),P),{key:K,description:P.description,intlLabel:{id:P.label,defaultMessage:P.label},labelAction:M,name:K,relationsType:U.relationType,queryInfos:Q,placeholder:P.placeholder?{id:P.placeholder,defaultMessage:P.placeholder}:null}))))),r.createElement(D.Box,{as:"aside","aria-labelledby":"links"},r.createElement(se.Stack,{spacing:2},r.createElement(Gt,{area:"contentManager.editView.right-links",slug:a}),a!=="strapi::administrator"&&r.createElement(y.CheckPermissions,{permissions:Kh},r.createElement(y.LinkButton,{onClick:()=>{c("willEditEditLayout")},size:"S",startIcon:r.createElement(it(),null),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${a}`,variant:"secondary"},d({id:v("link-to-ctb"),defaultMessage:"Edit the model"}))),r.createElement(y.CheckPermissions,{permissions:h},r.createElement(y.LinkButton,{size:"S",startIcon:r.createElement(Gu(),null),style:{width:"100%"},to:E,variant:"secondary"},d({id:"app.links.configure-view",defaultMessage:"Configure the view"}))),e.canDelete&&r.createElement(zh,{isCreatingEntry:H,onDelete:N,onDeleteSucceeded:G}))))))))))};Pr.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},Pr.propTypes={allowedActions:o().shape({canRead:o().bool.isRequired,canUpdate:o().bool.isRequired,canCreate:o().bool.isRequired,canDelete:o().bool.isRequired}).isRequired,layout:o().shape({components:o().object.isRequired,contentType:o().shape({uid:o().string.isRequired,settings:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().object.isRequired}).isRequired}).isRequired,id:o().string,isSingleType:o().bool,goBack:o().func.isRequired,origin:o().string,slug:o().string.isRequired,userPermissions:o().array};const Yh=(0,r.memo)(Pr);var Jh=Object.defineProperty,Xh=Object.defineProperties,eb=Object.getOwnPropertyDescriptors,bi=Object.getOwnPropertySymbols,tb=Object.prototype.hasOwnProperty,nb=Object.prototype.propertyIsEnumerable,Ei=(e,t,n)=>t in e?Jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rb=(e,t)=>{for(var n in t||(t={}))tb.call(t,n)&&Ei(e,n,t[n]);if(bi)for(var n of bi(t))nb.call(t,n)&&Ei(e,n,t[n]);return e},ob=(e,t)=>Xh(e,eb(t));const Rr=e=>{const t=(0,r.useMemo)(()=>vo(e.slug),[e.slug]),{isLoading:n,allowedActions:s}=(0,y.useRBAC)(t,e.userPermissions);return n?r.createElement(y.LoadingIndicatorPage,null):r.createElement(Yh,ob(rb({},e),{allowedActions:s}))};Rr.defaultProps={permissions:[]},Rr.propTypes={permissions:o().array,slug:o().string.isRequired,userPermissions:o().array.isRequired};const sb=(0,r.memo)(Rr,We());var ab=Object.defineProperty,ib=Object.defineProperties,lb=Object.getOwnPropertyDescriptors,on=Object.getOwnPropertySymbols,vi=Object.prototype.hasOwnProperty,Ci=Object.prototype.propertyIsEnumerable,Oi=(e,t,n)=>t in e?ab(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cb=(e,t)=>{for(var n in t||(t={}))vi.call(t,n)&&Oi(e,n,t[n]);if(on)for(var n of on(t))Ci.call(t,n)&&Oi(e,n,t[n]);return e},ub=(e,t)=>ib(e,lb(t)),db=(e,t)=>{var n={};for(var s in e)vi.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&on)for(var s of on(e))t.indexOf(s)<0&&Ci.call(e,s)&&(n[s]=e[s]);return n};const Pi=e=>{var t=e,{layout:n}=t,s=db(t,["layout"]);const a=(0,fe.useSelector)(co),l=(0,fe.useDispatch)(),[{query:i}]=(0,y.useQueryParams)(),{runHookWaterfall:u}=(0,y.useStrapiApp)(),c=_o(i,s.slug,"editView");return(0,r.useEffect)(()=>{const d=u(zt.Eo,{layout:n,query:i});return l(zu(d.layout,i)),()=>{l(Wu())}},[n,l,i,u]),!a||!c?r.createElement(y.LoadingIndicatorPage,null):r.createElement(sb,ub(cb({},s),{layout:a,userPermissions:c}))};Pi.propTypes={layout:o().shape({components:o().object.isRequired,contentType:o().shape({uid:o().string.isRequired,settings:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().object.isRequired}).isRequired}).isRequired};const sn=Pi;var Mr=p(84968),pb=p(23940),It=p.n(pb),mb=p(88423),Ri=p.n(mb),fb=p(3704),gb=p.n(fb),yb=Object.defineProperty,hb=Object.defineProperties,bb=Object.getOwnPropertyDescriptors,Mi=Object.getOwnPropertySymbols,Eb=Object.prototype.hasOwnProperty,vb=Object.prototype.propertyIsEnumerable,Ti=(e,t,n)=>t in e?yb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cb=(e,t)=>{for(var n in t||(t={}))Eb.call(t,n)&&Ti(e,n,t[n]);if(Mi)for(var n of Mi(t))vb.call(t,n)&&Ti(e,n,t[n]);return e},Ob=(e,t)=>hb(e,bb(t));const Tr=e=>e.reduce((t,n)=>t+n.size,0),Pb=e=>e.reduce((t,n,s)=>{const a={rowId:s,rowContent:n};return t.concat(a)},[]),gt=e=>e.reduce((t,n)=>{let s=[];const a=n.rowContent.reduce((u,c)=>{const d=Tr(u);return c.name==="_TEMP_"||(d+c.size<=12?u.push(c):s.push(c)),u},[]),l=t.length===0?0:Math.max.apply(Math,t.map(u=>u.rowId))+1,i=Tr(a);if(i<12&&a.push({name:"_TEMP_",size:12-i}),t.push({rowId:l,rowContent:a}),s.length>0){const u=Tr(s);u<12&&s.push({name:"_TEMP_",size:12-u}),t.push({rowId:l+1,rowContent:s}),s=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),Rb=e=>e.reduce((t,n)=>{const s=n.rowContent.filter(a=>a.name!=="_TEMP_");return t.concat([s])},[]),wi=e=>{switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}},Mb=(e,t=[])=>t.reduce((n,{rowContent:s})=>{var a,l;const i=(l=(a=s.find(u=>u.name===e))==null?void 0:a.size)!=null?l:null;return i&&(n=i),n},null),Tb=(e,t,n=[])=>n.map(s=>(s.rowContent=s.rowContent.map(a=>a.name===e?Ob(Cb({},a),{size:t}):a),s)),wr={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},wb=(e=wr,t)=>(0,qt.default)(e,n=>{var s,a,l;const i=["modifiedData","layouts","edit"],u=["modifiedData","layouts","editRelations"];switch(t.type){case"ADD_RELATION":{const c=R()(e,u,[]);ne()(n,u,[...c,t.name]);break}case"MOVE_RELATION":{const c=R()(e,u,[]),{fromIndex:d,toIndex:m}=t;ne()(n,u,vt(c,d,m));break}case"MOVE_ROW":{const c=R()(e,i,[]),{fromIndex:d,toIndex:m}=t;ne()(n,i,vt(c,d,m));break}case"ON_ADD_FIELD":{const c=qe()(e),d=wi(R()(c,["modifiedData","attributes",t.name,"type"],"")),m=R()(c,i,[]).length,f=[...i,m-1,"rowContent"],g=R()(c,f,[]);let h=R()(c,i,[]);Array.isArray(g)?ne()(h,[m>0?m-1:0,"rowContent"],[...g,{name:t.name,size:d}]):ne()(h,[m>0?m-1:0,"rowContent"],[{name:t.name,size:d}]);const E=gt(h);ne()(n,i,E);break}case"ON_CHANGE":{ne()(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{ne()(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{ne()(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const c=R()(e,[...i,t.rowIndex,"rowContent"],[]);let d=qe()(e);if(c.length===1||c.length===2&&R()(c,[1,"name"],"")==="_TEMP_"){const f=R()(e,i,[]);ne()(d,i,f.filter((g,h)=>t.rowIndex!==h))}else ne()(d,[...i,t.rowIndex,"rowContent"],c.filter((f,g)=>g!==t.fieldIndex));const m=gt(R()(d,i,[]));ne()(n,i,m);break}case"REMOVE_RELATION":{const c=R()(e,u,[]);ne()(n,u,c.filter((d,m)=>t.index!==m));break}case"REORDER_DIFF_ROW":{const c=R()(e,[...i,t.dragRowIndex,"rowContent"],[]),d=R()(e,[...i,t.hoverRowIndex,"rowContent"],[]),m=R()(e,[...i,t.dragRowIndex,"rowContent",t.dragIndex],{}),f=[...d,m];let g=qe()(e);ne()(g,[...i,t.dragRowIndex,"rowContent"],c.filter((E,b)=>t.dragIndex!==b)),ne()(g,[...i,t.hoverRowIndex,"rowContent"],vt(f,f.length-1,t.hoverIndex));const h=gt(R()(g,i,[]));ne()(n,i,h);break}case"REORDER_ROW":{const c=qe()(e),d=R()(c,[...i,t.dragRowIndex,"rowContent"],[]);ne()(c,[...i,t.dragRowIndex,"rowContent"],vt(d,t.dragIndex,t.hoverIndex));const m=gt(R()(c,i,[]));ne()(n,i,m);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:R()(e,["modifiedData","metadatas",t.name,"edit"],{}),size:(l=Mb(t.name,(a=(s=e.modifiedData)==null?void 0:s.layouts)==null?void 0:a.edit))!=null?l:wi()};break}case"SUBMIT_META_FORM":{ne()(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const c=qe()(R()(e,i,[])),d=Tb(e.metaToEdit,e.metaForm.size,c);d.length>0&&ne()(n,i,gt(d));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}});var Ib=Object.defineProperty,Db=Object.defineProperties,xb=Object.getOwnPropertyDescriptors,Ii=Object.getOwnPropertySymbols,Sb=Object.prototype.hasOwnProperty,Lb=Object.prototype.propertyIsEnumerable,Di=(e,t,n)=>t in e?Ib(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fb=(e,t)=>{for(var n in t||(t={}))Sb.call(t,n)&&Di(e,n,t[n]);if(Ii)for(var n of Ii(t))Lb.call(t,n)&&Di(e,n,t[n]);return e},kb=(e,t)=>Db(e,xb(t));const Ab=(e,t,n)=>{let s=(0,B.cloneDeep)(t);return(0,B.set)(s,["layouts","edit"],gt(Pb(t.layouts.edit))),kb(Fb({},e),{initialData:s,modifiedData:s,componentLayouts:n})};var Ae=p(12611),jb=p(42258),xi=p.n(jb);const Si=({componentUid:e})=>{const{componentLayouts:t}=Ge(),{formatMessage:n}=(0,A.useIntl)(),s=R()(t,[e],{}),a=R()(s,["layouts","edit"],[]);return r.createElement(D.Box,{padding:3},a.map((l,i)=>r.createElement(ie.Grid,{gap:4,key:i},l.map(u=>r.createElement(ie.GridItem,{key:u.name,col:u.size},r.createElement(D.Box,{paddingTop:2},r.createElement(j.Flex,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200"},r.createElement(L.Typography,{textColor:"neutral800"},u.name))))))),r.createElement(D.Box,{paddingTop:2},r.createElement(y.Link,{startIcon:r.createElement(xi(),null),to:`/content-manager/components/${e}/configurations/edit`},n({id:v("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"}))))};Si.propTypes={componentUid:o().string.isRequired};const $b=Si,Li=(0,k.default)(j.Flex)`
  border-radius: 50%;
  svg {
    & > * {
      fill: ${({theme:e})=>e.colors.neutral500};
    }
    width: 12px;
    height: 12px;
  }
`,Bb=(0,k.default)(j.Flex)`
  text-decoration: none;
  &:hover {
    ${({theme:e})=>`
      background: ${e.colors.primary100};
      svg {
        & > * {
          fill: ${e.colors.primary600};
        }
      }
      ${L.Typography} {
          color: ${e.colors.primary600};
      }
      ${Li} {
        background: ${e.colors.primary200};
      }
      border-color: ${e.colors.primary200};
    `}
  }
`,Fi=({components:e})=>{const{componentLayouts:t}=Ge();return r.createElement(se.Stack,{spacing:2,horizontal:!0,overflow:"scroll hidden",padding:3},e.map(n=>r.createElement(Bb,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,key:n,padding:2,direction:"column",borderColor:"neutral200",as:ee.Link,to:`/content-manager/components/${n}/configurations/edit`},r.createElement(Li,{width:`${32/16}rem`,height:`${32/16}rem`,background:"neutral150",justifyContent:"center",alignItems:"center",padding:2},r.createElement(wn.G,{icon:R()(t,[n,"info","icon"],"")})),r.createElement(D.Box,{paddingTop:1},r.createElement(L.Typography,{fontSize:1,textColor:"neutral600",fontWeight:"bold"},R()(t,[n,"info","displayName"],""))))))};Fi.propTypes={components:o().arrayOf(o().string).isRequired};const Nb=Fi,ki=(0,k.default)(Me.IconButton)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Ir=({attribute:e,onEditField:t,onDeleteField:n,children:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(D.Box,{overflow:"hidden",width:"100%"},r.createElement(j.Flex,{paddingLeft:3,alignItems:"center",justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0},s),r.createElement(j.Flex,null,r.createElement(ki,{label:a({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:s}),onClick:t,icon:r.createElement(it(),null),noBorder:!0}),r.createElement(ki,{label:a({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:s}),"data-testid":"delete-field",onClick:n,icon:r.createElement(Be(),null),noBorder:!0}))),(e==null?void 0:e.type)==="component"&&r.createElement($b,{componentUid:e.component}),(e==null?void 0:e.type)==="dynamiczone"&&r.createElement(Nb,{components:e.components}))};Ir.defaultProps={attribute:void 0},Ir.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),onEditField:o().func.isRequired,onDeleteField:o().func.isRequired,children:o().string.isRequired};const Ai=Ir,Vb=(0,k.default)(j.Flex)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,qb=(0,k.default)(et())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Wb=(0,k.default)(j.Flex)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,zb=(0,k.default)(j.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Dr=({attribute:e,children:t,index:n,lastIndex:s,moveItem:a,moveRow:l,name:i,onDeleteField:u,onEditField:c,rowIndex:d,size:m})=>{const[f,g]=(0,r.useState)(!1),h=i==="_TEMP_",{setIsDraggingSibling:E}=Ge(),b=m===12,O=(0,r.useRef)(null),x=(0,r.useRef)(null),[{clientOffset:C,isOver:S},I]=(0,Te.useDrop)({accept:Pe.EDIT_FIELD,hover(T,q){if(!x.current||T.size!==12)return;const K=q.getItem().index,U=n,M=q.getItem().rowIndex,P=d;if(K===U&&M===P)return;const Q=x.current.getBoundingClientRect(),re=(Q.bottom-Q.top)/2,me=q.getClientOffset().y-Q.top;M<P&&me<re||M>P&&me>re||(l(M,P),T.rowIndex=P,T.itemIndex=U)},drop(T,q){if(!x.current)return;const K=q.getItem().index,U=n,M=q.getItem().rowIndex,P=d;if(T.size===12||K===U&&M===P)return;const Q=x.current.getBoundingClientRect();if(Math.abs(q.getClientOffset().x-Q.left)>Q.width/1.8){a(K,U+1,M,P),T.itemIndex=U+1,T.rowIndex=P;return}a(K,U,M,P),T.itemIndex=U,T.rowIndex=P},collect:T=>({canDrop:T.canDrop(),clientOffset:T.getClientOffset(),isOver:T.isOver(),isOverCurrent:T.isOver({shallow:!0}),itemType:T.getItemType()})}),[{isDragging:V,getItem:w},W,H]=(0,Te.useDrag)({type:Pe.EDIT_FIELD,item:()=>(E(!0),{index:n,labelField:t,rowIndex:d,name:i,size:m}),canDrag(){return i!=="_TEMP_"},collect:T=>({isDragging:T.isDragging(),getItem:T.getItem()}),end:()=>{E(!1)}});(0,r.useEffect)(()=>{H((0,Kt.rX)(),{captureDraggingState:!0})},[H]);const _={dragRef:W(O),dropRef:I(x)};let N=!1,G=!1;if(x.current&&C){const T=x.current.getBoundingClientRect();N=S&&w.size!==12&&Math.abs(C.x-T.left)<T.width/2,G=S&&w.size!==12&&Math.abs(C.x-T.left)>T.width/2,i==="_TEMP_"&&(N=S&&w.size!==12,G=!1)}const F=()=>e&&b?`${74/16}rem`:`${32/16}rem`,Z=n===0&&!b,$=n===s&&!b,Y=n!==0&&!b;return r.createElement(ie.GridItem,{col:m},r.createElement(Vb,{ref:_.dropRef,showLeftCarret:N,showRightCarret:G,isFirst:Z,isLast:$,hasHorizontalPadding:Y,onDrag:()=>{b&&!f&&g(!0)},onDragEnd:()=>{b&&g(!1)}},f&&b&&r.createElement(D.Box,{width:"100%",height:"2px",background:"primary600"}),r.createElement(Wb,{width:b&&f?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:F(),alignItems:"stretch",isDragging:V,dragStart:f,isFullSize:b,isHidden:h},r.createElement(zb,{as:"span",type:"button",ref:_.dragRef,onClick:T=>T.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(qb,null)),!h&&r.createElement(Ai,{attribute:e,onEditField:c,onDeleteField:u},t))))};Dr.defaultProps={attribute:void 0},Dr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),children:o().string.isRequired,index:o().number.isRequired,moveItem:o().func.isRequired,moveRow:o().func.isRequired,name:o().string.isRequired,onDeleteField:o().func.isRequired,onEditField:o().func.isRequired,rowIndex:o().number.isRequired,lastIndex:o().number.isRequired,size:o().number.isRequired};const Ub=Dr,ji=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:s,index:a,lastIndex:l})=>{const{setEditFieldToSelect:i,attributes:u,modifiedData:c,moveRow:d,moveItem:m}=Ge(),f=R()(u,[e.name],{}),g=R()(c,["metadatas",e.name,"edit","label"],"");return r.createElement(Ub,{onEditField:()=>i(e.name),onDeleteField:()=>t(n,a),attribute:f,index:a,lastIndex:l,rowIndex:s,name:e.name,size:e.size,moveRow:d,moveItem:m},g||e.name)};ji.propTypes={index:o().number.isRequired,lastIndex:o().number.isRequired,onRemoveField:o().func.isRequired,rowId:o().number.isRequired,rowIndex:o().number.isRequired,rowItem:o().object.isRequired};const Hb=ji,$i=({row:e,onRemoveField:t,rowIndex:n})=>r.createElement(ie.Grid,null,e.rowContent.map((s,a)=>r.createElement(Hb,{key:s.name,rowItem:s,index:a,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1})));$i.propTypes={onRemoveField:o().func.isRequired,row:o().object.isRequired,rowIndex:o().number.isRequired};const Gb=$i,Zb=[{action:"plugin::content-type-builder.read",subject:null}],_b=()=>{const{trackUsage:e}=(0,y.useTracking)(),{formatMessage:t}=(0,A.useIntl)(),{slug:n,modifiedData:s,isContentTypeView:a}=Ge(),l=a?"content-types":"components",i=`/plugins/content-type-builder/${l==="content-types"?l:"component-categories"}`,u=R()(s,"category",""),c=l==="content-types"?n:`${u}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:r.createElement(y.CheckPermissions,{permissions:Zb},r.createElement(y.LinkButton,{to:`${i}/${c}`,onClick:d,size:"S",startIcon:r.createElement(it(),null),variant:"secondary"},t({id:v(`edit-settings-view.link-to-ctb.${l}`),defaultMessage:"Edit the content type"})))},Bi=({editLayout:e,editLayoutRemainingFields:t,onRemoveField:n,onAddField:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(se.Stack,{spacing:4},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement("div",null,r.createElement(D.Box,null,r.createElement(L.Typography,{fontWeight:"bold"},a({id:v("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"}))),r.createElement(D.Box,null,r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},a({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(_b,null)),r.createElement(D.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(se.Stack,{spacing:2},e.map((l,i)=>r.createElement(Gb,{key:l.rowId,row:l,rowIndex:i,onRemoveField:n})),r.createElement(Ae.SimpleMenu,{id:"label",label:a({id:v("containers.SettingPage.add.field"),defaultMessage:"Insert another field"}),as:ye.Button,"data-testid":"add-field",fullWidth:!0,startIcon:r.createElement(ut(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(l=>r.createElement(Ae.MenuItem,{key:l,onClick:()=>s(l)},l))))))};Bi.propTypes={editLayout:o().array.isRequired,editLayoutRemainingFields:o().array.isRequired,onAddField:o().func.isRequired,onRemoveField:o().func.isRequired};const Qb=Bi,Kb=(0,k.default)(et())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Yb=(0,k.default)(j.Flex)`
  opacity: ${({isDragging:e})=>e?0:1};
`,Jb=(0,k.default)(j.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,xr=({attribute:e,onEditField:t,onDeleteField:n,children:s,index:a,name:l,onMoveField:i})=>{const u=(0,r.useRef)(),[,c]=(0,Te.useDrop)({accept:Pe.EDIT_RELATION,hover(h){if(!u.current)return;const E=h.index,b=a;E!==b&&(i(E,b),h.index=b)}}),[{isDragging:d},m,f]=(0,Te.useDrag)({type:Pe.EDIT_RELATION,item:()=>({index:a,labelField:s,name:l}),collect:h=>({isDragging:h.isDragging()})});(0,r.useEffect)(()=>{f((0,Kt.rX)(),{captureDraggingState:!0})},[f]),m(c(u));const g=()=>e&&["json","text","file","media","component","richtext","dynamiczone"].includes(e.type)?`${74/16}rem`:`${32/16}rem`;return r.createElement(Yb,{width:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:g(),alignItems:"stretch",isDragging:d},r.createElement(Jb,{as:"span",type:"button",ref:u,onClick:h=>h.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(Kb,null)),r.createElement(Ai,{attribute:e,onEditField:t,onDeleteField:n},s))};xr.defaultProps={attribute:void 0},xr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),onEditField:o().func.isRequired,onDeleteField:o().func.isRequired,children:o().string.isRequired,index:o().number.isRequired,name:o().string.isRequired,onMoveField:o().func.isRequired};const Xb=xr,Ni=({relationsLayout:e,editRelationsLayoutRemainingFields:t,onRemoveField:n,onAddField:s})=>{const{formatMessage:a}=(0,A.useIntl)(),{setEditFieldToSelect:l,modifiedData:i,onMoveRelation:u}=Ge();return r.createElement(se.Stack,{spacing:4},r.createElement("div",null,r.createElement(D.Box,null,r.createElement(L.Typography,{fontWeight:"bold"},a({id:v("containers.SettingPage.relations"),defaultMessage:"Relational fields"}))),r.createElement(D.Box,null,r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},a({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(D.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(se.Stack,{spacing:2},e.map((c,d)=>{const m=R()(i,["metadatas",c,"edit","label"],"");return r.createElement(Xb,{onEditField:()=>l(c),onDeleteField:()=>n(d),key:c,index:d,name:c,onMoveField:u},m||c)}),r.createElement(Ae.SimpleMenu,{id:"label",label:a({id:"containers.SettingPage.add.relational-field",defaultMessage:"Insert another relational field"}),"data-testid":"add-relation",as:ye.Button,fullWidth:!0,startIcon:r.createElement(ut(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(c=>r.createElement(Ae.MenuItem,{id:`menuItem-${c}`,key:`menuItem-${c}`,onClick:()=>s(c)},c))))))};Ni.propTypes={relationsLayout:o().array.isRequired,editRelationsLayoutRemainingFields:o().array.isRequired,onRemoveField:o().func.isRequired,onAddField:o().func.isRequired};const eE=Ni;var _e=p(4122),tE=p(61714),an=p.n(tE),nE=p(9895),rE=p.n(nE),oE=p(34103),sE=p.n(oE),aE=p(52773),Vi=p.n(aE),iE=p(55788),Sr=p.n(iE),lE=p(81208),cE=p.n(lE),uE=p(65232),Lr=p.n(uE),dE=p(80268),pE=p.n(dE),mE=p(42122),Dt=p.n(mE),fE=p(57955),gE=p.n(fE),yE=p(10822),hE=p.n(yE),bE=p(80466),EE=p.n(bE);const vE={biginteger:r.createElement(Dt(),null),boolean:r.createElement(rE(),null),date:r.createElement(an(),null),datetime:r.createElement(an(),null),decimal:r.createElement(Dt(),null),email:r.createElement(sE(),null),enum:r.createElement(Vi(),null),enumeration:r.createElement(Vi(),null),file:r.createElement(Sr(),null),files:r.createElement(Sr(),null),float:r.createElement(Dt(),null),integer:r.createElement(Dt(),null),media:r.createElement(Sr(),null),number:r.createElement(Dt(),null),relation:r.createElement(cE(),null),string:r.createElement(Lr(),null),text:r.createElement(Lr(),null),richtext:r.createElement(Lr(),null),time:r.createElement(an(),null),timestamp:r.createElement(an(),null),json:r.createElement(gE(),null),uid:r.createElement(pE(),null),component:r.createElement(hE(),null),dynamiczone:r.createElement(EE(),null)},qi=({type:e})=>vE[e]||null;qi.propTypes={type:o().string.isRequired};const Wi=qi,CE=e=>e.reduce((t,n)=>{const s=(0,B.get)(n,["attributes"],{}),a=Object.keys(s).filter(l=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext"].includes((0,B.get)(s,[l,"type"],"")));return t[n.uid]=a,t},{}),zi=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=v(e==="mainField"?"containers.SettingPage.editSettings.entry.title":`form.Input.${e}`);return{type:t,label:{id:n}}};var xt=p(63865),OE=Object.defineProperty,ln=Object.getOwnPropertySymbols,Ui=Object.prototype.hasOwnProperty,Hi=Object.prototype.propertyIsEnumerable,Gi=(e,t,n)=>t in e?OE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fr=(e,t)=>{for(var n in t||(t={}))Ui.call(t,n)&&Gi(e,n,t[n]);if(ln)for(var n of ln(t))Hi.call(t,n)&&Gi(e,n,t[n]);return e},PE=(e,t)=>{var n={};for(var s in e)Ui.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&ln)for(var s of ln(e))t.indexOf(s)<0&&Hi.call(e,s)&&(n[s]=e[s]);return n};const kr=e=>{var t=e,{type:n,options:s,onChange:a,value:l,name:i}=t,u=PE(t,["type","options","onChange","value","name"]);const{formatMessage:c}=(0,A.useIntl)();switch(n){case"text":return r.createElement(qn.TextInput,Fr({onChange:a,value:l,name:i},u));case"bool":return r.createElement(xt.ToggleInput,Fr({onChange:d=>{a({target:{name:i,value:d.target.checked}})},checked:l,name:i,onLabel:c({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:c({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"})},u));case"select":return r.createElement(ue.Select,Fr({value:l,name:i,onChange:d=>a({target:{name:i,value:d}})},u),s.map(d=>r.createElement(ue.Option,{key:d,value:d},d)));default:return null}};kr.defaultProps={options:void 0},kr.propTypes={type:o().string.isRequired,options:o().arrayOf(o().string),onChange:o().func.isRequired,value:o().oneOfType([o().string,o().bool]).isRequired,name:o().string.isRequired};const RE=kr,ME=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],TE=["dynamiczone","component","json","richtext"],Zi=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{modifiedData:s,selectedField:a,attributes:l,fieldForm:i}=Ge(),u=(0,r.useMemo)(On,[]),{schemas:c}=(0,fe.useSelector)(b=>u(b),fe.shallowEqual),d=(0,r.useMemo)(()=>{if(!a)return[];const b=R()(s,["metadatas",a,"edit"],{});return Object.keys(b).filter(O=>O!=="visible")},[a,s]),m=(0,r.useMemo)(()=>CE(c),[c]),f=(0,r.useCallback)(b=>{if(b!=="relation"&&b!=="component")return[];const O=b==="component"?"component":"targetModel",x=R()(s,["attributes",a,O],"");return R()(m,[x],[])},[a,m,s]),g=d.map(b=>{const O=R()(l,[a,"type"]);return["component","dynamiczone"].includes(O)&&!["label","description"].includes(b)||O==="component"&&b!=="label"||["media","json","boolean"].includes(O)&&b==="placeholder"?null:r.createElement(ie.GridItem,{col:6,key:b},r.createElement(RE,{type:zi(b).type,hint:b==="mainField"?n({id:v("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:R()(zi(b),"label.id","app.utils.defaultMessage")}),name:b,onChange:e,value:R()(i,["metadata",b],""),options:f(O)}))}),h=!TE.includes(l[a].type),E=r.createElement(ie.GridItem,{col:6,key:"size"},r.createElement(ue.Select,{value:i==null?void 0:i.size,name:"size",onChange:b=>{t({name:a,value:b})},label:n({id:v("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"})},ME.map(([b,O])=>r.createElement(ue.Option,{key:b,value:b},O))));return r.createElement(r.Fragment,null,g,h&&E)};Zi.propTypes={onMetaChange:o().func.isRequired,onSizeChange:o().func.isRequired};const wE=Zi,IE=(0,k.default)(j.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,_i=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:s,type:a})=>{const{selectedField:l}=Ge(),{formatMessage:i}=(0,A.useIntl)(),u=()=>a==="timestamp"?"date":["decimal","float","integer","biginter"].includes(a)?"number":a;return r.createElement(_e.ModalLayout,{onClose:e,labelledBy:"title"},r.createElement("form",{onSubmit:s},r.createElement(_e.ModalHeader,null,r.createElement(IE,null,r.createElement(Wi,{type:u(a)}),r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},i({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:It()(l)})))),r.createElement(_e.ModalBody,null,r.createElement(ie.Grid,{gap:4},r.createElement(wE,{onMetaChange:t,onSizeChange:n}))),r.createElement(_e.ModalFooter,{startActions:r.createElement(ye.Button,{onClick:e,variant:"tertiary"},i({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ye.Button,{type:"submit"},i({id:"global.finish",defaultMessage:"Finish"}))})))};_i.propTypes={onSubmit:o().func.isRequired,onToggle:o().func.isRequired,onMetaChange:o().func.isRequired,onSizeChange:o().func.isRequired,type:o().string.isRequired};const DE=_i,xE=(e,t,n)=>ge.be.put(ve(n?`content-types/${t}/configuration`:`components/${t}/configuration`),e),Ar=({mainLayout:e,components:t,isContentTypeView:n,slug:s,updateLayout:a})=>{const[l,i]=(0,r.useReducer)(wb,wr,()=>Ab(wr,e,t)),[u,c]=(0,r.useState)(!1),{trackUsage:d}=(0,y.useTracking)(),m=(0,y.useNotification)(),{goBack:f}=(0,ee.useHistory)(),[g,h]=(0,r.useState)(!1),[E,b]=(0,r.useState)(!1),{componentLayouts:O,initialData:x,modifiedData:C,metaToEdit:S,metaForm:I}=l,{formatMessage:V}=(0,A.useIntl)(),w=R()(e,["info","displayName"],""),W=R()(C,["attributes"],{}),H=Object.keys(W).filter(z=>{const de=R()(W,[z,"type"],"");return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp"].includes(de)&&!!de}),_=R()(C,["layouts","edit"],[]),N=gb()(_,"rowContent"),G=Object.keys(C.attributes).filter(z=>n?R()(C,["attributes",z,"type"],"")!=="relation":!0).filter(z=>R()(C,["metadatas",z,"edit","visible"],!1)===!0).filter(z=>N.findIndex(de=>de.name===z)===-1).sort(),F=R()(C,["layouts","editRelations"],[]),Z=Object.keys(W).filter(z=>W[z].type==="relation").filter(z=>F.indexOf(z)===-1),$=({target:{name:z,value:de}})=>{i({type:"ON_CHANGE",keys:z.split("."),value:de})},Y=()=>{h(z=>!z)},T=()=>{b(z=>!z)},q=({target:{name:z,value:de}})=>{i({type:"ON_CHANGE_META",keys:z.split("."),value:de})},K=({name:z,value:de})=>{i({type:"ON_CHANGE_SIZE",name:z,value:de})},U=z=>{z.preventDefault(),i({type:"SUBMIT_META_FORM"}),Y()},M=z=>{z.preventDefault(),T()},P=(0,Mr.useMutation)(z=>xE(z,s,n),{onSuccess:({data:z})=>{a&&a(z.data),i({type:"SUBMIT_SUCCEEDED"}),T(),d("didEditEditSettings")},onError:()=>{m({type:"warning",message:{id:"notification.error"}})}}),{isLoading:Q}=P,re=()=>{const z=Ri()(qe()(C),["layouts","metadatas","settings"]);ne()(z,"layouts.edit",Rb(z.layouts.edit)),P.mutate(z)},ce=(z,de)=>{i({type:"MOVE_RELATION",fromIndex:z,toIndex:de})},me=(z,de)=>{i({type:"MOVE_FIELD",fromIndex:z,toIndex:de})},Fe=(z,de,je,He)=>{i(je===He?{type:"REORDER_ROW",dragRowIndex:je,dragIndex:z,hoverIndex:de}:{type:"REORDER_DIFF_ROW",dragIndex:z,hoverIndex:de,dragRowIndex:je,hoverRowIndex:He})},rt=(z,de)=>{i({type:"MOVE_ROW",fromIndex:z,toIndex:de})};return r.createElement(Xe,{isContentTypeView:n,attributes:W,modifiedData:C,slug:s,componentLayouts:O,selectedField:S,fieldForm:I,onMoveRelation:ce,onMoveField:me,moveRow:rt,moveItem:Fe,setEditFieldToSelect:z=>{i({type:"SET_FIELD_TO_EDIT",name:z}),Y()},isDraggingSibling:u,setIsDraggingSibling:c},r.createElement(oe.Main,null,r.createElement("form",{onSubmit:M},r.createElement(X.HeaderLayout,{title:V({id:v("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${It()(w)}`},{name:It()(w)}),subtitle:V({id:v("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:r.createElement(y.Link,{startIcon:r.createElement(rn(),null),onClick:z=>{z.preventDefault(),f()},to:"/"},V({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ye.Button,{disabled:Xt()(x,C),startIcon:r.createElement(ft(),null),type:"submit"},V({id:"global.save",defaultMessage:"Save"}))}),r.createElement(X.ContentLayout,null,r.createElement(D.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(se.Stack,{spacing:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},V({id:v("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(ie.Grid,null,r.createElement(ie.GridItem,{col:6,s:12},r.createElement(ue.Select,{label:V({id:v("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:V({id:v("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:z=>{$({target:{name:"settings.mainField",value:z===""?null:z}})},value:C.settings.mainField},H.map(z=>r.createElement(ue.Option,{key:z,value:z},z))))),r.createElement(D.Box,{paddingTop:2,paddingBottom:2},r.createElement(Ut.Divider,null)),r.createElement(L.Typography,{variant:"delta",as:"h3"},V({id:v("containers.SettingPage.view"),defaultMessage:"View"})),r.createElement(ie.Grid,{gap:4},r.createElement(ie.GridItem,{col:n?8:12,s:12},r.createElement(Qb,{attributes:W,editLayout:_,editLayoutRemainingFields:G,onAddField:z=>{i({type:"ON_ADD_FIELD",name:z})},onRemoveField:(z,de)=>{i({type:"REMOVE_FIELD",rowIndex:z,fieldIndex:de})}})),n&&r.createElement(ie.GridItem,{col:4,s:12},r.createElement(eE,{editRelationsLayoutRemainingFields:Z,relationsLayout:F,onAddField:z=>i({type:"ADD_RELATION",name:z}),onRemoveField:z=>i({type:"REMOVE_RELATION",index:z})})))))),r.createElement(y.ConfirmDialog,{bodyText:{id:v("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ft(),null),isConfirmButtonLoading:Q,isOpen:E,onToggleDialog:T,onConfirm:re,variantRightButton:"success-light"})),g&&r.createElement(DE,{onSubmit:U,onToggle:Y,type:R()(W,[S,"type"],""),onMetaChange:q,onSizeChange:K})))};Ar.defaultProps={isContentTypeView:!1,updateLayout:null},Ar.propTypes={components:o().object.isRequired,isContentTypeView:o().bool,mainLayout:o().shape({attributes:o().object.isRequired,info:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array.isRequired,edit:o().array.isRequired}).isRequired,metadatas:o().object.isRequired,options:o().object.isRequired}).isRequired,slug:o().string.isRequired,updateLayout:o().func};const jr=Ar;var yt=p(37617);const SE=()=>({type:yt.ZA}),LE=(e,t)=>({type:yt.Id,pagination:e,data:t}),FE=()=>({type:yt.MP});function kE(){return{type:yt.c2}}const AE=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:yt.Zz}},$r=e=>({type:yt.Rp,target:e});var Qi=p(13055),Br=p(29270),jE=p(70664);const $E=()=>e=>e["content-manager_listView"]||jE.E,BE=()=>(0,Cn.P1)($E(),e=>e),Ki=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},NE=BE,Yi=({isPublished:e})=>{const{formatMessage:t}=(0,A.useIntl)(),n=t({id:v(`containers.List.${e?"published":"draft"}`)}),s=e?"success100":"secondary100",a=e?"success700":"secondary700";return r.createElement(D.Box,{background:s,hasRadius:!0,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,style:{width:"fit-content"}},r.createElement(L.Typography,{fontWeight:"bold",textColor:a},n))};Yi.propTypes={isPublished:o().bool.isRequired};const VE=Yi;var qE=p(35980),St=p(53214),WE=p(68192),zE=p.n(WE),Ji=p(9667),UE=Object.defineProperty,cn=Object.getOwnPropertySymbols,Xi=Object.prototype.hasOwnProperty,el=Object.prototype.propertyIsEnumerable,tl=(e,t,n)=>t in e?UE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HE=(e,t)=>{for(var n in t||(t={}))Xi.call(t,n)&&tl(e,n,t[n]);if(cn)for(var n of cn(t))el.call(t,n)&&tl(e,n,t[n]);return e},GE=(e,t)=>{var n={};for(var s in e)Xi.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&cn)for(var s of cn(e))t.indexOf(s)<0&&el.call(e,s)&&(n[s]=e[s]);return n};const ZE=(0,k.default)(j.Flex)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,nl=e=>{var t=e,{children:n}=t,s=GE(t,["children"]);return r.createElement(ZE,HE({justifyContent:"center",alignItems:"center",as:"span"},s),r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600"},n))};nl.propTypes={children:o().string.isRequired};const rl=nl,Nr=({url:e,mime:t,alternativeText:n,name:s,ext:a,formats:l})=>{var i;const u=(0,y.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const m=((i=l==null?void 0:l.thumbnail)==null?void 0:i.url)||null,f=(0,y.prefixFileUrlWithBackendUrl)(m)||u;return r.createElement(Ji.Avatar,{src:f,alt:n||s,preview:!0})}const c=(0,y.getFileExtension)(a),d=s.length>100?`${s.substring(0,100)}...`:s;return r.createElement(or.Tooltip,{description:d},r.createElement(rl,null,c))};Nr.defaultProps={alternativeText:null,formats:null},Nr.propTypes={alternativeText:o().string,ext:o().string.isRequired,formats:o().object,mime:o().string.isRequired,name:o().string.isRequired,url:o().string.isRequired};const ol=Nr;var _E=Object.defineProperty,sl=Object.getOwnPropertySymbols,QE=Object.prototype.hasOwnProperty,KE=Object.prototype.propertyIsEnumerable,al=(e,t,n)=>t in e?_E(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YE=(e,t)=>{for(var n in t||(t={}))QE.call(t,n)&&al(e,n,t[n]);if(sl)for(var n of sl(t))KE.call(t,n)&&al(e,n,t[n]);return e};const il=({value:e})=>r.createElement(Ji.AvatarGroup,null,e.map((t,n)=>{const s=`${t.id}${n}`;if(n===3){const a=`+${e.length-3}`;return r.createElement(rl,{key:s,preview:!1},a)}return n>3?null:r.createElement(ol,YE({key:s},t))}));il.propTypes={value:o().arrayOf(o().shape({alternativeText:o().string,ext:o().string.isRequired,formats:o().object,mime:o().string.isRequired,name:o().string.isRequired,url:o().string.isRequired})).isRequired};const JE=il;var ll=p(89557),XE=p(82910),e0=p(51064),t0=p.n(e0);const cl=({type:e,value:t})=>{const{formatDate:n,formatTime:s,formatNumber:a}=(0,A.useIntl)();let l=t;if(e==="date"&&(l=n(t0()(t),{dateStyle:"full"})),e==="datetime"&&(l=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[i,u,c]=t.split(":"),d=new Date;d.setHours(i),d.setMinutes(u),d.setSeconds(c),l=s(d,{numeric:"auto",style:"short"})}return["float","decimal"].includes(e)&&(l=a(t,{maximumFractionDigits:21})),["integer","biginteger"].includes(e)&&(l=a(t,{maximumFractionDigits:0})),la()(l)};cl.propTypes={type:o().string.isRequired,value:o().any.isRequired};const Lt=cl;var n0=Object.defineProperty,ul=Object.getOwnPropertySymbols,r0=Object.prototype.hasOwnProperty,o0=Object.prototype.propertyIsEnumerable,dl=(e,t,n)=>t in e?n0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s0=(e,t)=>{for(var n in t||(t={}))r0.call(t,n)&&dl(e,n,t[n]);if(ul)for(var n of ul(t))o0.call(t,n)&&dl(e,n,t[n]);return e},a0=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const i0=(0,k.default)(L.Typography)`
  max-width: 500px;
`,l0=(e,t)=>a0(void 0,null,function*(){const{data:{results:n,pagination:s}}=yield ge.be.get(e);return t(),{results:n,pagination:s}}),pl=({fieldSchema:e,metadatas:t,queryInfos:n,name:s,rowId:a,value:l})=>{const{formatMessage:i}=(0,A.useIntl)(),{notifyStatus:u}=(0,Br.useNotifyAT)(),c=ve(`${n.endPoint}/${a}/${s.split(".")[0]}`),[d,m]=(0,r.useState)(!1),f=r.createElement(r.Fragment,null,r.createElement(ll.Badge,null,l.count)," ",i({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:l.count})),g=()=>{const b=i({id:v("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"});u(b)},{data:h,status:E}=(0,Mr.useQuery)([e.targetModel,a],()=>l0(c,g),{enabled:d,staleTime:0});return r.createElement(D.Box,s0({},y.stopPropagation),r.createElement(Ae.SimpleMenu,{label:f,size:"S",onOpen:()=>m(!0),onClose:()=>m(!1)},E!=="success"&&r.createElement(Ae.MenuItem,{"aria-disabled":!0},r.createElement(XE.Loader,{small:!0},i({id:v("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}))),E==="success"&&r.createElement(r.Fragment,null,h==null?void 0:h.results.map(b=>r.createElement(Ae.MenuItem,{key:b.id,"aria-disabled":!0},r.createElement(i0,{ellipsis:!0},r.createElement(Lt,{type:t.mainField.schema.type,value:b[t.mainField.name]||b.id})))),(h==null?void 0:h.pagination.total)>10&&r.createElement(Ae.MenuItem,{"aria-disabled":!0,"aria-label":i({id:v("DynamicTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"})},r.createElement(L.Typography,null,"...")))))};pl.propTypes={fieldSchema:o().shape({relation:o().string,targetModel:o().string,type:o().string.isRequired}).isRequired,metadatas:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired})}).isRequired,name:o().string.isRequired,rowId:o().oneOfType([o().string,o().number]).isRequired,queryInfos:o().shape({endPoint:o().string.isRequired}).isRequired,value:o().object.isRequired};const c0=pl,u0=(0,k.default)(L.Typography)`
  max-width: 500px;
`,ml=({metadatas:e,value:t})=>r.createElement(u0,{textColor:"neutral800",ellipsis:!0},r.createElement(Lt,{type:e.mainField.schema.type,value:t[e.mainField.name]||t.id}));ml.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired})}).isRequired,value:o().object.isRequired};const d0=ml;var p0=Object.defineProperty,fl=Object.getOwnPropertySymbols,m0=Object.prototype.hasOwnProperty,f0=Object.prototype.propertyIsEnumerable,gl=(e,t,n)=>t in e?p0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g0=(e,t)=>{for(var n in t||(t={}))m0.call(t,n)&&gl(e,n,t[n]);if(fl)for(var n of fl(t))f0.call(t,n)&&gl(e,n,t[n]);return e};const y0=(0,k.default)(L.Typography)`
  max-width: 500px;
`,yl=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{mainField:{type:s,name:a}}=t,l=r.createElement(r.Fragment,null,r.createElement(ll.Badge,null,e.length)," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length}));return r.createElement(D.Box,g0({},y.stopPropagation),r.createElement(Ae.SimpleMenu,{label:l,size:"S"},e.map(i=>r.createElement(Ae.MenuItem,{key:i.id,"aria-disabled":!0},r.createElement(y0,{ellipsis:!0},r.createElement(Lt,{type:s,value:i[a]||i.id}))))))};yl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string,type:o().string,value:o().string})}).isRequired,value:o().array.isRequired};const h0=yl,b0=(0,k.default)(L.Typography)`
  max-width: 250px;
`,hl=({value:e,metadatas:t})=>{const{mainField:n}=t,s=e[n.name];return r.createElement(or.Tooltip,{label:s},r.createElement(b0,{textColor:"neutral800",ellipsis:!0},r.createElement(Lt,{type:n.type,value:s})))};hl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string,type:o().string,value:o().string})}).isRequired,value:o().object.isRequired};const E0=hl;var v0=p(80022),bl=p.n(v0);function El(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function C0(e,t,n,s){if(e==="component"){const{mainField:{name:a,type:l}}=n;if(s!=null&&s.repeatable)return t.length>0;const i=t==null?void 0:t[a];return a==="id"&&![void 0,null].includes(i)?!0:wt(l)&&l!=="biginteger"&&a!=="id"?bl()(i):!Re()(i)}return e==="relation"?El(s.relation)?!Re()(t):(t==null?void 0:t.count)>0:wt(e)&&e!=="biginteger"?bl()(t):e==="boolean"?t!==null:!Re()(t)}var O0=Object.defineProperty,vl=Object.getOwnPropertySymbols,P0=Object.prototype.hasOwnProperty,R0=Object.prototype.propertyIsEnumerable,Cl=(e,t,n)=>t in e?O0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M0=(e,t)=>{for(var n in t||(t={}))P0.call(t,n)&&Cl(e,n,t[n]);if(vl)for(var n of vl(t))R0.call(t,n)&&Cl(e,n,t[n]);return e};const T0=(0,k.default)(L.Typography)`
  max-width: 300px;
`,Vr=({content:e,fieldSchema:t,metadatas:n,name:s,queryInfos:a,rowId:l})=>{const{type:i}=t;if(!C0(i,e,n,t))return r.createElement(L.Typography,{textColor:"neutral800"},"-");switch(i){case"media":return t.multiple?r.createElement(JE,{value:e}):r.createElement(ol,M0({},e));case"relation":return El(t.relation)?r.createElement(d0,{metadatas:n,value:e}):r.createElement(c0,{fieldSchema:t,queryInfos:a,metadatas:n,value:e,name:s,rowId:l});case"component":return t.repeatable===!0?r.createElement(h0,{value:e,metadatas:n}):r.createElement(E0,{value:e,metadatas:n});default:return r.createElement(T0,{ellipsis:!0,textColor:"neutral800"},r.createElement(Lt,{type:i,value:e}))}};Vr.defaultProps={content:void 0,queryInfos:void 0},Vr.propTypes={content:o().any,fieldSchema:o().shape({component:o().string,multiple:o().bool,type:o().string.isRequired,repeatable:o().bool,relation:o().string}).isRequired,metadatas:o().object.isRequired,name:o().string.isRequired,rowId:o().oneOfType([o().string,o().number]).isRequired,queryInfos:o().shape({endPoint:o().string.isRequired})};const w0=Vr;var I0=Object.defineProperty,D0=Object.defineProperties,x0=Object.getOwnPropertyDescriptors,un=Object.getOwnPropertySymbols,Ol=Object.prototype.hasOwnProperty,Pl=Object.prototype.propertyIsEnumerable,Rl=(e,t,n)=>t in e?I0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ft=(e,t)=>{for(var n in t||(t={}))Ol.call(t,n)&&Rl(e,n,t[n]);if(un)for(var n of un(t))Pl.call(t,n)&&Rl(e,n,t[n]);return e},S0=(e,t)=>D0(e,x0(t)),L0=(e,t)=>{var n={};for(var s in e)Ol.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&un)for(var s of un(e))t.indexOf(s)<0&&Pl.call(e,s)&&(n[s]=e[s]);return n};const qr=({canCreate:e,canDelete:t,headers:n,entriesToDelete:s,onClickDelete:a,onSelectRow:l,withMainAction:i,withBulkActions:u,rows:c})=>{const{push:d,location:{pathname:m}}=(0,ee.useHistory)(),{formatMessage:f}=(0,A.useIntl)(),{trackUsage:g}=(0,y.useTracking)(),h=Go();return r.createElement(St.Tbody,null,c.map((E,b)=>{const O=s.findIndex(C=>C===E.id)!==-1,x=f({id:"content-manager.components.DynamicTable.row-line",defaultMessage:"item line {number}"},{number:b});return r.createElement(St.Tr,Ft({key:E.id},(0,y.onRowClick)({fn:()=>{g("willEditEntryFromList"),d({pathname:`${m}/${E.id}`,state:{from:m},search:h})},condition:u})),i&&r.createElement(St.Td,Ft({},y.stopPropagation),r.createElement(qE.BaseCheckbox,{"aria-label":f({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,si.Pp)(E.firstname,E.lastname)}),checked:O,onChange:()=>{l({name:E.id,value:!O})}})),n.map(C=>{var S=C,{key:I,cellFormatter:V,name:w}=S,W=L0(S,["key","cellFormatter","name"]);return r.createElement(St.Td,{key:I},typeof V=="function"?V(E,Ft({key:I,name:w},W)):r.createElement(w0,S0(Ft({content:E[w.split(".")[0]],name:w},W),{rowId:E.id})))}),u&&r.createElement(St.Td,null,r.createElement(j.Flex,Ft({justifyContent:"end"},y.stopPropagation),r.createElement(Me.IconButton,{onClick:()=>{g("willEditEntryFromButton"),d({pathname:`${m}/${E.id}`,state:{from:m},search:h})},label:f({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:x}),noBorder:!0,icon:r.createElement(it(),null)}),e&&r.createElement(D.Box,{paddingLeft:1},r.createElement(Me.IconButton,{onClick:()=>{d({pathname:`${m}/create/clone/${E.id}`,state:{from:m},search:h})},label:f({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:x}),noBorder:!0,icon:r.createElement(zE(),null)})),t&&r.createElement(D.Box,{paddingLeft:1},r.createElement(Me.IconButton,{onClick:()=>{g("willDeleteEntryFromList"),a(E.id)},label:f({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:x}),noBorder:!0,icon:r.createElement(Be(),null)})))))}))};qr.defaultProps={canCreate:!1,canDelete:!1,entriesToDelete:[],onClickDelete:()=>{},onSelectRow:()=>{},rows:[],withBulkActions:!1,withMainAction:!1},qr.propTypes={canCreate:o().bool,canDelete:o().bool,entriesToDelete:o().array,headers:o().array.isRequired,onClickDelete:o().func,onSelectRow:o().func,rows:o().array,withBulkActions:o().bool,withMainAction:o().bool};const F0=qr;var k0=Object.defineProperty,dn=Object.getOwnPropertySymbols,Ml=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,wl=(e,t,n)=>t in e?k0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A0=(e,t)=>{for(var n in t||(t={}))Ml.call(t,n)&&wl(e,n,t[n]);if(dn)for(var n of dn(t))Tl.call(t,n)&&wl(e,n,t[n]);return e},j0=(e,t)=>{var n={};for(var s in e)Ml.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&dn)for(var s of dn(e))t.indexOf(s)<0&&Tl.call(e,s)&&(n[s]=e[s]);return n};const Il=e=>{var t=e,{area:n}=t,s=j0(t,["area"]);const a=Ko(n);return a?r.createElement("ul",null,a.map(l=>l.Component(s)?r.createElement(D.Box,{key:l.name,padding:3,style:{textAlign:"center"}},r.createElement(l.Component,A0({},s))):null)):null};Il.propTypes={area:o().string.isRequired};const Dl=Il,xl=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(ke.Dialog,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(ke.DialogBody,{icon:r.createElement(Tt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{id:"confirm-description"},a({id:v("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"}))),r.createElement(j.Flex,null,r.createElement(Dl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ye.Button,{onClick:s,variant:"danger-light",startIcon:r.createElement(Be(),null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};xl.propTypes={isConfirmButtonLoading:o().bool.isRequired,isOpen:o().bool.isRequired,onConfirm:o().func.isRequired,onToggleDialog:o().func.isRequired};const $0=xl,Sl=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(ke.Dialog,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(ke.DialogBody,{icon:r.createElement(Tt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{id:"confirm-description"},a({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"}))),r.createElement(j.Flex,null,r.createElement(Dl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ye.Button,{onClick:s,variant:"danger-light",startIcon:r.createElement(Be(),null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};Sl.propTypes={isConfirmButtonLoading:o().bool.isRequired,isOpen:o().bool.isRequired,onConfirm:o().func.isRequired,onToggleDialog:o().func.isRequired};const B0=Sl;var N0=Object.defineProperty,V0=Object.defineProperties,q0=Object.getOwnPropertyDescriptors,Ll=Object.getOwnPropertySymbols,W0=Object.prototype.hasOwnProperty,z0=Object.prototype.propertyIsEnumerable,Fl=(e,t,n)=>t in e?N0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,U0=(e,t)=>{for(var n in t||(t={}))W0.call(t,n)&&Fl(e,n,t[n]);if(Ll)for(var n of Ll(t))z0.call(t,n)&&Fl(e,n,t[n]);return e},H0=(e,t)=>V0(e,q0(t));const Wr=({canCreate:e,canDelete:t,contentTypeName:n,action:s,isBulkable:a,isLoading:l,onConfirmDelete:i,onConfirmDeleteAll:u,layout:c,rows:d})=>{const{runHookWaterfall:m}=(0,y.useStrapiApp)(),f=c.contentType.options.draftAndPublish||!1,{formatMessage:g}=(0,A.useIntl)(),h=(0,fe.useSelector)(Ki),E=(0,r.useMemo)(()=>{const O=m(zt.No,{displayedHeaders:h,layout:c}).displayedHeaders.map(x=>{if(x.fieldSchema.type==="relation"){const C=`${x.name}.${x.metadatas.mainField.name}`;return H0(U0({},x),{name:C})}return x});return f?[...O,{key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:g({id:v("containers.ListPage.table-headers.published_at")}),searchable:!1,sortable:!0},cellFormatter:x=>{const C=!Re()(x.publishedAt);return r.createElement(VE,{isPublished:C})}}]:O},[m,h,c,f,g]);return r.createElement(y.DynamicTable,{components:{ConfirmDialogDelete:B0,ConfirmDialogDeleteAll:$0},contentType:n,action:s,isLoading:l,headers:E,onConfirmDelete:i,onConfirmDeleteAll:u,onOpenDeleteAllModalTrackedEvent:"willBulkDeleteEntries",rows:d,withBulkActions:!0,withMainAction:t&&a},r.createElement(F0,{canCreate:e,canDelete:t,headers:E,rows:d,withBulkActions:!0,withMainAction:t&&a}))};Wr.defaultProps={action:void 0},Wr.propTypes={canCreate:o().bool.isRequired,canDelete:o().bool.isRequired,contentTypeName:o().string.isRequired,action:o().node,isBulkable:o().bool.isRequired,isLoading:o().bool.isRequired,layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired,onConfirmDelete:o().func.isRequired,onConfirmDeleteAll:o().func.isRequired,rows:o().array.isRequired};const G0=Wr,Z0=e=>Object.keys(e).reduce((n,s)=>{const a=e[s];return mo(a)&&n.push(s),n},[]).sort(),kl=({layout:e})=>{const t=(0,fe.useDispatch)(),n=(0,fe.useSelector)(Ki),{trackUsage:s}=(0,y.useTracking)(),{formatMessage:a}=(0,A.useIntl)(),l=Z0(e.contentType.attributes).map(c=>{const d=e.contentType.metadatas[c].list;return{name:c,intlLabel:{id:d.label,defaultMessage:d.label}}}),i=n.map(({name:c})=>c),u=c=>{if(s("didChangeDisplayedFields"),c.length<i.length){const d=i.filter(m=>c.indexOf(m)===-1);t($r({name:d[0],value:!0}))}else{const d=c.filter(m=>i.indexOf(m)===-1);t($r({name:d[0],value:!1}))}};return r.createElement(D.Box,{paddingTop:1,paddingBottom:1},r.createElement(ue.Select,{"aria-label":"change displayed fields",value:i,onChange:u,customizeContent:c=>a({id:v("select.currently.selected"),defaultMessage:"{count} currently selected"},{count:c.length}),multi:!0,size:"S"},l.map(c=>r.createElement(ue.Option,{key:c.name,value:c.name},a({id:c.intlLabel.id||c.name,defaultMessage:c.intlLabel.defaultMessage||c.name})))))};kl.propTypes={layout:o().shape({contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired};const _0=(0,r.memo)(kl),zr=({pagination:e})=>r.createElement(D.Box,{paddingTop:4},r.createElement(j.Flex,{alignItems:"flex-end",justifyContent:"space-between"},r.createElement(y.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),r.createElement(y.PaginationURLQuery,{pagination:e})));zr.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},zr.propTypes={pagination:o().shape({page:o().number,pageCount:o().number,pageSize:o().number,total:o().number})};const Q0=zr,K0=["json","component","media","richtext","dynamiczone","password"],Y0=["createdAt","updatedAt"],J0=(e,t)=>{const{allPermissions:n}=(0,y.useRBACProvider)(),s=(0,y.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),a=R()(s,["0","properties","fields"],[]);return Object.keys(R()(e,["attributes"]),{}).filter(u=>{const c=R()(e,["attributes",u],{});return!(!c.type||K0.includes(c.type)||!a.includes(u)&&u!=="id"&&!Y0.includes(u))}).sort()};var X0=p(23899),ev=p.n(X0);const Al=({displayedFilters:e})=>{const[t,n]=(0,r.useState)(!1),{formatMessage:s}=(0,A.useIntl)(),a=(0,r.useRef)(),{trackUsage:l}=(0,y.useTracking)(),i=()=>{t||l("willFilterEntries"),n(u=>!u)};return r.createElement(r.Fragment,null,r.createElement(D.Box,{paddingTop:1,paddingBottom:1},r.createElement(ye.Button,{variant:"tertiary",ref:a,startIcon:r.createElement(ev(),null),onClick:i,size:"S"},s({id:"app.utils.filters",defaultMessage:"Filters"})),t&&r.createElement(y.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:i,source:a})),r.createElement(y.FilterListURLQuery,{filtersSchema:e}))};Al.propTypes={displayedFilters:o().arrayOf(o().shape({name:o().string.isRequired,metadatas:o().shape({label:o().string}),fieldSchema:o().shape({type:o().string})})).isRequired};const tv=Al,jl=({contentType:e,slug:t,metadatas:n})=>{const{formatMessage:s}=(0,A.useIntl)(),l=J0(e,t).map(i=>{const u=e.attributes[i],{type:c,enum:d}=u,m={name:"didFilterEntries",properties:{useRelation:c==="relation"}},{mainField:f,label:g}=n[i].list;return{name:i,metadatas:{label:s({id:g,defaultMessage:g})},fieldSchema:{type:c,options:d,mainField:f},trackedEvent:m}});return r.createElement(tv,{displayedFilters:l})};jl.propTypes={contentType:o().object.isRequired,metadatas:o().object.isRequired,slug:o().string.isRequired};const nv=jl;var rv=p(98399),ov=Object.defineProperty,sv=Object.defineProperties,av=Object.getOwnPropertyDescriptors,$l=Object.getOwnPropertySymbols,iv=Object.prototype.hasOwnProperty,lv=Object.prototype.propertyIsEnumerable,Bl=(e,t,n)=>t in e?ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cv=(e,t)=>{for(var n in t||(t={}))iv.call(t,n)&&Bl(e,n,t[n]);if($l)for(var n of $l(t))lv.call(t,n)&&Bl(e,n,t[n]);return e},uv=(e,t)=>sv(e,av(t)),Ur=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const dv=De.Z.contentManager,pv=(0,k.default)(Me.IconButton)`
  svg {
    path {
      fill: ${({theme:e})=>e.colors.neutral900};
    }
  }
`;function Nl({canCreate:e,canDelete:t,canRead:n,data:s,getData:a,getDataSucceeded:l,isLoading:i,layout:u,pagination:c,slug:d}){const{total:m}=c,{contentType:{metadatas:f,settings:{bulkable:g,filterable:h,searchable:E}}}=u,b=(0,y.useNotification)(),{trackUsage:O}=(0,y.useTracking)(),{refetchPermissions:x}=(0,y.useRBACProvider)(),C=(0,r.useRef)(O),S=(0,r.useRef)(x),{notifyStatus:I}=(0,Br.useNotifyAT)();(0,y.useFocusWhenNavigate)();const[{query:V}]=(0,y.useQueryParams)(),w=Za(V),W=(0,Ne.stringify)({plugins:V.plugins},{encode:!1}),{pathname:H}=(0,ee.useLocation)(),{push:_}=(0,ee.useHistory)(),{formatMessage:N}=(0,A.useIntl)(),G=u.contentType,F=R()(G,"options.draftAndPublish",!1),Z=(0,r.useRef)(""),$=(0,r.useCallback)((P,Q)=>Ur(this,null,function*(){a();try{const re=Q?{cancelToken:Q.token}:null,{data:{results:ce,pagination:me}}=yield ge.be.get(P,re);I(N({id:v("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:me.count})),l(me,ce)}catch(re){if(Se().isCancel(re))return;if(R()(re,"response.status",null)===403){yield S.current(),b({type:"info",message:{id:v("permissions.not-allowed.update")}}),_("/");return}rv.error(re),b({type:"warning",message:{id:v("error.model.fetch")}})}}),[N,a,l,I,_,b]),Y=(0,r.useCallback)(P=>Ur(this,null,function*(){try{yield ge.be.post(ve(`collection-types/${d}/actions/bulkDelete`),{ids:P});const Q=ve(`collection-types/${d}${w}`);$(Q),C.current("didBulkDeleteEntries")}catch(Q){b({type:"warning",message:{id:v("error.record.delete")}})}}),[$,w,d,b]),T=(0,r.useCallback)(P=>Ur(this,null,function*(){try{yield ge.be.delete(ve(`collection-types/${d}/${P}`));const Q=ve(`collection-types/${d}${w}`);$(Q),b({type:"success",message:{id:v("success.record.delete")}})}catch(Q){const re=R()(Q,"response.payload.message",N({id:v("error.record.delete")}));b({type:"warning",message:re})}}),[d,w,$,b,N]);(0,r.useEffect)(()=>{const Q=Se().CancelToken.source(),re=n,ce=ve(`collection-types/${d}${w}`);return re&&ce.includes(Z.current)&&$(ce,Q),()=>{Z.current=d,Q.cancel("Operation canceled by the user.")}},[n,a,d,w,l,$]);const q=N({id:v("header.name"),defaultMessage:"Content"}),K=N({id:G.info.displayName,defaultMessage:G.info.displayName||q}),U=n?N({id:v("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:m}):null,M=P=>e?r.createElement(ye.Button,uv(cv({},P),{onClick:()=>{const Q=F?{status:"draft"}:{};C.current("willCreateEntry",Q),_({pathname:`${H}/create`,search:V.plugins?W:""})},startIcon:r.createElement(ut(),null)}),N({id:v("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})):null;return r.createElement(oe.Main,{"aria-busy":i},r.createElement(X.HeaderLayout,{primaryAction:M(),subtitle:U,title:K,navigationAction:r.createElement(y.Link,{startIcon:r.createElement(rn(),null),to:"/content-manager/"},N({id:"global.back",defaultMessage:"Back"}))}),!n&&r.createElement(X.ActionLayout,{endActions:r.createElement(Gt,{area:"contentManager.listView.actions"})}),n&&r.createElement(X.ActionLayout,{endActions:r.createElement(r.Fragment,null,r.createElement(Gt,{area:"contentManager.listView.actions"}),r.createElement(_0,{layout:u}),r.createElement(y.CheckPermissions,{permissions:dv.collectionTypesConfigurations},r.createElement(D.Box,{paddingTop:1,paddingBottom:1},r.createElement(pv,{onClick:()=>{O("willEditListLayout"),_({pathname:`${d}/configurations/list`,search:W})},icon:r.createElement(xi(),null),label:N({id:"app.links.configure-view",defaultMessage:"Configure the view"})})))),startActions:r.createElement(r.Fragment,null,E&&r.createElement(y.SearchURLQuery,{label:N({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:K}),placeholder:N({id:"global.search",defaultMessage:"Search"}),trackedEvent:"didSearch"}),h&&r.createElement(nv,{contentType:G,slug:d,metadatas:f}))}),r.createElement(X.ContentLayout,null,n?r.createElement(r.Fragment,null,r.createElement(G0,{canCreate:e,canDelete:t,contentTypeName:K,onConfirmDeleteAll:Y,onConfirmDelete:T,isBulkable:g,isLoading:i,layout:u,rows:s,action:M({variant:"secondary"})}),r.createElement(Q0,{pagination:{pageCount:(c==null?void 0:c.pageCount)||1}})):r.createElement(y.NoPermissions,null)))}Nl.propTypes={canCreate:o().bool.isRequired,canDelete:o().bool.isRequired,canRead:o().bool.isRequired,data:o().array.isRequired,layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,info:o().shape({displayName:o().string.isRequired}).isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired,isLoading:o().bool.isRequired,getData:o().func.isRequired,getDataSucceeded:o().func.isRequired,pagination:o().shape({total:o().number.isRequired,pageCount:o().number}).isRequired,slug:o().string.isRequired};const mv=NE();function fv(e){return(0,Qi.bindActionCreators)({getData:SE,getDataSucceeded:LE,onChangeListHeaders:$r,onResetListHeaders:FE},e)}const gv=(0,fe.connect)(mv,fv),yv=(0,Qi.compose)(gv)((0,r.memo)(Nl,We()));var hv=Object.defineProperty,Vl=Object.getOwnPropertySymbols,bv=Object.prototype.hasOwnProperty,Ev=Object.prototype.propertyIsEnumerable,ql=(e,t,n)=>t in e?hv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wl=(e,t)=>{for(var n in t||(t={}))bv.call(t,n)&&ql(e,n,t[n]);if(Vl)for(var n of Vl(t))Ev.call(t,n)&&ql(e,n,t[n]);return e};const Hr=e=>{const t=(0,r.useMemo)(()=>vo(e.slug),[e.slug]),{isLoading:n,allowedActions:s}=(0,y.useRBAC)(t,e.permissions);return n?r.createElement(y.LoadingIndicatorPage,null):r.createElement(yv,Wl(Wl({},e),s))};Hr.defaultProps={permissions:[]},Hr.propTypes={permissions:o().array,slug:o().string.isRequired};const vv=(0,r.memo)(Hr,(e,t)=>{const n=(0,y.difference)(e,t);return Object.keys(n).filter(a=>a!=="state").length>0});var Cv=Object.defineProperty,Ov=Object.defineProperties,Pv=Object.getOwnPropertyDescriptors,pn=Object.getOwnPropertySymbols,zl=Object.prototype.hasOwnProperty,Ul=Object.prototype.propertyIsEnumerable,Hl=(e,t,n)=>t in e?Cv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rv=(e,t)=>{for(var n in t||(t={}))zl.call(t,n)&&Hl(e,n,t[n]);if(pn)for(var n of pn(t))Ul.call(t,n)&&Hl(e,n,t[n]);return e},Mv=(e,t)=>Ov(e,Pv(t)),Tv=(e,t)=>{var n={};for(var s in e)zl.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&pn)for(var s of pn(e))t.indexOf(s)<0&&Ul.call(e,s)&&(n[s]=e[s]);return n};const Gl=e=>{var t=e,{layout:n}=t,s=Tv(t,["layout"]);const a=(0,fe.useDispatch)(),{replace:l}=(0,ee.useHistory)(),[{query:i,rawQuery:u}]=(0,y.useQueryParams)(),c=_o(i,s.slug,"listView"),d=Ho(s.slug);return(0,r.useEffect)(()=>{u||l(d)},[u,l,d]),(0,r.useEffect)(()=>{a(AE(n))},[a,n]),(0,r.useEffect)(()=>()=>{a(kE())},[a]),c?r.createElement(vv,Mv(Rv({},s),{layout:n,permissions:c})):null};Gl.propTypes={layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired,pluginOptions:o().object}).isRequired}).isRequired,slug:o().string.isRequired};const wv=Gl,Iv=(e,t)=>ge.be.put(ve(`content-types/${t}/configuration`),e),Dv=(0,k.default)(j.Flex)`
  gap: ${({theme:e})=>e.spaces[4]};
`,Gr=({modifiedData:e,onChange:t,sortOptions:n})=>{const{formatMessage:s}=(0,A.useIntl)(),{settings:a}=e;return r.createElement(r.Fragment,null,r.createElement(D.Box,{paddingBottom:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},s({id:v("containers.SettingPage.settings"),defaultMessage:"Settings"}))),r.createElement(Dv,{justifyContent:"space-between",wrap:"wrap",paddingBottom:6},r.createElement(xt.ToggleInput,{label:s({id:v("form.Input.search"),defaultMessage:"Enable search"}),onChange:l=>{t({target:{name:"settings.searchable",value:l.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:a.searchable}),r.createElement(xt.ToggleInput,{label:s({id:v("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:l=>{t({target:{name:"settings.filterable",value:l.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:a.filterable}),r.createElement(xt.ToggleInput,{label:s({id:v("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:l=>{t({target:{name:"settings.bulkable",value:l.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:a.bulkable})),r.createElement(ie.Grid,{gap:4},r.createElement(ie.GridItem,{s:12,col:6},r.createElement(ue.Select,{label:s({id:v("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:s({id:v("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:l=>t({target:{name:"settings.pageSize",value:l}}),name:"settings.pageSize",value:e.settings.pageSize||""},[10,20,50,100].map(l=>r.createElement(ue.Option,{key:l,value:l},l)))),r.createElement(ie.GridItem,{s:12,col:3},r.createElement(ue.Select,{label:s({id:v("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:l=>t({target:{name:"settings.defaultSortBy",value:l}}),name:"settings.defaultSortBy",value:e.settings.defaultSortBy||""},n.map(l=>r.createElement(ue.Option,{key:l,value:l},l)))),r.createElement(ie.GridItem,{s:12,col:3},r.createElement(ue.Select,{label:s({id:v("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:l=>t({target:{name:"settings.defaultSortOrder",value:l}}),name:"settings.defaultSortOrder",value:e.settings.defaultSortOrder||""},["ASC","DESC"].map(l=>r.createElement(ue.Option,{key:l,value:l},l))))))};Gr.defaultProps={modifiedData:{},sortOptions:[]},Gr.propTypes={modifiedData:o().object,onChange:o().func.isRequired,sortOptions:o().array};const xv=Gr,Zr=k.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,Zl=(0,k.default)(Zr)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Sv=(0,k.default)(j.Flex)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${Zl} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,Lv=(0,k.default)(D.Box)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,_l=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:s,onMoveField:a,onRemoveField:l,name:i,setIsDraggingSibling:u})=>{const{formatMessage:c}=(0,A.useIntl)(),d=(0,r.useRef)(null),m=(0,r.useRef)(null),[,f]=(0,r.useState)(!1),g=(0,r.useRef)(),h=so(n),E=()=>{g.current&&g.current.click()},[,b]=(0,Te.useDrop)({accept:Pe.FIELD,hover(I,V){if(!m.current)return;const w=I.index,W=e;if(w===W)return;const H=m.current.getBoundingClientRect(),_=(H.right-H.left)/2,G=V.getClientOffset().x-H.left;w>W&&G>_||w<W&&G<_||(a(w,W),I.index=W)}}),[{isDragging:O},x,C]=(0,Te.useDrag)({type:Pe.FIELD,item:()=>({index:e,labelField:n,name:i}),collect:I=>({isDragging:I.isDragging()}),end:()=>{u(!1)}});(0,r.useEffect)(()=>{C((0,Kt.rX)(),{captureDraggingState:!1})},[C]),(0,r.useEffect)(()=>{O&&u(!0)},[O,u]),(0,r.useEffect)(()=>{t||f(I=>!I)},[t]);const S={dragRef:x(d),dropRef:b(m)};return r.createElement(Lv,{ref:S?S.dropRef:null},O&&r.createElement(hn,{transparent:!0,labelField:h}),!O&&t&&r.createElement(hn,{isSibling:!0,labelField:h}),!O&&!t&&r.createElement(Sv,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:E,isDragging:O},r.createElement(se.Stack,{horizontal:!0,spacing:3},r.createElement(Zl,{as:"span","aria-label":c({id:v("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:i}),onClick:I=>I.stopPropagation(),ref:S.dragRef,type:"button"},r.createElement(et(),null)),r.createElement(L.Typography,{fontWeight:"bold"},h)),r.createElement(j.Flex,{paddingLeft:3},r.createElement(Zr,{ref:g,onClick:I=>{I.stopPropagation(),s(i)},"aria-label":c({id:v("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:i}),type:"button"},r.createElement(it(),null)),r.createElement(Zr,{onClick:l,"data-testid":`delete-${i}`,"aria-label":c({id:v("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:i}),type:"button"},r.createElement(oo(),null)))))};_l.propTypes={index:o().number.isRequired,isDraggingSibling:o().bool.isRequired,labelField:o().string.isRequired,name:o().string.isRequired,onClickEditField:o().func.isRequired,onMoveField:o().func.isRequired,onRemoveField:o().func.isRequired,setIsDraggingSibling:o().func.isRequired};const Fv=_l,Ql=(0,k.default)(D.Box)`
  flex: ${({size:e})=>e};
`,kv=(0,k.default)(Ql)`
  overflow-x: scroll;
  overflow-y: hidden;
`,Av=(0,k.default)(Ql)`
  max-width: ${32/16}rem;
`,Kl=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:s,onClickEditField:a,onMoveField:l,onRemoveField:i})=>{const{formatMessage:u}=(0,A.useIntl)(),[c,d]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),g=(0,r.useRef)();function h(...b){f("add"),s(...b)}function E(...b){f("remove"),i(...b)}return(0,r.useEffect)(()=>{m==="add"&&(g==null?void 0:g.current)&&(g.current.scrollLeft=g.current.scrollWidth)},[e,m]),r.createElement(r.Fragment,null,r.createElement(D.Box,{paddingBottom:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},u({id:v("containers.SettingPage.view"),defaultMessage:"View"}))),r.createElement(j.Flex,{paddingTop:4,paddingLeft:4,paddingRight:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0},r.createElement(kv,{size:"1",paddingBottom:4,ref:g},r.createElement(se.Stack,{horizontal:!0,spacing:3},e.map((b,O)=>r.createElement(Fv,{key:b,index:O,isDraggingSibling:c,onMoveField:l,onClickEditField:a,onRemoveField:x=>E(x,O),name:b,labelField:n[b].list.label||b,setIsDraggingSibling:d})))),r.createElement(Av,{size:"auto",paddingBottom:4},r.createElement(Ae.SimpleMenu,{label:u({id:v("components.FieldSelect.label"),defaultMessage:"Add a field"}),as:Me.IconButton,icon:r.createElement(ut(),null),disabled:t.length<=0,"data-testid":"add-field"},t.map(b=>r.createElement(Ae.MenuItem,{key:b,onClick:()=>h(b)},b))))))};Kl.propTypes={displayedFields:xe.PropTypes.array.isRequired,listRemainingFields:xe.PropTypes.array.isRequired,metadatas:xe.PropTypes.objectOf(xe.PropTypes.shape({list:xe.PropTypes.shape({label:xe.PropTypes.string})})).isRequired,onAddField:xe.PropTypes.func.isRequired,onClickEditField:xe.PropTypes.func.isRequired,onMoveField:xe.PropTypes.func.isRequired,onRemoveField:xe.PropTypes.func.isRequired};const jv=Kl,$v=(0,k.default)(j.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,Yl=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:s,onChangeEditLabel:a,onSubmit:l,type:i})=>{const{formatMessage:u}=(0,A.useIntl)(),c=e[n].relationType;let d=!["media","relation"].includes(i);return["oneWay","oneToOne","manyToOne"].includes(c)&&(d=!0),r.createElement(_e.ModalLayout,{onClose:s,labelledBy:"title"},r.createElement("form",{onSubmit:l},r.createElement(_e.ModalHeader,null,r.createElement($v,null,r.createElement(Wi,{type:i}),r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},u({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:It()(n)})))),r.createElement(_e.ModalBody,null,r.createElement(ie.Grid,{gap:4},r.createElement(ie.GridItem,{s:12,col:6},r.createElement(qn.TextInput,{id:"label-input",label:u({id:v("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:m=>a(m),value:t.label,hint:u({id:v("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})),d&&r.createElement(ie.GridItem,{s:12,col:6},r.createElement(xt.ToggleInput,{"data-testid":"Enable sort on this field",checked:t.sortable,label:u({id:v("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:m=>a({target:{name:"sortable",value:m.target.checked}}),onLabel:u({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:u({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})))),r.createElement(_e.ModalFooter,{startActions:r.createElement(ye.Button,{onClick:s,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ye.Button,{type:"submit"},u({id:"global.finish",defaultMessage:"Finish"}))})))};Yl.propTypes={attributes:o().objectOf(o().shape({relationType:o().string})).isRequired,fieldForm:o().shape({label:o().string,sortable:o().bool}).isRequired,fieldToEdit:o().string.isRequired,onChangeEditLabel:o().func.isRequired,onCloseModal:o().func.isRequired,onSubmit:o().func.isRequired,type:o().string.isRequired};const Bv=Yl;var Nv=Object.defineProperty,Vv=Object.defineProperties,qv=Object.getOwnPropertyDescriptors,Jl=Object.getOwnPropertySymbols,Wv=Object.prototype.hasOwnProperty,zv=Object.prototype.propertyIsEnumerable,Xl=(e,t,n)=>t in e?Nv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uv=(e,t)=>{for(var n in t||(t={}))Wv.call(t,n)&&Xl(e,n,t[n]);if(Jl)for(var n of Jl(t))zv.call(t,n)&&Xl(e,n,t[n]);return e},Hv=(e,t)=>Vv(e,qv(t));const Gv=(e,t)=>Hv(Uv({},e),{initialData:t,modifiedData:t}),_r={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},Zv=(e=_r,t)=>(0,qt.default)(e,n=>{const s=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const a=R()(e,s,[]);ne()(n,s,[...a,t.item]);break}case"MOVE_FIELD":{const a=R()(e,s,[]),{originalIndex:l,atIndex:i}=t;ne()(n,s,vt(a,l,i));break}case"ON_CHANGE":{ne()(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{ne()(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const a=R()(e,s,[]);ne()(n,s,a.filter((l,i)=>t.index!==i));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:a}=t;n.fieldToEdit=a,n.fieldForm.label=R()(n,["modifiedData","metadatas",a,"list","label"],""),n.fieldForm.sortable=R()(n,["modifiedData","metadatas",a,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const a=["modifiedData","metadatas",e.fieldToEdit,"list"];ne()(n,[...a,"label"],e.fieldForm.label),ne()(n,[...a,"sortable"],e.fieldForm.sortable);break}default:return n}}),_v=["media","richtext","dynamiczone","relation","component","json"];var Qv=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const ec=({layout:e,slug:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{trackUsage:s}=(0,y.useTracking)(),a=Go(),l=(0,y.useNotification)(),{refetchData:i}=(0,r.useContext)(io),[u,c]=(0,r.useState)(!1),d=()=>c(M=>!M),[m,f]=(0,r.useState)(!1),g=()=>f(M=>!M),[h,E]=(0,r.useReducer)(Zv,_r,()=>Gv(_r,e)),{fieldToEdit:b,fieldForm:O,initialData:x,modifiedData:C}=h,{attributes:S}=e,I=C.layouts.list,V=()=>{const{settings:{pageSize:M,defaultSortBy:P,defaultSortOrder:Q},kind:re,uid:ce}=x,me=`${P}:${Q}`,Fe=`${(0,Ne.stringify)({page:1,pageSize:M,sort:me},{encode:!1})}${a?`&${a}`:""}`;return`/content-manager/${re}/${ce}?${Fe}`},w=({target:{name:M,value:P}})=>{E({type:"ON_CHANGE",keys:M,value:M==="settings.pageSize"?parseInt(P,10):P})},W=()=>Qv(void 0,null,function*(){const M=Ri()(C,["layouts","settings","metadatas"]);$.mutate(M)}),H=M=>{E({type:"ADD_FIELD",item:M})},_=(M,P)=>{M.stopPropagation(),I.length===1?l({type:"info",message:{id:v("notification.info.minimumFields")}}):E({type:"REMOVE_FIELD",index:P})},N=M=>{M.preventDefault(),d(),s("willSaveContentTypeLayout")},G=M=>{E({type:"SET_FIELD_TO_EDIT",fieldToEdit:M}),g()},F=()=>{E({type:"UNSET_FIELD_TO_EDIT"}),g()},Z=M=>{M.preventDefault(),g(),E({type:"SUBMIT_FIELD_FORM"})},$=(0,Mr.useMutation)(M=>Iv(M,t),{onSuccess:()=>{s("didEditListSettings"),i()},onError:()=>{l({type:"warning",message:{id:"notification.error"}})}}),{isLoading:Y}=$,T=({target:{name:M,value:P}})=>{E({type:"ON_CHANGE_FIELD_METAS",name:M,value:P})},q=Object.entries(S).reduce((M,P)=>{const[Q,re]=P,ce=mo(re),me=I.includes(Q);return ce&&!me&&M.push(Q),M},[]).sort(),K=Object.entries(S).reduce((M,P)=>{const[Q,{type:re}]=P;return _v.includes(re)||M.push(Q),M},[]),U=(M,P)=>{E({type:"MOVE_FIELD",originalIndex:M,atIndex:P})};return r.createElement(X.Layout,null,r.createElement(oe.Main,{"aria-busy":Y},r.createElement("form",{onSubmit:N},r.createElement(X.HeaderLayout,{navigationAction:r.createElement(y.Link,{startIcon:r.createElement(rn(),null),to:V,id:"go-back"},n({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ye.Button,{size:"L",startIcon:r.createElement(ft(),null),disabled:Xt()(C,x),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:v("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:n({id:v("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:It()(C.info.displayName)})}),r.createElement(X.ContentLayout,null,r.createElement(D.Box,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(xv,{modifiedData:C,onChange:w,sortOptions:K}),r.createElement(D.Box,{paddingTop:6,paddingBottom:6},r.createElement(Ut.Divider,null)),r.createElement(jv,{listRemainingFields:q,displayedFields:I,onAddField:H,onClickEditField:G,onMoveField:U,onRemoveField:_,metadatas:C.metadatas}))),r.createElement(y.ConfirmDialog,{bodyText:{id:v("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ft(),null),isConfirmButtonLoading:Y,isOpen:u,onToggleDialog:d,onConfirm:W,variantRightButton:"success-light"})),m&&r.createElement(Bv,{attributes:S,fieldForm:O,fieldToEdit:b,onChangeEditLabel:T,onCloseModal:F,onSubmit:Z,type:R()(S,[b,"type"],"text")})))};ec.propTypes={layout:o().shape({uid:o().string.isRequired,settings:o().shape({bulkable:o().bool,defaultSortBy:o().string,defaultSortOrder:o().string,filterable:o().bool,pageSize:o().number,searchable:o().bool}).isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().objectOf(o().shape({type:o().string})).isRequired}).isRequired,slug:o().string.isRequired};const Kv=(0,r.memo)(ec),tc=De.Z.contentManager,nc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:s,updateLayout:a}=Vo(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let m={},f={};return s.contentType&&(m=Nt(s.contentType)),s.components&&(f=Object.keys(s.components).reduce((g,h)=>(g[h]=Nt(s.components[h]),g),{})),{rawContentTypeLayout:m,rawComponentsLayouts:f}},[s]);if((0,B.get)(s,["contentType","uid"],null)!==e||n)return r.createElement(y.LoadingIndicatorPage,null);const c=({location:{state:m},history:{goBack:f},match:{params:{id:g,origin:h}}},E)=>r.createElement(E,{slug:e,layout:s,state:m,goBack:f,id:g,origin:h}),d=[{path:"create/clone/:origin",comp:sn},{path:"create",comp:sn},{path:":id",comp:sn},{path:"",comp:wv}].map(({path:m,comp:f})=>r.createElement(ee.Route,{key:m,path:`${t}/${m}`,render:g=>c(g,f)}));return r.createElement(Dc.SV,{FallbackComponent:y.ErrorFallback},r.createElement(lo.Provider,{value:s},r.createElement(ee.Switch,null,r.createElement(ee.Route,{path:`${t}/configurations/list`},r.createElement(y.CheckPagePermissions,{permissions:tc.collectionTypesConfigurations},r.createElement(Kv,{layout:l,slug:e,updateLayout:a}))),r.createElement(ee.Route,{path:`${t}/configurations/edit`},r.createElement(y.CheckPagePermissions,{permissions:tc.collectionTypesConfigurations},r.createElement(jr,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:a}))),d)))};nc.propTypes={match:o().shape({url:o().string.isRequired,params:o().shape({slug:o().string.isRequired}).isRequired}).isRequired};const Yv=(0,r.memo)(nc);var rc=p(57678),Jv=p(98399),Xv=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const eC=De.Z.contentManager,tC=()=>{const[{isLoading:e,data:t},n]=(0,r.useReducer)(rc.Z,rc.q),s=(0,r.useMemo)(On,[]),{schemas:a}=(0,fe.useSelector)(i=>s(i),fe.shallowEqual),{uid:l}=(0,ee.useParams)();return(0,r.useEffect)(()=>{const u=Se().CancelToken.source();return(d=>Xv(void 0,null,function*(){try{n(Jt());const{data:{data:m}}=yield ge.be.get(ve(`components/${l}/configuration`),{cancelToken:d.token});n(fr(Mo(m,a,"component")))}catch(m){if(Se().isCancel(m))return;Jv.error(m)}}))(u),()=>{u.cancel("Operation canceled by the user.")}},[l,a]),e?r.createElement(y.LoadingIndicatorPage,null):r.createElement(y.CheckPagePermissions,{permissions:eC.componentsConfigurations},r.createElement(jr,{components:t.components,mainLayout:t.component,slug:l}))},nC=(0,r.memo)(tC);var rC=p(64354),oC=p(97042),sC=p.n(oC);const aC=()=>{const{formatMessage:e}=(0,A.useIntl)();return(0,y.useFocusWhenNavigate)(),r.createElement(oe.Main,null,r.createElement(X.HeaderLayout,{title:e({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(X.ContentLayout,null,r.createElement(rC.EmptyStateLayout,{action:r.createElement(y.LinkButton,{variant:"secondary",startIcon:r.createElement(ut(),null),to:"/plugins/content-type-builder/content-types/create-content-type"},e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:r.createElement(sC(),{width:"10rem"}),shadow:"tableShadow"})))},iC=()=>{const{formatMessage:e}=(0,A.useIntl)();return(0,y.useFocusWhenNavigate)(),r.createElement(oe.Main,null,r.createElement(X.HeaderLayout,{title:e({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(X.ContentLayout,null,r.createElement(y.NoPermissions,null)))},lC=De.Z.contentManager,oc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:s,updateLayout:a}=Vo(e),{rawContentTypeLayout:l,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let u={},c={};return s.contentType&&(c=Nt(s.contentType)),s.components&&(u=Object.keys(s.components).reduce((d,m)=>(d[m]=Nt(s.components[m]),d),{})),{rawContentTypeLayout:c,rawComponentsLayouts:u}},[s]);return n?r.createElement(y.LoadingIndicatorPage,null):r.createElement(lo.Provider,{value:s},r.createElement(ee.Switch,null,r.createElement(ee.Route,{path:`${t}/configurations/edit`},r.createElement(y.CheckPagePermissions,{permissions:lC.singleTypesConfigurations},r.createElement(jr,{components:i,isContentTypeView:!0,mainLayout:l,slug:e,updateLayout:a}))),r.createElement(ee.Route,{path:t,render:({location:{state:u},history:{goBack:c}})=>r.createElement(sn,{layout:s,slug:e,isSingleType:!0,state:u,goBack:c})})))};oc.propTypes={match:o().shape({url:o().string.isRequired,params:o().shape({slug:o().string.isRequired}).isRequired}).isRequired};const cC=(0,r.memo)(oc);var uC=p(58469),dC=p(59578),sc=p.n(dC),kt=p(89420),pC=Object.defineProperty,mC=Object.defineProperties,fC=Object.getOwnPropertyDescriptors,ac=Object.getOwnPropertySymbols,gC=Object.prototype.hasOwnProperty,yC=Object.prototype.propertyIsEnumerable,ic=(e,t,n)=>t in e?pC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hC=(e,t)=>{for(var n in t||(t={}))gC.call(t,n)&&ic(e,n,t[n]);if(ac)for(var n of ac(t))yC.call(t,n)&&ic(e,n,t[n]);return e},bC=(e,t)=>mC(e,fC(t));const lc=(e,t)=>(0,uC.ZP)(e,sc()(t),{keys:[n=>sc()(n.title)]}),EC=()=>{const[e,t]=(0,r.useState)(""),{formatMessage:n}=(0,A.useIntl)(),s=(0,r.useMemo)(Ru,[]),{collectionTypeLinks:a,singleTypeLinks:l}=(0,fe.useSelector)(h=>s(h),fe.shallowEqual),i=h=>h.map(E=>bC(hC({},E),{title:n({id:E.title,defaultMessage:E.title})})),u=i(a),c=i(l),d=[{id:"collectionTypes",title:{id:v("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:ae()(lc(u,e),h=>h.title.toLowerCase())},{id:"singleTypes",title:{id:v("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:ae()(lc(c,e),h=>h.title.toLowerCase())}],m=()=>{t("")},f=({target:{value:h}})=>{t(h)},g=n({id:v("header.name"),defaultMessage:"Content"});return r.createElement(kt.SubNav,{ariaLabel:g},r.createElement(kt.SubNavHeader,{label:g,searchable:!0,value:e,onChange:f,onClear:m,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),r.createElement(kt.SubNavSections,null,d.map(h=>{const E=n({id:h.title.id,defaultMessage:h.title.defaultMessage},h.title.values);return r.createElement(kt.SubNavSection,{key:h.id,label:E,badgeLabel:h.links.length.toString()},h.links.map(b=>{const O=b.search?`?${b.search}`:"";return r.createElement(kt.SubNavLink,{as:ee.NavLink,key:b.uid,to:`${b.to}${O}`},b.title)}))})))};var Qr=p(92886);const vC=()=>({type:Qr.ZA}),CC=()=>({type:Qr.c2}),OC=(e,t,n,s)=>({type:Qr.ix,data:{authorizedCtLinks:e,authorizedStLinks:t,components:s,contentTypeSchemas:n}}),cc=(e,t,n=[])=>e.filter(s=>s.isDisplayed).map(s=>{const a=[{action:"plugin::content-manager.explorer.create",subject:s.uid},{action:"plugin::content-manager.explorer.read",subject:s.uid}],l=[{action:"plugin::content-manager.explorer.read",subject:s.uid}],i=t==="collectionTypes"?a:l,u=n.find(({uid:d})=>d===s.uid);let c=null;if(u){const d={page:1,pageSize:u.settings.pageSize,sort:`${u.settings.defaultSortBy}:${u.settings.defaultSortOrder}`};c=(0,Ne.stringify)(d,{encode:!1})}return{permissions:i,search:c,kind:s.kind,title:s.info.displayName,to:`/content-manager/${s.kind}/${s.uid}`,uid:s.uid,name:s.uid,isDisplayed:s.isDisplayed}}),PC=(e,t)=>{const[n,s]=(0,B.chain)(e).groupBy("kind").map((a,l)=>({name:l,links:a})).sortBy("name").value();return{collectionTypesSectionLinks:cc((0,B.get)(n,"links",[]),"collectionTypes",t),singleTypesSectionLinks:cc((0,B.get)(s,"links",[]),"singleTypes")}},uc=(e,t)=>t.map(({permissions:n})=>(0,y.hasPermissions)(e,n));var RC=p(98399),MC=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const TC=(e,t,n)=>MC(void 0,null,function*(){try{const{data:{data:s}}=yield ge.be.get(ve("content-types-settings")),{collectionTypesSectionLinks:a,singleTypesSectionLinks:l}=PC(e,s),i=uc(t,a),u=yield Promise.all(i),c=a.filter((g,h)=>u[h]),d=uc(t,l),m=yield Promise.all(d),f=l.filter((g,h)=>m[h]);return{authorizedCtLinks:c,authorizedStLinks:f}}catch(s){return RC.error(s),n({type:"warning",message:{id:"notification.error"}}),{authorizedCtLinks:[],authorizedStLinks:[],contentTypes:[]}}});var wC=p(98399),IC=Object.defineProperty,DC=Object.defineProperties,xC=Object.getOwnPropertyDescriptors,dc=Object.getOwnPropertySymbols,SC=Object.prototype.hasOwnProperty,LC=Object.prototype.propertyIsEnumerable,pc=(e,t,n)=>t in e?IC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,FC=(e,t)=>{for(var n in t||(t={}))SC.call(t,n)&&pc(e,n,t[n]);if(dc)for(var n of dc(t))LC.call(t,n)&&pc(e,n,t[n]);return e},kC=(e,t)=>DC(e,xC(t)),AC=(e,t,n)=>new Promise((s,a)=>{var l=c=>{try{u(n.next(c))}catch(d){a(d)}},i=c=>{try{u(n.throw(c))}catch(d){a(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(l,i);u((n=n.apply(e,t)).next())});const jC=()=>{const e=(0,fe.useDispatch)(),t=(0,y.useNotification)(),n=(0,fe.useSelector)(Rt()),s=(0,r.useRef)(),{allPermissions:a}=(0,y.useRBACProvider)(),{runHookWaterfall:l}=(0,y.useStrapiApp)(),u=Se().CancelToken.source(),{notifyStatus:c}=(0,Br.useNotifyAT)(),{formatMessage:d}=(0,A.useIntl)(),m=()=>AC(void 0,null,function*(){e(vC());try{const[{data:{data:f}},{data:{data:g}}]=yield Promise.all(["components","content-types"].map(C=>ge.be.get(ve(C),{cancelToken:u.token})));c(d({id:v("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const{authorizedCtLinks:h,authorizedStLinks:E}=yield TC(g,a,t),{ctLinks:b}=l(zt.LK,{ctLinks:h,models:g}),{stLinks:O}=l(zt.dV,{stLinks:E,models:g}),x=OC(b,O,g,f);e(x)}catch(f){if(Se().isCancel(f))return;wC.error(f),t({type:"warning",message:{id:"notification.error"}})}});return s.current=m,(0,r.useEffect)(()=>(s.current(),()=>{u.cancel("Operation canceled by the user."),e(CC())}),[e,t]),kC(FC({},n),{refetchData:s.current})},$C=De.Z.contentManager,mc=()=>{const e=(0,ee.useRouteMatch)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:s,models:a,refetchData:l}=jC(),i=ae()([...n,...s],g=>g.title.toLowerCase()),{pathname:u}=(0,ee.useLocation)(),{formatMessage:c}=(0,A.useIntl)(),{startSection:d}=(0,y.useGuidedTour)(),m=(0,r.useRef)(d);if((0,r.useEffect)(()=>{m.current&&m.current("contentManager")},[]),t==="loading")return r.createElement(oe.Main,{"aria-busy":"true"},r.createElement(X.HeaderLayout,{title:c({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(y.LoadingIndicatorPage,null));const f=a.filter(({isDisplayed:g})=>g);return i.length===0&&f.length>0&&u!=="/content-manager/403"?r.createElement(ee.Redirect,{to:"/content-manager/403"}):f.length===0&&u!=="/content-manager/no-content-types"?r.createElement(ee.Redirect,{to:"/content-manager/no-content-types"}):!e&&i.length>0?r.createElement(ee.Redirect,{to:`${i[0].to}${i[0].search?`?${i[0].search}`:""}`}):r.createElement(X.Layout,{sideNav:r.createElement(EC,null)},r.createElement(Ic,null),r.createElement(io.Provider,{value:{refetchData:l}},r.createElement(ee.Switch,null,r.createElement(ee.Route,{path:"/content-manager/components/:uid/configurations/edit"},r.createElement(y.CheckPagePermissions,{permissions:$C.componentsConfigurations},r.createElement(nC,null))),r.createElement(ee.Route,{path:"/content-manager/collectionType/:slug",component:Yv}),r.createElement(ee.Route,{path:"/content-manager/singleType/:slug",component:cC}),r.createElement(ee.Route,{path:"/content-manager/403"},r.createElement(iC,null)),r.createElement(ee.Route,{path:"/content-manager/no-content-types"},r.createElement(aC,null)),r.createElement(ee.Route,{path:"",component:y.NotFound}))))},BC=()=>{const{formatMessage:e}=(0,A.useIntl)();return r.createElement(r.Fragment,null,r.createElement(at.Helmet,{title:e({id:v("plugin.name"),defaultMessage:"Content Manager"})}),r.createElement(mc,null))}},57544:()=>{},59599:()=>{},42310:()=>{},33842:()=>{},85695:()=>{}}]);
